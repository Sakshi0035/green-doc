(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const c of f.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function i(u){if(u.ep)return;u.ep=!0;const f=r(u);fetch(u.href,f)}})();function Tc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cl={exports:{}},$o={},pl={exports:{}},ue={};var Fd;function Zm(){if(Fd)return ue;Fd=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function T(A){return A===null||typeof A!="object"?null:(A=_&&A[_]||A["@@iterator"],typeof A=="function"?A:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,x={};function D(A,L,le){this.props=A,this.context=L,this.refs=x,this.updater=le||w}D.prototype.isReactComponent={},D.prototype.setState=function(A,L){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,L,"setState")},D.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function B(){}B.prototype=D.prototype;function q(A,L,le){this.props=A,this.context=L,this.refs=x,this.updater=le||w}var H=q.prototype=new B;H.constructor=q,k(H,D.prototype),H.isPureReactComponent=!0;var W=Array.isArray,Z=Object.prototype.hasOwnProperty,b={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function se(A,L,le){var ae,ce={},pe=null,_e=null;if(L!=null)for(ae in L.ref!==void 0&&(_e=L.ref),L.key!==void 0&&(pe=""+L.key),L)Z.call(L,ae)&&!j.hasOwnProperty(ae)&&(ce[ae]=L[ae]);var ge=arguments.length-2;if(ge===1)ce.children=le;else if(1<ge){for(var Pe=Array(ge),sn=0;sn<ge;sn++)Pe[sn]=arguments[sn+2];ce.children=Pe}if(A&&A.defaultProps)for(ae in ge=A.defaultProps,ge)ce[ae]===void 0&&(ce[ae]=ge[ae]);return{$$typeof:t,type:A,key:pe,ref:_e,props:ce,_owner:b.current}}function ee(A,L){return{$$typeof:t,type:A.type,key:L,ref:A.ref,props:A.props,_owner:A._owner}}function ie(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function ve(A){var L={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(le){return L[le]})}var de=/\/+/g;function we(A,L){return typeof A=="object"&&A!==null&&A.key!=null?ve(""+A.key):L.toString(36)}function Ze(A,L,le,ae,ce){var pe=typeof A;(pe==="undefined"||pe==="boolean")&&(A=null);var _e=!1;if(A===null)_e=!0;else switch(pe){case"string":case"number":_e=!0;break;case"object":switch(A.$$typeof){case t:case e:_e=!0}}if(_e)return _e=A,ce=ce(_e),A=ae===""?"."+we(_e,0):ae,W(ce)?(le="",A!=null&&(le=A.replace(de,"$&/")+"/"),Ze(ce,L,le,"",function(sn){return sn})):ce!=null&&(ie(ce)&&(ce=ee(ce,le+(!ce.key||_e&&_e.key===ce.key?"":(""+ce.key).replace(de,"$&/")+"/")+A)),L.push(ce)),1;if(_e=0,ae=ae===""?".":ae+":",W(A))for(var ge=0;ge<A.length;ge++){pe=A[ge];var Pe=ae+we(pe,ge);_e+=Ze(pe,L,le,Pe,ce)}else if(Pe=T(A),typeof Pe=="function")for(A=Pe.call(A),ge=0;!(pe=A.next()).done;)pe=pe.value,Pe=ae+we(pe,ge++),_e+=Ze(pe,L,le,Pe,ce);else if(pe==="object")throw L=String(A),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return _e}function rn(A,L,le){if(A==null)return A;var ae=[],ce=0;return Ze(A,ae,"","",function(pe){return L.call(le,pe,ce++)}),ae}function Ae(A){if(A._status===-1){var L=A._result;L=L(),L.then(function(le){(A._status===0||A._status===-1)&&(A._status=1,A._result=le)},function(le){(A._status===0||A._status===-1)&&(A._status=2,A._result=le)}),A._status===-1&&(A._status=0,A._result=L)}if(A._status===1)return A._result.default;throw A._result}var Ee={current:null},J={transition:null},oe={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:J,ReactCurrentOwner:b};function K(){throw Error("act(...) is not supported in production builds of React.")}return ue.Children={map:rn,forEach:function(A,L,le){rn(A,function(){L.apply(this,arguments)},le)},count:function(A){var L=0;return rn(A,function(){L++}),L},toArray:function(A){return rn(A,function(L){return L})||[]},only:function(A){if(!ie(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},ue.Component=D,ue.Fragment=r,ue.Profiler=u,ue.PureComponent=q,ue.StrictMode=i,ue.Suspense=y,ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,ue.act=K,ue.cloneElement=function(A,L,le){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var ae=k({},A.props),ce=A.key,pe=A.ref,_e=A._owner;if(L!=null){if(L.ref!==void 0&&(pe=L.ref,_e=b.current),L.key!==void 0&&(ce=""+L.key),A.type&&A.type.defaultProps)var ge=A.type.defaultProps;for(Pe in L)Z.call(L,Pe)&&!j.hasOwnProperty(Pe)&&(ae[Pe]=L[Pe]===void 0&&ge!==void 0?ge[Pe]:L[Pe])}var Pe=arguments.length-2;if(Pe===1)ae.children=le;else if(1<Pe){ge=Array(Pe);for(var sn=0;sn<Pe;sn++)ge[sn]=arguments[sn+2];ae.children=ge}return{$$typeof:t,type:A.type,key:ce,ref:pe,props:ae,_owner:_e}},ue.createContext=function(A){return A={$$typeof:c,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:f,_context:A},A.Consumer=A},ue.createElement=se,ue.createFactory=function(A){var L=se.bind(null,A);return L.type=A,L},ue.createRef=function(){return{current:null}},ue.forwardRef=function(A){return{$$typeof:m,render:A}},ue.isValidElement=ie,ue.lazy=function(A){return{$$typeof:v,_payload:{_status:-1,_result:A},_init:Ae}},ue.memo=function(A,L){return{$$typeof:h,type:A,compare:L===void 0?null:L}},ue.startTransition=function(A){var L=J.transition;J.transition={};try{A()}finally{J.transition=L}},ue.unstable_act=K,ue.useCallback=function(A,L){return Ee.current.useCallback(A,L)},ue.useContext=function(A){return Ee.current.useContext(A)},ue.useDebugValue=function(){},ue.useDeferredValue=function(A){return Ee.current.useDeferredValue(A)},ue.useEffect=function(A,L){return Ee.current.useEffect(A,L)},ue.useId=function(){return Ee.current.useId()},ue.useImperativeHandle=function(A,L,le){return Ee.current.useImperativeHandle(A,L,le)},ue.useInsertionEffect=function(A,L){return Ee.current.useInsertionEffect(A,L)},ue.useLayoutEffect=function(A,L){return Ee.current.useLayoutEffect(A,L)},ue.useMemo=function(A,L){return Ee.current.useMemo(A,L)},ue.useReducer=function(A,L,le){return Ee.current.useReducer(A,L,le)},ue.useRef=function(A){return Ee.current.useRef(A)},ue.useState=function(A){return Ee.current.useState(A)},ue.useSyncExternalStore=function(A,L,le){return Ee.current.useSyncExternalStore(A,L,le)},ue.useTransition=function(){return Ee.current.useTransition()},ue.version="18.3.1",ue}var Vd;function xl(){return Vd||(Vd=1,pl.exports=Zm()),pl.exports}var Gd;function bm(){if(Gd)return $o;Gd=1;var t=xl(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,u=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function c(m,y,h){var v,_={},T=null,w=null;h!==void 0&&(T=""+h),y.key!==void 0&&(T=""+y.key),y.ref!==void 0&&(w=y.ref);for(v in y)i.call(y,v)&&!f.hasOwnProperty(v)&&(_[v]=y[v]);if(m&&m.defaultProps)for(v in y=m.defaultProps,y)_[v]===void 0&&(_[v]=y[v]);return{$$typeof:e,type:m,key:T,ref:w,props:_,_owner:u.current}}return $o.Fragment=r,$o.jsx=c,$o.jsxs=c,$o}var qd;function jm(){return qd||(qd=1,cl.exports=bm()),cl.exports}var F=jm(),Ve=xl();const eh=Tc(Ve);var ri={},ml={exports:{}},on={},hl={exports:{}},gl={};var Hd;function nh(){return Hd||(Hd=1,(function(t){function e(J,oe){var K=J.length;J.push(oe);e:for(;0<K;){var A=K-1>>>1,L=J[A];if(0<u(L,oe))J[A]=oe,J[K]=L,K=A;else break e}}function r(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var oe=J[0],K=J.pop();if(K!==oe){J[0]=K;e:for(var A=0,L=J.length,le=L>>>1;A<le;){var ae=2*(A+1)-1,ce=J[ae],pe=ae+1,_e=J[pe];if(0>u(ce,K))pe<L&&0>u(_e,ce)?(J[A]=_e,J[pe]=K,A=pe):(J[A]=ce,J[ae]=K,A=ae);else if(pe<L&&0>u(_e,K))J[A]=_e,J[pe]=K,A=pe;else break e}}return oe}function u(J,oe){var K=J.sortIndex-oe.sortIndex;return K!==0?K:J.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;t.unstable_now=function(){return f.now()}}else{var c=Date,m=c.now();t.unstable_now=function(){return c.now()-m}}var y=[],h=[],v=1,_=null,T=3,w=!1,k=!1,x=!1,D=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(J){for(var oe=r(h);oe!==null;){if(oe.callback===null)i(h);else if(oe.startTime<=J)i(h),oe.sortIndex=oe.expirationTime,e(y,oe);else break;oe=r(h)}}function W(J){if(x=!1,H(J),!k)if(r(y)!==null)k=!0,Ae(Z);else{var oe=r(h);oe!==null&&Ee(W,oe.startTime-J)}}function Z(J,oe){k=!1,x&&(x=!1,B(se),se=-1),w=!0;var K=T;try{for(H(oe),_=r(y);_!==null&&(!(_.expirationTime>oe)||J&&!ve());){var A=_.callback;if(typeof A=="function"){_.callback=null,T=_.priorityLevel;var L=A(_.expirationTime<=oe);oe=t.unstable_now(),typeof L=="function"?_.callback=L:_===r(y)&&i(y),H(oe)}else i(y);_=r(y)}if(_!==null)var le=!0;else{var ae=r(h);ae!==null&&Ee(W,ae.startTime-oe),le=!1}return le}finally{_=null,T=K,w=!1}}var b=!1,j=null,se=-1,ee=5,ie=-1;function ve(){return!(t.unstable_now()-ie<ee)}function de(){if(j!==null){var J=t.unstable_now();ie=J;var oe=!0;try{oe=j(!0,J)}finally{oe?we():(b=!1,j=null)}}else b=!1}var we;if(typeof q=="function")we=function(){q(de)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,rn=Ze.port2;Ze.port1.onmessage=de,we=function(){rn.postMessage(null)}}else we=function(){D(de,0)};function Ae(J){j=J,b||(b=!0,we())}function Ee(J,oe){se=D(function(){J(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){k||w||(k=!0,Ae(Z))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return r(y)},t.unstable_next=function(J){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var K=T;T=oe;try{return J()}finally{T=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,oe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var K=T;T=J;try{return oe()}finally{T=K}},t.unstable_scheduleCallback=function(J,oe,K){var A=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?A+K:A):K=A,J){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=K+L,J={id:v++,callback:oe,priorityLevel:J,startTime:K,expirationTime:L,sortIndex:-1},K>A?(J.sortIndex=K,e(h,J),r(y)===null&&J===r(h)&&(x?(B(se),se=-1):x=!0,Ee(W,K-A))):(J.sortIndex=L,e(y,J),k||w||(k=!0,Ae(Z))),J},t.unstable_shouldYield=ve,t.unstable_wrapCallback=function(J){var oe=T;return function(){var K=T;T=oe;try{return J.apply(this,arguments)}finally{T=K}}}})(gl)),gl}var Bd;function th(){return Bd||(Bd=1,hl.exports=nh()),hl.exports}var zd;function oh(){if(zd)return on;zd=1;var t=xl(),e=th();function r(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,s=1;s<arguments.length;s++)o+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,u={};function f(n,o){c(n,o),c(n+"Capture",o)}function c(n,o){for(u[n]=o,n=0;n<o.length;n++)i.add(o[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},_={};function T(n){return y.call(_,n)?!0:y.call(v,n)?!1:h.test(n)?_[n]=!0:(v[n]=!0,!1)}function w(n,o,s,d){if(s!==null&&s.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:s!==null?!s.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function k(n,o,s,d){if(o===null||typeof o>"u"||w(n,o,s,d))return!0;if(d)return!1;if(s!==null)switch(s.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function x(n,o,s,d,p,g,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=s,this.propertyName=n,this.type=o,this.sanitizeURL=g,this.removeEmptyString=E}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){D[n]=new x(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];D[o]=new x(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){D[n]=new x(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){D[n]=new x(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){D[n]=new x(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){D[n]=new x(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){D[n]=new x(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){D[n]=new x(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){D[n]=new x(n,5,!1,n.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function q(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(B,q);D[o]=new x(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(B,q);D[o]=new x(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(B,q);D[o]=new x(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){D[n]=new x(n,1,!1,n.toLowerCase(),null,!1,!1)}),D.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){D[n]=new x(n,1,!1,n.toLowerCase(),null,!0,!0)});function H(n,o,s,d){var p=D.hasOwnProperty(o)?D[o]:null;(p!==null?p.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(k(o,s,p,d)&&(s=null),d||p===null?T(o)&&(s===null?n.removeAttribute(o):n.setAttribute(o,""+s)):p.mustUseProperty?n[p.propertyName]=s===null?p.type===3?!1:"":s:(o=p.attributeName,d=p.attributeNamespace,s===null?n.removeAttribute(o):(p=p.type,s=p===3||p===4&&s===!0?"":""+s,d?n.setAttributeNS(d,o,s):n.setAttribute(o,s))))}var W=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),b=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),ve=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),rn=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),J=Symbol.iterator;function oe(n){return n===null||typeof n!="object"?null:(n=J&&n[J]||n["@@iterator"],typeof n=="function"?n:null)}var K=Object.assign,A;function L(n){if(A===void 0)try{throw Error()}catch(s){var o=s.stack.trim().match(/\n( *(at )?)/);A=o&&o[1]||""}return`
`+A+n}var le=!1;function ae(n,o){if(!n||le)return"";le=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(N){var d=N}Reflect.construct(n,[],o)}else{try{o.call()}catch(N){d=N}n.call(o.prototype)}else{try{throw Error()}catch(N){d=N}n()}}catch(N){if(N&&d&&typeof N.stack=="string"){for(var p=N.stack.split(`
`),g=d.stack.split(`
`),E=p.length-1,C=g.length-1;1<=E&&0<=C&&p[E]!==g[C];)C--;for(;1<=E&&0<=C;E--,C--)if(p[E]!==g[C]){if(E!==1||C!==1)do if(E--,C--,0>C||p[E]!==g[C]){var S=`
`+p[E].replace(" at new "," at ");return n.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",n.displayName)),S}while(1<=E&&0<=C);break}}}finally{le=!1,Error.prepareStackTrace=s}return(n=n?n.displayName||n.name:"")?L(n):""}function ce(n){switch(n.tag){case 5:return L(n.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return n=ae(n.type,!1),n;case 11:return n=ae(n.type.render,!1),n;case 1:return n=ae(n.type,!0),n;default:return""}}function pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case b:return"Portal";case ee:return"Profiler";case se:return"StrictMode";case we:return"Suspense";case Ze:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ve:return(n.displayName||"Context")+".Consumer";case ie:return(n._context.displayName||"Context")+".Provider";case de:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case rn:return o=n.displayName||null,o!==null?o:pe(n.type)||"Memo";case Ae:o=n._payload,n=n._init;try{return pe(n(o))}catch{}}return null}function _e(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(o);case 8:return o===se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ge(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Pe(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function sn(n){var o=Pe(n)?"checked":"value",s=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),d=""+n[o];if(!n.hasOwnProperty(o)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var p=s.get,g=s.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return p.call(this)},set:function(E){d=""+E,g.call(this,E)}}),Object.defineProperty(n,o,{enumerable:s.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function Oo(n){n._valueTracker||(n._valueTracker=sn(n))}function zl(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var s=o.getValue(),d="";return n&&(d=Pe(n)?n.checked?"true":"false":n.value),n=d,n!==s?(o.setValue(n),!0):!1}function Qo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ei(n,o){var s=o.checked;return K({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??n._wrapperState.initialChecked})}function Jl(n,o){var s=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;s=ge(o.value!=null?o.value:s),n._wrapperState={initialChecked:d,initialValue:s,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function $l(n,o){o=o.checked,o!=null&&H(n,"checked",o,!1)}function _i(n,o){$l(n,o);var s=ge(o.value),d=o.type;if(s!=null)d==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+s):n.value!==""+s&&(n.value=""+s);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?Ti(n,o.type,s):o.hasOwnProperty("defaultValue")&&Ti(n,o.type,ge(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function Wl(n,o,s){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,s||o===n.value||(n.value=o),n.defaultValue=o}s=n.name,s!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,s!==""&&(n.name=s)}function Ti(n,o,s){(o!=="number"||Qo(n.ownerDocument)!==n)&&(s==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+s&&(n.defaultValue=""+s))}var ro=Array.isArray;function wt(n,o,s,d){if(n=n.options,o){o={};for(var p=0;p<s.length;p++)o["$"+s[p]]=!0;for(s=0;s<n.length;s++)p=o.hasOwnProperty("$"+n[s].value),n[s].selected!==p&&(n[s].selected=p),p&&d&&(n[s].defaultSelected=!0)}else{for(s=""+ge(s),o=null,p=0;p<n.length;p++){if(n[p].value===s){n[p].selected=!0,d&&(n[p].defaultSelected=!0);return}o!==null||n[p].disabled||(o=n[p])}o!==null&&(o.selected=!0)}}function Ci(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(r(91));return K({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Yl(n,o){var s=o.value;if(s==null){if(s=o.children,o=o.defaultValue,s!=null){if(o!=null)throw Error(r(92));if(ro(s)){if(1<s.length)throw Error(r(93));s=s[0]}o=s}o==null&&(o=""),s=o}n._wrapperState={initialValue:ge(s)}}function Kl(n,o){var s=ge(o.value),d=ge(o.defaultValue);s!=null&&(s=""+s,s!==n.value&&(n.value=s),o.defaultValue==null&&n.defaultValue!==s&&(n.defaultValue=s)),d!=null&&(n.defaultValue=""+d)}function Ol(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function Ql(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Si(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?Ql(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Xo,Xl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,s,d,p){MSApp.execUnsafeLocalFunction(function(){return n(o,s,d,p)})}:n})(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(Xo=Xo||document.createElement("div"),Xo.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Xo.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function io(n,o){if(o){var s=n.firstChild;if(s&&s===n.lastChild&&s.nodeType===3){s.nodeValue=o;return}}n.textContent=o}var so={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},np=["Webkit","ms","Moz","O"];Object.keys(so).forEach(function(n){np.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),so[o]=so[n]})});function Zl(n,o,s){return o==null||typeof o=="boolean"||o===""?"":s||typeof o!="number"||o===0||so.hasOwnProperty(n)&&so[n]?(""+o).trim():o+"px"}function bl(n,o){n=n.style;for(var s in o)if(o.hasOwnProperty(s)){var d=s.indexOf("--")===0,p=Zl(s,o[s],d);s==="float"&&(s="cssFloat"),d?n.setProperty(s,p):n[s]=p}}var tp=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ii(n,o){if(o){if(tp[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(r(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(r(61))}if(o.style!=null&&typeof o.style!="object")throw Error(r(62))}}function wi(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ai=null;function Pi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ri=null,At=null,Pt=null;function jl(n){if(n=No(n)){if(typeof Ri!="function")throw Error(r(280));var o=n.stateNode;o&&(o=Er(o),Ri(n.stateNode,n.type,o))}}function eu(n){At?Pt?Pt.push(n):Pt=[n]:At=n}function nu(){if(At){var n=At,o=Pt;if(Pt=At=null,jl(n),o)for(n=0;n<o.length;n++)jl(o[n])}}function tu(n,o){return n(o)}function ou(){}var Ni=!1;function ru(n,o,s){if(Ni)return n(o,s);Ni=!0;try{return tu(n,o,s)}finally{Ni=!1,(At!==null||Pt!==null)&&(ou(),nu())}}function lo(n,o){var s=n.stateNode;if(s===null)return null;var d=Er(s);if(d===null)return null;s=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(s&&typeof s!="function")throw Error(r(231,o,typeof s));return s}var xi=!1;if(m)try{var uo={};Object.defineProperty(uo,"passive",{get:function(){xi=!0}}),window.addEventListener("test",uo,uo),window.removeEventListener("test",uo,uo)}catch{xi=!1}function op(n,o,s,d,p,g,E,C,S){var N=Array.prototype.slice.call(arguments,3);try{o.apply(s,N)}catch(U){this.onError(U)}}var ao=!1,Zo=null,bo=!1,Mi=null,rp={onError:function(n){ao=!0,Zo=n}};function ip(n,o,s,d,p,g,E,C,S){ao=!1,Zo=null,op.apply(rp,arguments)}function sp(n,o,s,d,p,g,E,C,S){if(ip.apply(this,arguments),ao){if(ao){var N=Zo;ao=!1,Zo=null}else throw Error(r(198));bo||(bo=!0,Mi=N)}}function ft(n){var o=n,s=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(s=o.return),n=o.return;while(n)}return o.tag===3?s:null}function iu(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function su(n){if(ft(n)!==n)throw Error(r(188))}function lp(n){var o=n.alternate;if(!o){if(o=ft(n),o===null)throw Error(r(188));return o!==n?null:n}for(var s=n,d=o;;){var p=s.return;if(p===null)break;var g=p.alternate;if(g===null){if(d=p.return,d!==null){s=d;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===s)return su(p),n;if(g===d)return su(p),o;g=g.sibling}throw Error(r(188))}if(s.return!==d.return)s=p,d=g;else{for(var E=!1,C=p.child;C;){if(C===s){E=!0,s=p,d=g;break}if(C===d){E=!0,d=p,s=g;break}C=C.sibling}if(!E){for(C=g.child;C;){if(C===s){E=!0,s=g,d=p;break}if(C===d){E=!0,d=g,s=p;break}C=C.sibling}if(!E)throw Error(r(189))}}if(s.alternate!==d)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?n:o}function lu(n){return n=lp(n),n!==null?uu(n):null}function uu(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=uu(n);if(o!==null)return o;n=n.sibling}return null}var au=e.unstable_scheduleCallback,du=e.unstable_cancelCallback,up=e.unstable_shouldYield,ap=e.unstable_requestPaint,ke=e.unstable_now,dp=e.unstable_getCurrentPriorityLevel,ki=e.unstable_ImmediatePriority,fu=e.unstable_UserBlockingPriority,jo=e.unstable_NormalPriority,fp=e.unstable_LowPriority,cu=e.unstable_IdlePriority,er=null,Pn=null;function cp(n){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(er,n,void 0,(n.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:hp,pp=Math.log,mp=Math.LN2;function hp(n){return n>>>=0,n===0?32:31-(pp(n)/mp|0)|0}var nr=64,tr=4194304;function fo(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function or(n,o){var s=n.pendingLanes;if(s===0)return 0;var d=0,p=n.suspendedLanes,g=n.pingedLanes,E=s&268435455;if(E!==0){var C=E&~p;C!==0?d=fo(C):(g&=E,g!==0&&(d=fo(g)))}else E=s&~p,E!==0?d=fo(E):g!==0&&(d=fo(g));if(d===0)return 0;if(o!==0&&o!==d&&(o&p)===0&&(p=d&-d,g=o&-o,p>=g||p===16&&(g&4194240)!==0))return o;if((d&4)!==0&&(d|=s&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=d;0<o;)s=31-En(o),p=1<<s,d|=n[s],o&=~p;return d}function gp(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yp(n,o){for(var s=n.suspendedLanes,d=n.pingedLanes,p=n.expirationTimes,g=n.pendingLanes;0<g;){var E=31-En(g),C=1<<E,S=p[E];S===-1?((C&s)===0||(C&d)!==0)&&(p[E]=gp(C,o)):S<=o&&(n.expiredLanes|=C),g&=~C}}function Di(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function pu(){var n=nr;return nr<<=1,(nr&4194240)===0&&(nr=64),n}function Li(n){for(var o=[],s=0;31>s;s++)o.push(n);return o}function co(n,o,s){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-En(o),n[o]=s}function vp(n,o){var s=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<s;){var p=31-En(s),g=1<<p;o[p]=0,d[p]=-1,n[p]=-1,s&=~g}}function Ui(n,o){var s=n.entangledLanes|=o;for(n=n.entanglements;s;){var d=31-En(s),p=1<<d;p&o|n[d]&o&&(n[d]|=o),s&=~p}}var ye=0;function mu(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var hu,Fi,gu,yu,vu,Vi=!1,rr=[],Jn=null,$n=null,Wn=null,po=new Map,mo=new Map,Yn=[],Ep="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Eu(n,o){switch(n){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Wn=null;break;case"pointerover":case"pointerout":po.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(o.pointerId)}}function ho(n,o,s,d,p,g){return n===null||n.nativeEvent!==g?(n={blockedOn:o,domEventName:s,eventSystemFlags:d,nativeEvent:g,targetContainers:[p]},o!==null&&(o=No(o),o!==null&&Fi(o)),n):(n.eventSystemFlags|=d,o=n.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),n)}function _p(n,o,s,d,p){switch(o){case"focusin":return Jn=ho(Jn,n,o,s,d,p),!0;case"dragenter":return $n=ho($n,n,o,s,d,p),!0;case"mouseover":return Wn=ho(Wn,n,o,s,d,p),!0;case"pointerover":var g=p.pointerId;return po.set(g,ho(po.get(g)||null,n,o,s,d,p)),!0;case"gotpointercapture":return g=p.pointerId,mo.set(g,ho(mo.get(g)||null,n,o,s,d,p)),!0}return!1}function _u(n){var o=ct(n.target);if(o!==null){var s=ft(o);if(s!==null){if(o=s.tag,o===13){if(o=iu(s),o!==null){n.blockedOn=o,vu(n.priority,function(){gu(s)});return}}else if(o===3&&s.stateNode.current.memoizedState.isDehydrated){n.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ir(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var s=qi(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(s===null){s=n.nativeEvent;var d=new s.constructor(s.type,s);Ai=d,s.target.dispatchEvent(d),Ai=null}else return o=No(s),o!==null&&Fi(o),n.blockedOn=s,!1;o.shift()}return!0}function Tu(n,o,s){ir(n)&&s.delete(o)}function Tp(){Vi=!1,Jn!==null&&ir(Jn)&&(Jn=null),$n!==null&&ir($n)&&($n=null),Wn!==null&&ir(Wn)&&(Wn=null),po.forEach(Tu),mo.forEach(Tu)}function go(n,o){n.blockedOn===o&&(n.blockedOn=null,Vi||(Vi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Tp)))}function yo(n){function o(p){return go(p,n)}if(0<rr.length){go(rr[0],n);for(var s=1;s<rr.length;s++){var d=rr[s];d.blockedOn===n&&(d.blockedOn=null)}}for(Jn!==null&&go(Jn,n),$n!==null&&go($n,n),Wn!==null&&go(Wn,n),po.forEach(o),mo.forEach(o),s=0;s<Yn.length;s++)d=Yn[s],d.blockedOn===n&&(d.blockedOn=null);for(;0<Yn.length&&(s=Yn[0],s.blockedOn===null);)_u(s),s.blockedOn===null&&Yn.shift()}var Rt=W.ReactCurrentBatchConfig,sr=!0;function Cp(n,o,s,d){var p=ye,g=Rt.transition;Rt.transition=null;try{ye=1,Gi(n,o,s,d)}finally{ye=p,Rt.transition=g}}function Sp(n,o,s,d){var p=ye,g=Rt.transition;Rt.transition=null;try{ye=4,Gi(n,o,s,d)}finally{ye=p,Rt.transition=g}}function Gi(n,o,s,d){if(sr){var p=qi(n,o,s,d);if(p===null)ts(n,o,d,lr,s),Eu(n,d);else if(_p(p,n,o,s,d))d.stopPropagation();else if(Eu(n,d),o&4&&-1<Ep.indexOf(n)){for(;p!==null;){var g=No(p);if(g!==null&&hu(g),g=qi(n,o,s,d),g===null&&ts(n,o,d,lr,s),g===p)break;p=g}p!==null&&d.stopPropagation()}else ts(n,o,d,null,s)}}var lr=null;function qi(n,o,s,d){if(lr=null,n=Pi(d),n=ct(n),n!==null)if(o=ft(n),o===null)n=null;else if(s=o.tag,s===13){if(n=iu(o),n!==null)return n;n=null}else if(s===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return lr=n,null}function Cu(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dp()){case ki:return 1;case fu:return 4;case jo:case fp:return 16;case cu:return 536870912;default:return 16}default:return 16}}var Kn=null,Hi=null,ur=null;function Su(){if(ur)return ur;var n,o=Hi,s=o.length,d,p="value"in Kn?Kn.value:Kn.textContent,g=p.length;for(n=0;n<s&&o[n]===p[n];n++);var E=s-n;for(d=1;d<=E&&o[s-d]===p[g-d];d++);return ur=p.slice(n,1<d?1-d:void 0)}function ar(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function dr(){return!0}function Iu(){return!1}function ln(n){function o(s,d,p,g,E){this._reactName=s,this._targetInst=p,this.type=d,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(s=n[C],this[C]=s?s(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?dr:Iu,this.isPropagationStopped=Iu,this}return K(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),o}var Nt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=ln(Nt),vo=K({},Nt,{view:0,detail:0}),Ip=ln(vo),zi,Ji,Eo,fr=K({},vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Eo&&(Eo&&n.type==="mousemove"?(zi=n.screenX-Eo.screenX,Ji=n.screenY-Eo.screenY):Ji=zi=0,Eo=n),zi)},movementY:function(n){return"movementY"in n?n.movementY:Ji}}),wu=ln(fr),wp=K({},fr,{dataTransfer:0}),Ap=ln(wp),Pp=K({},vo,{relatedTarget:0}),$i=ln(Pp),Rp=K({},Nt,{animationName:0,elapsedTime:0,pseudoElement:0}),Np=ln(Rp),xp=K({},Nt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Mp=ln(xp),kp=K({},Nt,{data:0}),Au=ln(kp),Dp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Up={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fp(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=Up[n])?!!o[n]:!1}function Wi(){return Fp}var Vp=K({},vo,{key:function(n){if(n.key){var o=Dp[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=ar(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Lp[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wi,charCode:function(n){return n.type==="keypress"?ar(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ar(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Gp=ln(Vp),qp=K({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pu=ln(qp),Hp=K({},vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wi}),Bp=ln(Hp),zp=K({},Nt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jp=ln(zp),$p=K({},fr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Wp=ln($p),Yp=[9,13,27,32],Yi=m&&"CompositionEvent"in window,_o=null;m&&"documentMode"in document&&(_o=document.documentMode);var Kp=m&&"TextEvent"in window&&!_o,Ru=m&&(!Yi||_o&&8<_o&&11>=_o),Nu=" ",xu=!1;function Mu(n,o){switch(n){case"keyup":return Yp.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ku(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var xt=!1;function Op(n,o){switch(n){case"compositionend":return ku(o);case"keypress":return o.which!==32?null:(xu=!0,Nu);case"textInput":return n=o.data,n===Nu&&xu?null:n;default:return null}}function Qp(n,o){if(xt)return n==="compositionend"||!Yi&&Mu(n,o)?(n=Su(),ur=Hi=Kn=null,xt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ru&&o.locale!=="ko"?null:o.data;default:return null}}var Xp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Du(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Xp[n.type]:o==="textarea"}function Lu(n,o,s,d){eu(d),o=gr(o,"onChange"),0<o.length&&(s=new Bi("onChange","change",null,s,d),n.push({event:s,listeners:o}))}var To=null,Co=null;function Zp(n){bu(n,0)}function cr(n){var o=Ut(n);if(zl(o))return n}function bp(n,o){if(n==="change")return o}var Uu=!1;if(m){var Ki;if(m){var Oi="oninput"in document;if(!Oi){var Fu=document.createElement("div");Fu.setAttribute("oninput","return;"),Oi=typeof Fu.oninput=="function"}Ki=Oi}else Ki=!1;Uu=Ki&&(!document.documentMode||9<document.documentMode)}function Vu(){To&&(To.detachEvent("onpropertychange",Gu),Co=To=null)}function Gu(n){if(n.propertyName==="value"&&cr(Co)){var o=[];Lu(o,Co,n,Pi(n)),ru(Zp,o)}}function jp(n,o,s){n==="focusin"?(Vu(),To=o,Co=s,To.attachEvent("onpropertychange",Gu)):n==="focusout"&&Vu()}function em(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return cr(Co)}function nm(n,o){if(n==="click")return cr(o)}function tm(n,o){if(n==="input"||n==="change")return cr(o)}function om(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var _n=typeof Object.is=="function"?Object.is:om;function So(n,o){if(_n(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var s=Object.keys(n),d=Object.keys(o);if(s.length!==d.length)return!1;for(d=0;d<s.length;d++){var p=s[d];if(!y.call(o,p)||!_n(n[p],o[p]))return!1}return!0}function qu(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hu(n,o){var s=qu(n);n=0;for(var d;s;){if(s.nodeType===3){if(d=n+s.textContent.length,n<=o&&d>=o)return{node:s,offset:o-n};n=d}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=qu(s)}}function Bu(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Bu(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function zu(){for(var n=window,o=Qo();o instanceof n.HTMLIFrameElement;){try{var s=typeof o.contentWindow.location.href=="string"}catch{s=!1}if(s)n=o.contentWindow;else break;o=Qo(n.document)}return o}function Qi(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function rm(n){var o=zu(),s=n.focusedElem,d=n.selectionRange;if(o!==s&&s&&s.ownerDocument&&Bu(s.ownerDocument.documentElement,s)){if(d!==null&&Qi(s)){if(o=d.start,n=d.end,n===void 0&&(n=o),"selectionStart"in s)s.selectionStart=o,s.selectionEnd=Math.min(n,s.value.length);else if(n=(o=s.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var p=s.textContent.length,g=Math.min(d.start,p);d=d.end===void 0?g:Math.min(d.end,p),!n.extend&&g>d&&(p=d,d=g,g=p),p=Hu(s,g);var E=Hu(s,d);p&&E&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),n.removeAllRanges(),g>d?(n.addRange(o),n.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),n.addRange(o)))}}for(o=[],n=s;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<o.length;s++)n=o[s],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var im=m&&"documentMode"in document&&11>=document.documentMode,Mt=null,Xi=null,Io=null,Zi=!1;function Ju(n,o,s){var d=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Zi||Mt==null||Mt!==Qo(d)||(d=Mt,"selectionStart"in d&&Qi(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Io&&So(Io,d)||(Io=d,d=gr(Xi,"onSelect"),0<d.length&&(o=new Bi("onSelect","select",null,o,s),n.push({event:o,listeners:d}),o.target=Mt)))}function pr(n,o){var s={};return s[n.toLowerCase()]=o.toLowerCase(),s["Webkit"+n]="webkit"+o,s["Moz"+n]="moz"+o,s}var kt={animationend:pr("Animation","AnimationEnd"),animationiteration:pr("Animation","AnimationIteration"),animationstart:pr("Animation","AnimationStart"),transitionend:pr("Transition","TransitionEnd")},bi={},$u={};m&&($u=document.createElement("div").style,"AnimationEvent"in window||(delete kt.animationend.animation,delete kt.animationiteration.animation,delete kt.animationstart.animation),"TransitionEvent"in window||delete kt.transitionend.transition);function mr(n){if(bi[n])return bi[n];if(!kt[n])return n;var o=kt[n],s;for(s in o)if(o.hasOwnProperty(s)&&s in $u)return bi[n]=o[s];return n}var Wu=mr("animationend"),Yu=mr("animationiteration"),Ku=mr("animationstart"),Ou=mr("transitionend"),Qu=new Map,Xu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(n,o){Qu.set(n,o),f(o,[n])}for(var ji=0;ji<Xu.length;ji++){var es=Xu[ji],sm=es.toLowerCase(),lm=es[0].toUpperCase()+es.slice(1);On(sm,"on"+lm)}On(Wu,"onAnimationEnd"),On(Yu,"onAnimationIteration"),On(Ku,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(Ou,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),um=new Set("cancel close invalid load scroll toggle".split(" ").concat(wo));function Zu(n,o,s){var d=n.type||"unknown-event";n.currentTarget=s,sp(d,o,void 0,n),n.currentTarget=null}function bu(n,o){o=(o&4)!==0;for(var s=0;s<n.length;s++){var d=n[s],p=d.event;d=d.listeners;e:{var g=void 0;if(o)for(var E=d.length-1;0<=E;E--){var C=d[E],S=C.instance,N=C.currentTarget;if(C=C.listener,S!==g&&p.isPropagationStopped())break e;Zu(p,C,N),g=S}else for(E=0;E<d.length;E++){if(C=d[E],S=C.instance,N=C.currentTarget,C=C.listener,S!==g&&p.isPropagationStopped())break e;Zu(p,C,N),g=S}}}if(bo)throw n=Mi,bo=!1,Mi=null,n}function Ce(n,o){var s=o[us];s===void 0&&(s=o[us]=new Set);var d=n+"__bubble";s.has(d)||(ju(o,n,2,!1),s.add(d))}function ns(n,o,s){var d=0;o&&(d|=4),ju(s,n,d,o)}var hr="_reactListening"+Math.random().toString(36).slice(2);function Ao(n){if(!n[hr]){n[hr]=!0,i.forEach(function(s){s!=="selectionchange"&&(um.has(s)||ns(s,!1,n),ns(s,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[hr]||(o[hr]=!0,ns("selectionchange",!1,o))}}function ju(n,o,s,d){switch(Cu(o)){case 1:var p=Cp;break;case 4:p=Sp;break;default:p=Gi}s=p.bind(null,o,s,n),p=void 0,!xi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?n.addEventListener(o,s,{capture:!0,passive:p}):n.addEventListener(o,s,!0):p!==void 0?n.addEventListener(o,s,{passive:p}):n.addEventListener(o,s,!1)}function ts(n,o,s,d,p){var g=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var C=d.stateNode.containerInfo;if(C===p||C.nodeType===8&&C.parentNode===p)break;if(E===4)for(E=d.return;E!==null;){var S=E.tag;if((S===3||S===4)&&(S=E.stateNode.containerInfo,S===p||S.nodeType===8&&S.parentNode===p))return;E=E.return}for(;C!==null;){if(E=ct(C),E===null)return;if(S=E.tag,S===5||S===6){d=g=E;continue e}C=C.parentNode}}d=d.return}ru(function(){var N=g,U=Pi(s),V=[];e:{var M=Qu.get(n);if(M!==void 0){var $=Bi,O=n;switch(n){case"keypress":if(ar(s)===0)break e;case"keydown":case"keyup":$=Gp;break;case"focusin":O="focus",$=$i;break;case"focusout":O="blur",$=$i;break;case"beforeblur":case"afterblur":$=$i;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=wu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Ap;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Bp;break;case Wu:case Yu:case Ku:$=Np;break;case Ou:$=Jp;break;case"scroll":$=Ip;break;case"wheel":$=Wp;break;case"copy":case"cut":case"paste":$=Mp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Pu}var Q=(o&4)!==0,De=!Q&&n==="scroll",P=Q?M!==null?M+"Capture":null:M;Q=[];for(var I=N,R;I!==null;){R=I;var G=R.stateNode;if(R.tag===5&&G!==null&&(R=G,P!==null&&(G=lo(I,P),G!=null&&Q.push(Po(I,G,R)))),De)break;I=I.return}0<Q.length&&(M=new $(M,O,null,s,U),V.push({event:M,listeners:Q}))}}if((o&7)===0){e:{if(M=n==="mouseover"||n==="pointerover",$=n==="mouseout"||n==="pointerout",M&&s!==Ai&&(O=s.relatedTarget||s.fromElement)&&(ct(O)||O[kn]))break e;if(($||M)&&(M=U.window===U?U:(M=U.ownerDocument)?M.defaultView||M.parentWindow:window,$?(O=s.relatedTarget||s.toElement,$=N,O=O?ct(O):null,O!==null&&(De=ft(O),O!==De||O.tag!==5&&O.tag!==6)&&(O=null)):($=null,O=N),$!==O)){if(Q=wu,G="onMouseLeave",P="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(Q=Pu,G="onPointerLeave",P="onPointerEnter",I="pointer"),De=$==null?M:Ut($),R=O==null?M:Ut(O),M=new Q(G,I+"leave",$,s,U),M.target=De,M.relatedTarget=R,G=null,ct(U)===N&&(Q=new Q(P,I+"enter",O,s,U),Q.target=R,Q.relatedTarget=De,G=Q),De=G,$&&O)n:{for(Q=$,P=O,I=0,R=Q;R;R=Dt(R))I++;for(R=0,G=P;G;G=Dt(G))R++;for(;0<I-R;)Q=Dt(Q),I--;for(;0<R-I;)P=Dt(P),R--;for(;I--;){if(Q===P||P!==null&&Q===P.alternate)break n;Q=Dt(Q),P=Dt(P)}Q=null}else Q=null;$!==null&&ea(V,M,$,Q,!1),O!==null&&De!==null&&ea(V,De,O,Q,!0)}}e:{if(M=N?Ut(N):window,$=M.nodeName&&M.nodeName.toLowerCase(),$==="select"||$==="input"&&M.type==="file")var X=bp;else if(Du(M))if(Uu)X=tm;else{X=em;var ne=jp}else($=M.nodeName)&&$.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(X=nm);if(X&&(X=X(n,N))){Lu(V,X,s,U);break e}ne&&ne(n,M,N),n==="focusout"&&(ne=M._wrapperState)&&ne.controlled&&M.type==="number"&&Ti(M,"number",M.value)}switch(ne=N?Ut(N):window,n){case"focusin":(Du(ne)||ne.contentEditable==="true")&&(Mt=ne,Xi=N,Io=null);break;case"focusout":Io=Xi=Mt=null;break;case"mousedown":Zi=!0;break;case"contextmenu":case"mouseup":case"dragend":Zi=!1,Ju(V,s,U);break;case"selectionchange":if(im)break;case"keydown":case"keyup":Ju(V,s,U)}var te;if(Yi)e:{switch(n){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else xt?Mu(n,s)&&(re="onCompositionEnd"):n==="keydown"&&s.keyCode===229&&(re="onCompositionStart");re&&(Ru&&s.locale!=="ko"&&(xt||re!=="onCompositionStart"?re==="onCompositionEnd"&&xt&&(te=Su()):(Kn=U,Hi="value"in Kn?Kn.value:Kn.textContent,xt=!0)),ne=gr(N,re),0<ne.length&&(re=new Au(re,n,null,s,U),V.push({event:re,listeners:ne}),te?re.data=te:(te=ku(s),te!==null&&(re.data=te)))),(te=Kp?Op(n,s):Qp(n,s))&&(N=gr(N,"onBeforeInput"),0<N.length&&(U=new Au("onBeforeInput","beforeinput",null,s,U),V.push({event:U,listeners:N}),U.data=te))}bu(V,o)})}function Po(n,o,s){return{instance:n,listener:o,currentTarget:s}}function gr(n,o){for(var s=o+"Capture",d=[];n!==null;){var p=n,g=p.stateNode;p.tag===5&&g!==null&&(p=g,g=lo(n,s),g!=null&&d.unshift(Po(n,g,p)),g=lo(n,o),g!=null&&d.push(Po(n,g,p))),n=n.return}return d}function Dt(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ea(n,o,s,d,p){for(var g=o._reactName,E=[];s!==null&&s!==d;){var C=s,S=C.alternate,N=C.stateNode;if(S!==null&&S===d)break;C.tag===5&&N!==null&&(C=N,p?(S=lo(s,g),S!=null&&E.unshift(Po(s,S,C))):p||(S=lo(s,g),S!=null&&E.push(Po(s,S,C)))),s=s.return}E.length!==0&&n.push({event:o,listeners:E})}var am=/\r\n?/g,dm=/\u0000|\uFFFD/g;function na(n){return(typeof n=="string"?n:""+n).replace(am,`
`).replace(dm,"")}function yr(n,o,s){if(o=na(o),na(n)!==o&&s)throw Error(r(425))}function vr(){}var os=null,rs=null;function is(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ss=typeof setTimeout=="function"?setTimeout:void 0,fm=typeof clearTimeout=="function"?clearTimeout:void 0,ta=typeof Promise=="function"?Promise:void 0,cm=typeof queueMicrotask=="function"?queueMicrotask:typeof ta<"u"?function(n){return ta.resolve(null).then(n).catch(pm)}:ss;function pm(n){setTimeout(function(){throw n})}function ls(n,o){var s=o,d=0;do{var p=s.nextSibling;if(n.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"){if(d===0){n.removeChild(p),yo(o);return}d--}else s!=="$"&&s!=="$?"&&s!=="$!"||d++;s=p}while(s);yo(o)}function Qn(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function oa(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var s=n.data;if(s==="$"||s==="$!"||s==="$?"){if(o===0)return n;o--}else s==="/$"&&o++}n=n.previousSibling}return null}var Lt=Math.random().toString(36).slice(2),Rn="__reactFiber$"+Lt,Ro="__reactProps$"+Lt,kn="__reactContainer$"+Lt,us="__reactEvents$"+Lt,mm="__reactListeners$"+Lt,hm="__reactHandles$"+Lt;function ct(n){var o=n[Rn];if(o)return o;for(var s=n.parentNode;s;){if(o=s[kn]||s[Rn]){if(s=o.alternate,o.child!==null||s!==null&&s.child!==null)for(n=oa(n);n!==null;){if(s=n[Rn])return s;n=oa(n)}return o}n=s,s=n.parentNode}return null}function No(n){return n=n[Rn]||n[kn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ut(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function Er(n){return n[Ro]||null}var as=[],Ft=-1;function Xn(n){return{current:n}}function Se(n){0>Ft||(n.current=as[Ft],as[Ft]=null,Ft--)}function Te(n,o){Ft++,as[Ft]=n.current,n.current=o}var Zn={},$e=Xn(Zn),be=Xn(!1),pt=Zn;function Vt(n,o){var s=n.type.contextTypes;if(!s)return Zn;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var p={},g;for(g in s)p[g]=o[g];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=p),p}function je(n){return n=n.childContextTypes,n!=null}function _r(){Se(be),Se($e)}function ra(n,o,s){if($e.current!==Zn)throw Error(r(168));Te($e,o),Te(be,s)}function ia(n,o,s){var d=n.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return s;d=d.getChildContext();for(var p in d)if(!(p in o))throw Error(r(108,_e(n)||"Unknown",p));return K({},s,d)}function Tr(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Zn,pt=$e.current,Te($e,n),Te(be,be.current),!0}function sa(n,o,s){var d=n.stateNode;if(!d)throw Error(r(169));s?(n=ia(n,o,pt),d.__reactInternalMemoizedMergedChildContext=n,Se(be),Se($e),Te($e,n)):Se(be),Te(be,s)}var Dn=null,Cr=!1,ds=!1;function la(n){Dn===null?Dn=[n]:Dn.push(n)}function gm(n){Cr=!0,la(n)}function bn(){if(!ds&&Dn!==null){ds=!0;var n=0,o=ye;try{var s=Dn;for(ye=1;n<s.length;n++){var d=s[n];do d=d(!0);while(d!==null)}Dn=null,Cr=!1}catch(p){throw Dn!==null&&(Dn=Dn.slice(n+1)),au(ki,bn),p}finally{ye=o,ds=!1}}return null}var Gt=[],qt=0,Sr=null,Ir=0,fn=[],cn=0,mt=null,Ln=1,Un="";function ht(n,o){Gt[qt++]=Ir,Gt[qt++]=Sr,Sr=n,Ir=o}function ua(n,o,s){fn[cn++]=Ln,fn[cn++]=Un,fn[cn++]=mt,mt=n;var d=Ln;n=Un;var p=32-En(d)-1;d&=~(1<<p),s+=1;var g=32-En(o)+p;if(30<g){var E=p-p%5;g=(d&(1<<E)-1).toString(32),d>>=E,p-=E,Ln=1<<32-En(o)+p|s<<p|d,Un=g+n}else Ln=1<<g|s<<p|d,Un=n}function fs(n){n.return!==null&&(ht(n,1),ua(n,1,0))}function cs(n){for(;n===Sr;)Sr=Gt[--qt],Gt[qt]=null,Ir=Gt[--qt],Gt[qt]=null;for(;n===mt;)mt=fn[--cn],fn[cn]=null,Un=fn[--cn],fn[cn]=null,Ln=fn[--cn],fn[cn]=null}var un=null,an=null,Re=!1,Tn=null;function aa(n,o){var s=gn(5,null,null,0);s.elementType="DELETED",s.stateNode=o,s.return=n,o=n.deletions,o===null?(n.deletions=[s],n.flags|=16):o.push(s)}function da(n,o){switch(n.tag){case 5:var s=n.type;return o=o.nodeType!==1||s.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,un=n,an=Qn(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,un=n,an=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(s=mt!==null?{id:Ln,overflow:Un}:null,n.memoizedState={dehydrated:o,treeContext:s,retryLane:1073741824},s=gn(18,null,null,0),s.stateNode=o,s.return=n,n.child=s,un=n,an=null,!0):!1;default:return!1}}function ps(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ms(n){if(Re){var o=an;if(o){var s=o;if(!da(n,o)){if(ps(n))throw Error(r(418));o=Qn(s.nextSibling);var d=un;o&&da(n,o)?aa(d,s):(n.flags=n.flags&-4097|2,Re=!1,un=n)}}else{if(ps(n))throw Error(r(418));n.flags=n.flags&-4097|2,Re=!1,un=n}}}function fa(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;un=n}function wr(n){if(n!==un)return!1;if(!Re)return fa(n),Re=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!is(n.type,n.memoizedProps)),o&&(o=an)){if(ps(n))throw ca(),Error(r(418));for(;o;)aa(n,o),o=Qn(o.nextSibling)}if(fa(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var s=n.data;if(s==="/$"){if(o===0){an=Qn(n.nextSibling);break e}o--}else s!=="$"&&s!=="$!"&&s!=="$?"||o++}n=n.nextSibling}an=null}}else an=un?Qn(n.stateNode.nextSibling):null;return!0}function ca(){for(var n=an;n;)n=Qn(n.nextSibling)}function Ht(){an=un=null,Re=!1}function hs(n){Tn===null?Tn=[n]:Tn.push(n)}var ym=W.ReactCurrentBatchConfig;function xo(n,o,s){if(n=s.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var d=s.stateNode}if(!d)throw Error(r(147,n));var p=d,g=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===g?o.ref:(o=function(E){var C=p.refs;E===null?delete C[g]:C[g]=E},o._stringRef=g,o)}if(typeof n!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,n))}return n}function Ar(n,o){throw n=Object.prototype.toString.call(o),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function pa(n){var o=n._init;return o(n._payload)}function ma(n){function o(P,I){if(n){var R=P.deletions;R===null?(P.deletions=[I],P.flags|=16):R.push(I)}}function s(P,I){if(!n)return null;for(;I!==null;)o(P,I),I=I.sibling;return null}function d(P,I){for(P=new Map;I!==null;)I.key!==null?P.set(I.key,I):P.set(I.index,I),I=I.sibling;return P}function p(P,I){return P=st(P,I),P.index=0,P.sibling=null,P}function g(P,I,R){return P.index=R,n?(R=P.alternate,R!==null?(R=R.index,R<I?(P.flags|=2,I):R):(P.flags|=2,I)):(P.flags|=1048576,I)}function E(P){return n&&P.alternate===null&&(P.flags|=2),P}function C(P,I,R,G){return I===null||I.tag!==6?(I=sl(R,P.mode,G),I.return=P,I):(I=p(I,R),I.return=P,I)}function S(P,I,R,G){var X=R.type;return X===j?U(P,I,R.props.children,G,R.key):I!==null&&(I.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Ae&&pa(X)===I.type)?(G=p(I,R.props),G.ref=xo(P,I,R),G.return=P,G):(G=Xr(R.type,R.key,R.props,null,P.mode,G),G.ref=xo(P,I,R),G.return=P,G)}function N(P,I,R,G){return I===null||I.tag!==4||I.stateNode.containerInfo!==R.containerInfo||I.stateNode.implementation!==R.implementation?(I=ll(R,P.mode,G),I.return=P,I):(I=p(I,R.children||[]),I.return=P,I)}function U(P,I,R,G,X){return I===null||I.tag!==7?(I=St(R,P.mode,G,X),I.return=P,I):(I=p(I,R),I.return=P,I)}function V(P,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return I=sl(""+I,P.mode,R),I.return=P,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Z:return R=Xr(I.type,I.key,I.props,null,P.mode,R),R.ref=xo(P,null,I),R.return=P,R;case b:return I=ll(I,P.mode,R),I.return=P,I;case Ae:var G=I._init;return V(P,G(I._payload),R)}if(ro(I)||oe(I))return I=St(I,P.mode,R,null),I.return=P,I;Ar(P,I)}return null}function M(P,I,R,G){var X=I!==null?I.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return X!==null?null:C(P,I,""+R,G);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Z:return R.key===X?S(P,I,R,G):null;case b:return R.key===X?N(P,I,R,G):null;case Ae:return X=R._init,M(P,I,X(R._payload),G)}if(ro(R)||oe(R))return X!==null?null:U(P,I,R,G,null);Ar(P,R)}return null}function $(P,I,R,G,X){if(typeof G=="string"&&G!==""||typeof G=="number")return P=P.get(R)||null,C(I,P,""+G,X);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Z:return P=P.get(G.key===null?R:G.key)||null,S(I,P,G,X);case b:return P=P.get(G.key===null?R:G.key)||null,N(I,P,G,X);case Ae:var ne=G._init;return $(P,I,R,ne(G._payload),X)}if(ro(G)||oe(G))return P=P.get(R)||null,U(I,P,G,X,null);Ar(I,G)}return null}function O(P,I,R,G){for(var X=null,ne=null,te=I,re=I=0,He=null;te!==null&&re<R.length;re++){te.index>re?(He=te,te=null):He=te.sibling;var me=M(P,te,R[re],G);if(me===null){te===null&&(te=He);break}n&&te&&me.alternate===null&&o(P,te),I=g(me,I,re),ne===null?X=me:ne.sibling=me,ne=me,te=He}if(re===R.length)return s(P,te),Re&&ht(P,re),X;if(te===null){for(;re<R.length;re++)te=V(P,R[re],G),te!==null&&(I=g(te,I,re),ne===null?X=te:ne.sibling=te,ne=te);return Re&&ht(P,re),X}for(te=d(P,te);re<R.length;re++)He=$(te,P,re,R[re],G),He!==null&&(n&&He.alternate!==null&&te.delete(He.key===null?re:He.key),I=g(He,I,re),ne===null?X=He:ne.sibling=He,ne=He);return n&&te.forEach(function(lt){return o(P,lt)}),Re&&ht(P,re),X}function Q(P,I,R,G){var X=oe(R);if(typeof X!="function")throw Error(r(150));if(R=X.call(R),R==null)throw Error(r(151));for(var ne=X=null,te=I,re=I=0,He=null,me=R.next();te!==null&&!me.done;re++,me=R.next()){te.index>re?(He=te,te=null):He=te.sibling;var lt=M(P,te,me.value,G);if(lt===null){te===null&&(te=He);break}n&&te&&lt.alternate===null&&o(P,te),I=g(lt,I,re),ne===null?X=lt:ne.sibling=lt,ne=lt,te=He}if(me.done)return s(P,te),Re&&ht(P,re),X;if(te===null){for(;!me.done;re++,me=R.next())me=V(P,me.value,G),me!==null&&(I=g(me,I,re),ne===null?X=me:ne.sibling=me,ne=me);return Re&&ht(P,re),X}for(te=d(P,te);!me.done;re++,me=R.next())me=$(te,P,re,me.value,G),me!==null&&(n&&me.alternate!==null&&te.delete(me.key===null?re:me.key),I=g(me,I,re),ne===null?X=me:ne.sibling=me,ne=me);return n&&te.forEach(function(Xm){return o(P,Xm)}),Re&&ht(P,re),X}function De(P,I,R,G){if(typeof R=="object"&&R!==null&&R.type===j&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Z:e:{for(var X=R.key,ne=I;ne!==null;){if(ne.key===X){if(X=R.type,X===j){if(ne.tag===7){s(P,ne.sibling),I=p(ne,R.props.children),I.return=P,P=I;break e}}else if(ne.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Ae&&pa(X)===ne.type){s(P,ne.sibling),I=p(ne,R.props),I.ref=xo(P,ne,R),I.return=P,P=I;break e}s(P,ne);break}else o(P,ne);ne=ne.sibling}R.type===j?(I=St(R.props.children,P.mode,G,R.key),I.return=P,P=I):(G=Xr(R.type,R.key,R.props,null,P.mode,G),G.ref=xo(P,I,R),G.return=P,P=G)}return E(P);case b:e:{for(ne=R.key;I!==null;){if(I.key===ne)if(I.tag===4&&I.stateNode.containerInfo===R.containerInfo&&I.stateNode.implementation===R.implementation){s(P,I.sibling),I=p(I,R.children||[]),I.return=P,P=I;break e}else{s(P,I);break}else o(P,I);I=I.sibling}I=ll(R,P.mode,G),I.return=P,P=I}return E(P);case Ae:return ne=R._init,De(P,I,ne(R._payload),G)}if(ro(R))return O(P,I,R,G);if(oe(R))return Q(P,I,R,G);Ar(P,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,I!==null&&I.tag===6?(s(P,I.sibling),I=p(I,R),I.return=P,P=I):(s(P,I),I=sl(R,P.mode,G),I.return=P,P=I),E(P)):s(P,I)}return De}var Bt=ma(!0),ha=ma(!1),Pr=Xn(null),Rr=null,zt=null,gs=null;function ys(){gs=zt=Rr=null}function vs(n){var o=Pr.current;Se(Pr),n._currentValue=o}function Es(n,o,s){for(;n!==null;){var d=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),n===s)break;n=n.return}}function Jt(n,o){Rr=n,gs=zt=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&o)!==0&&(en=!0),n.firstContext=null)}function pn(n){var o=n._currentValue;if(gs!==n)if(n={context:n,memoizedValue:o,next:null},zt===null){if(Rr===null)throw Error(r(308));zt=n,Rr.dependencies={lanes:0,firstContext:n}}else zt=zt.next=n;return o}var gt=null;function _s(n){gt===null?gt=[n]:gt.push(n)}function ga(n,o,s,d){var p=o.interleaved;return p===null?(s.next=s,_s(o)):(s.next=p.next,p.next=s),o.interleaved=s,Fn(n,d)}function Fn(n,o){n.lanes|=o;var s=n.alternate;for(s!==null&&(s.lanes|=o),s=n,n=n.return;n!==null;)n.childLanes|=o,s=n.alternate,s!==null&&(s.childLanes|=o),s=n,n=n.return;return s.tag===3?s.stateNode:null}var jn=!1;function Ts(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ya(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Vn(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function et(n,o,s){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(fe&2)!==0){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,Fn(n,s)}return p=d.interleaved,p===null?(o.next=o,_s(d)):(o.next=p.next,p.next=o),d.interleaved=o,Fn(n,s)}function Nr(n,o,s){if(o=o.updateQueue,o!==null&&(o=o.shared,(s&4194240)!==0)){var d=o.lanes;d&=n.pendingLanes,s|=d,o.lanes=s,Ui(n,s)}}function va(n,o){var s=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,s===d)){var p=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var E={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?p=g=E:g=g.next=E,s=s.next}while(s!==null);g===null?p=g=o:g=g.next=o}else p=g=o;s={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:d.shared,effects:d.effects},n.updateQueue=s;return}n=s.lastBaseUpdate,n===null?s.firstBaseUpdate=o:n.next=o,s.lastBaseUpdate=o}function xr(n,o,s,d){var p=n.updateQueue;jn=!1;var g=p.firstBaseUpdate,E=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var S=C,N=S.next;S.next=null,E===null?g=N:E.next=N,E=S;var U=n.alternate;U!==null&&(U=U.updateQueue,C=U.lastBaseUpdate,C!==E&&(C===null?U.firstBaseUpdate=N:C.next=N,U.lastBaseUpdate=S))}if(g!==null){var V=p.baseState;E=0,U=N=S=null,C=g;do{var M=C.lane,$=C.eventTime;if((d&M)===M){U!==null&&(U=U.next={eventTime:$,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var O=n,Q=C;switch(M=o,$=s,Q.tag){case 1:if(O=Q.payload,typeof O=="function"){V=O.call($,V,M);break e}V=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=Q.payload,M=typeof O=="function"?O.call($,V,M):O,M==null)break e;V=K({},V,M);break e;case 2:jn=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,M=p.effects,M===null?p.effects=[C]:M.push(C))}else $={eventTime:$,lane:M,tag:C.tag,payload:C.payload,callback:C.callback,next:null},U===null?(N=U=$,S=V):U=U.next=$,E|=M;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;M=C,C=M.next,M.next=null,p.lastBaseUpdate=M,p.shared.pending=null}}while(!0);if(U===null&&(S=V),p.baseState=S,p.firstBaseUpdate=N,p.lastBaseUpdate=U,o=p.shared.interleaved,o!==null){p=o;do E|=p.lane,p=p.next;while(p!==o)}else g===null&&(p.shared.lanes=0);Et|=E,n.lanes=E,n.memoizedState=V}}function Ea(n,o,s){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var d=n[o],p=d.callback;if(p!==null){if(d.callback=null,d=s,typeof p!="function")throw Error(r(191,p));p.call(d)}}}var Mo={},Nn=Xn(Mo),ko=Xn(Mo),Do=Xn(Mo);function yt(n){if(n===Mo)throw Error(r(174));return n}function Cs(n,o){switch(Te(Do,o),Te(ko,n),Te(Nn,Mo),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Si(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=Si(o,n)}Se(Nn),Te(Nn,o)}function $t(){Se(Nn),Se(ko),Se(Do)}function _a(n){yt(Do.current);var o=yt(Nn.current),s=Si(o,n.type);o!==s&&(Te(ko,n),Te(Nn,s))}function Ss(n){ko.current===n&&(Se(Nn),Se(ko))}var Ne=Xn(0);function Mr(n){for(var o=n;o!==null;){if(o.tag===13){var s=o.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Is=[];function ws(){for(var n=0;n<Is.length;n++)Is[n]._workInProgressVersionPrimary=null;Is.length=0}var kr=W.ReactCurrentDispatcher,As=W.ReactCurrentBatchConfig,vt=0,xe=null,Ue=null,Ge=null,Dr=!1,Lo=!1,Uo=0,vm=0;function We(){throw Error(r(321))}function Ps(n,o){if(o===null)return!1;for(var s=0;s<o.length&&s<n.length;s++)if(!_n(n[s],o[s]))return!1;return!0}function Rs(n,o,s,d,p,g){if(vt=g,xe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,kr.current=n===null||n.memoizedState===null?Cm:Sm,n=s(d,p),Lo){g=0;do{if(Lo=!1,Uo=0,25<=g)throw Error(r(301));g+=1,Ge=Ue=null,o.updateQueue=null,kr.current=Im,n=s(d,p)}while(Lo)}if(kr.current=Fr,o=Ue!==null&&Ue.next!==null,vt=0,Ge=Ue=xe=null,Dr=!1,o)throw Error(r(300));return n}function Ns(){var n=Uo!==0;return Uo=0,n}function xn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?xe.memoizedState=Ge=n:Ge=Ge.next=n,Ge}function mn(){if(Ue===null){var n=xe.alternate;n=n!==null?n.memoizedState:null}else n=Ue.next;var o=Ge===null?xe.memoizedState:Ge.next;if(o!==null)Ge=o,Ue=n;else{if(n===null)throw Error(r(310));Ue=n,n={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Ge===null?xe.memoizedState=Ge=n:Ge=Ge.next=n}return Ge}function Fo(n,o){return typeof o=="function"?o(n):o}function xs(n){var o=mn(),s=o.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=n;var d=Ue,p=d.baseQueue,g=s.pending;if(g!==null){if(p!==null){var E=p.next;p.next=g.next,g.next=E}d.baseQueue=p=g,s.pending=null}if(p!==null){g=p.next,d=d.baseState;var C=E=null,S=null,N=g;do{var U=N.lane;if((vt&U)===U)S!==null&&(S=S.next={lane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),d=N.hasEagerState?N.eagerState:n(d,N.action);else{var V={lane:U,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null};S===null?(C=S=V,E=d):S=S.next=V,xe.lanes|=U,Et|=U}N=N.next}while(N!==null&&N!==g);S===null?E=d:S.next=C,_n(d,o.memoizedState)||(en=!0),o.memoizedState=d,o.baseState=E,o.baseQueue=S,s.lastRenderedState=d}if(n=s.interleaved,n!==null){p=n;do g=p.lane,xe.lanes|=g,Et|=g,p=p.next;while(p!==n)}else p===null&&(s.lanes=0);return[o.memoizedState,s.dispatch]}function Ms(n){var o=mn(),s=o.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=n;var d=s.dispatch,p=s.pending,g=o.memoizedState;if(p!==null){s.pending=null;var E=p=p.next;do g=n(g,E.action),E=E.next;while(E!==p);_n(g,o.memoizedState)||(en=!0),o.memoizedState=g,o.baseQueue===null&&(o.baseState=g),s.lastRenderedState=g}return[g,d]}function Ta(){}function Ca(n,o){var s=xe,d=mn(),p=o(),g=!_n(d.memoizedState,p);if(g&&(d.memoizedState=p,en=!0),d=d.queue,ks(wa.bind(null,s,d,n),[n]),d.getSnapshot!==o||g||Ge!==null&&Ge.memoizedState.tag&1){if(s.flags|=2048,Vo(9,Ia.bind(null,s,d,p,o),void 0,null),qe===null)throw Error(r(349));(vt&30)!==0||Sa(s,o,p)}return p}function Sa(n,o,s){n.flags|=16384,n={getSnapshot:o,value:s},o=xe.updateQueue,o===null?(o={lastEffect:null,stores:null},xe.updateQueue=o,o.stores=[n]):(s=o.stores,s===null?o.stores=[n]:s.push(n))}function Ia(n,o,s,d){o.value=s,o.getSnapshot=d,Aa(o)&&Pa(n)}function wa(n,o,s){return s(function(){Aa(o)&&Pa(n)})}function Aa(n){var o=n.getSnapshot;n=n.value;try{var s=o();return!_n(n,s)}catch{return!0}}function Pa(n){var o=Fn(n,1);o!==null&&wn(o,n,1,-1)}function Ra(n){var o=xn();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:n},o.queue=n,n=n.dispatch=Tm.bind(null,xe,n),[o.memoizedState,n]}function Vo(n,o,s,d){return n={tag:n,create:o,destroy:s,deps:d,next:null},o=xe.updateQueue,o===null?(o={lastEffect:null,stores:null},xe.updateQueue=o,o.lastEffect=n.next=n):(s=o.lastEffect,s===null?o.lastEffect=n.next=n:(d=s.next,s.next=n,n.next=d,o.lastEffect=n)),n}function Na(){return mn().memoizedState}function Lr(n,o,s,d){var p=xn();xe.flags|=n,p.memoizedState=Vo(1|o,s,void 0,d===void 0?null:d)}function Ur(n,o,s,d){var p=mn();d=d===void 0?null:d;var g=void 0;if(Ue!==null){var E=Ue.memoizedState;if(g=E.destroy,d!==null&&Ps(d,E.deps)){p.memoizedState=Vo(o,s,g,d);return}}xe.flags|=n,p.memoizedState=Vo(1|o,s,g,d)}function xa(n,o){return Lr(8390656,8,n,o)}function ks(n,o){return Ur(2048,8,n,o)}function Ma(n,o){return Ur(4,2,n,o)}function ka(n,o){return Ur(4,4,n,o)}function Da(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function La(n,o,s){return s=s!=null?s.concat([n]):null,Ur(4,4,Da.bind(null,o,n),s)}function Ds(){}function Ua(n,o){var s=mn();o=o===void 0?null:o;var d=s.memoizedState;return d!==null&&o!==null&&Ps(o,d[1])?d[0]:(s.memoizedState=[n,o],n)}function Fa(n,o){var s=mn();o=o===void 0?null:o;var d=s.memoizedState;return d!==null&&o!==null&&Ps(o,d[1])?d[0]:(n=n(),s.memoizedState=[n,o],n)}function Va(n,o,s){return(vt&21)===0?(n.baseState&&(n.baseState=!1,en=!0),n.memoizedState=s):(_n(s,o)||(s=pu(),xe.lanes|=s,Et|=s,n.baseState=!0),o)}function Em(n,o){var s=ye;ye=s!==0&&4>s?s:4,n(!0);var d=As.transition;As.transition={};try{n(!1),o()}finally{ye=s,As.transition=d}}function Ga(){return mn().memoizedState}function _m(n,o,s){var d=rt(n);if(s={lane:d,action:s,hasEagerState:!1,eagerState:null,next:null},qa(n))Ha(o,s);else if(s=ga(n,o,s,d),s!==null){var p=Xe();wn(s,n,d,p),Ba(s,o,d)}}function Tm(n,o,s){var d=rt(n),p={lane:d,action:s,hasEagerState:!1,eagerState:null,next:null};if(qa(n))Ha(o,p);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=o.lastRenderedReducer,g!==null))try{var E=o.lastRenderedState,C=g(E,s);if(p.hasEagerState=!0,p.eagerState=C,_n(C,E)){var S=o.interleaved;S===null?(p.next=p,_s(o)):(p.next=S.next,S.next=p),o.interleaved=p;return}}catch{}finally{}s=ga(n,o,p,d),s!==null&&(p=Xe(),wn(s,n,d,p),Ba(s,o,d))}}function qa(n){var o=n.alternate;return n===xe||o!==null&&o===xe}function Ha(n,o){Lo=Dr=!0;var s=n.pending;s===null?o.next=o:(o.next=s.next,s.next=o),n.pending=o}function Ba(n,o,s){if((s&4194240)!==0){var d=o.lanes;d&=n.pendingLanes,s|=d,o.lanes=s,Ui(n,s)}}var Fr={readContext:pn,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},Cm={readContext:pn,useCallback:function(n,o){return xn().memoizedState=[n,o===void 0?null:o],n},useContext:pn,useEffect:xa,useImperativeHandle:function(n,o,s){return s=s!=null?s.concat([n]):null,Lr(4194308,4,Da.bind(null,o,n),s)},useLayoutEffect:function(n,o){return Lr(4194308,4,n,o)},useInsertionEffect:function(n,o){return Lr(4,2,n,o)},useMemo:function(n,o){var s=xn();return o=o===void 0?null:o,n=n(),s.memoizedState=[n,o],n},useReducer:function(n,o,s){var d=xn();return o=s!==void 0?s(o):o,d.memoizedState=d.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},d.queue=n,n=n.dispatch=_m.bind(null,xe,n),[d.memoizedState,n]},useRef:function(n){var o=xn();return n={current:n},o.memoizedState=n},useState:Ra,useDebugValue:Ds,useDeferredValue:function(n){return xn().memoizedState=n},useTransition:function(){var n=Ra(!1),o=n[0];return n=Em.bind(null,n[1]),xn().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,s){var d=xe,p=xn();if(Re){if(s===void 0)throw Error(r(407));s=s()}else{if(s=o(),qe===null)throw Error(r(349));(vt&30)!==0||Sa(d,o,s)}p.memoizedState=s;var g={value:s,getSnapshot:o};return p.queue=g,xa(wa.bind(null,d,g,n),[n]),d.flags|=2048,Vo(9,Ia.bind(null,d,g,s,o),void 0,null),s},useId:function(){var n=xn(),o=qe.identifierPrefix;if(Re){var s=Un,d=Ln;s=(d&~(1<<32-En(d)-1)).toString(32)+s,o=":"+o+"R"+s,s=Uo++,0<s&&(o+="H"+s.toString(32)),o+=":"}else s=vm++,o=":"+o+"r"+s.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},Sm={readContext:pn,useCallback:Ua,useContext:pn,useEffect:ks,useImperativeHandle:La,useInsertionEffect:Ma,useLayoutEffect:ka,useMemo:Fa,useReducer:xs,useRef:Na,useState:function(){return xs(Fo)},useDebugValue:Ds,useDeferredValue:function(n){var o=mn();return Va(o,Ue.memoizedState,n)},useTransition:function(){var n=xs(Fo)[0],o=mn().memoizedState;return[n,o]},useMutableSource:Ta,useSyncExternalStore:Ca,useId:Ga,unstable_isNewReconciler:!1},Im={readContext:pn,useCallback:Ua,useContext:pn,useEffect:ks,useImperativeHandle:La,useInsertionEffect:Ma,useLayoutEffect:ka,useMemo:Fa,useReducer:Ms,useRef:Na,useState:function(){return Ms(Fo)},useDebugValue:Ds,useDeferredValue:function(n){var o=mn();return Ue===null?o.memoizedState=n:Va(o,Ue.memoizedState,n)},useTransition:function(){var n=Ms(Fo)[0],o=mn().memoizedState;return[n,o]},useMutableSource:Ta,useSyncExternalStore:Ca,useId:Ga,unstable_isNewReconciler:!1};function Cn(n,o){if(n&&n.defaultProps){o=K({},o),n=n.defaultProps;for(var s in n)o[s]===void 0&&(o[s]=n[s]);return o}return o}function Ls(n,o,s,d){o=n.memoizedState,s=s(d,o),s=s==null?o:K({},o,s),n.memoizedState=s,n.lanes===0&&(n.updateQueue.baseState=s)}var Vr={isMounted:function(n){return(n=n._reactInternals)?ft(n)===n:!1},enqueueSetState:function(n,o,s){n=n._reactInternals;var d=Xe(),p=rt(n),g=Vn(d,p);g.payload=o,s!=null&&(g.callback=s),o=et(n,g,p),o!==null&&(wn(o,n,p,d),Nr(o,n,p))},enqueueReplaceState:function(n,o,s){n=n._reactInternals;var d=Xe(),p=rt(n),g=Vn(d,p);g.tag=1,g.payload=o,s!=null&&(g.callback=s),o=et(n,g,p),o!==null&&(wn(o,n,p,d),Nr(o,n,p))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var s=Xe(),d=rt(n),p=Vn(s,d);p.tag=2,o!=null&&(p.callback=o),o=et(n,p,d),o!==null&&(wn(o,n,d,s),Nr(o,n,d))}};function za(n,o,s,d,p,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,g,E):o.prototype&&o.prototype.isPureReactComponent?!So(s,d)||!So(p,g):!0}function Ja(n,o,s){var d=!1,p=Zn,g=o.contextType;return typeof g=="object"&&g!==null?g=pn(g):(p=je(o)?pt:$e.current,d=o.contextTypes,g=(d=d!=null)?Vt(n,p):Zn),o=new o(s,g),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Vr,n.stateNode=o,o._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=g),o}function $a(n,o,s,d){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(s,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(s,d),o.state!==n&&Vr.enqueueReplaceState(o,o.state,null)}function Us(n,o,s,d){var p=n.stateNode;p.props=s,p.state=n.memoizedState,p.refs={},Ts(n);var g=o.contextType;typeof g=="object"&&g!==null?p.context=pn(g):(g=je(o)?pt:$e.current,p.context=Vt(n,g)),p.state=n.memoizedState,g=o.getDerivedStateFromProps,typeof g=="function"&&(Ls(n,o,g,s),p.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Vr.enqueueReplaceState(p,p.state,null),xr(n,s,p,d),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function Wt(n,o){try{var s="",d=o;do s+=ce(d),d=d.return;while(d);var p=s}catch(g){p=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:o,stack:p,digest:null}}function Fs(n,o,s){return{value:n,source:null,stack:s??null,digest:o??null}}function Vs(n,o){try{console.error(o.value)}catch(s){setTimeout(function(){throw s})}}var wm=typeof WeakMap=="function"?WeakMap:Map;function Wa(n,o,s){s=Vn(-1,s),s.tag=3,s.payload={element:null};var d=o.value;return s.callback=function(){$r||($r=!0,bs=d),Vs(n,o)},s}function Ya(n,o,s){s=Vn(-1,s),s.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var p=o.value;s.payload=function(){return d(p)},s.callback=function(){Vs(n,o)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){Vs(n,o),typeof d!="function"&&(tt===null?tt=new Set([this]):tt.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),s}function Ka(n,o,s){var d=n.pingCache;if(d===null){d=n.pingCache=new wm;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(s)||(p.add(s),n=qm.bind(null,n,o,s),o.then(n,n))}function Oa(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function Qa(n,o,s,d,p){return(n.mode&1)===0?(n===o?n.flags|=65536:(n.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(o=Vn(-1,1),o.tag=2,et(s,o,1))),s.lanes|=1),n):(n.flags|=65536,n.lanes=p,n)}var Am=W.ReactCurrentOwner,en=!1;function Qe(n,o,s,d){o.child=n===null?ha(o,null,s,d):Bt(o,n.child,s,d)}function Xa(n,o,s,d,p){s=s.render;var g=o.ref;return Jt(o,p),d=Rs(n,o,s,d,g,p),s=Ns(),n!==null&&!en?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~p,Gn(n,o,p)):(Re&&s&&fs(o),o.flags|=1,Qe(n,o,d,p),o.child)}function Za(n,o,s,d,p){if(n===null){var g=s.type;return typeof g=="function"&&!il(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(o.tag=15,o.type=g,ba(n,o,g,d,p)):(n=Xr(s.type,null,d,o,o.mode,p),n.ref=o.ref,n.return=o,o.child=n)}if(g=n.child,(n.lanes&p)===0){var E=g.memoizedProps;if(s=s.compare,s=s!==null?s:So,s(E,d)&&n.ref===o.ref)return Gn(n,o,p)}return o.flags|=1,n=st(g,d),n.ref=o.ref,n.return=o,o.child=n}function ba(n,o,s,d,p){if(n!==null){var g=n.memoizedProps;if(So(g,d)&&n.ref===o.ref)if(en=!1,o.pendingProps=d=g,(n.lanes&p)!==0)(n.flags&131072)!==0&&(en=!0);else return o.lanes=n.lanes,Gn(n,o,p)}return Gs(n,o,s,d,p)}function ja(n,o,s){var d=o.pendingProps,p=d.children,g=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Kt,dn),dn|=s;else{if((s&1073741824)===0)return n=g!==null?g.baseLanes|s:s,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,Te(Kt,dn),dn|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:s,Te(Kt,dn),dn|=d}else g!==null?(d=g.baseLanes|s,o.memoizedState=null):d=s,Te(Kt,dn),dn|=d;return Qe(n,o,p,s),o.child}function ed(n,o){var s=o.ref;(n===null&&s!==null||n!==null&&n.ref!==s)&&(o.flags|=512,o.flags|=2097152)}function Gs(n,o,s,d,p){var g=je(s)?pt:$e.current;return g=Vt(o,g),Jt(o,p),s=Rs(n,o,s,d,g,p),d=Ns(),n!==null&&!en?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~p,Gn(n,o,p)):(Re&&d&&fs(o),o.flags|=1,Qe(n,o,s,p),o.child)}function nd(n,o,s,d,p){if(je(s)){var g=!0;Tr(o)}else g=!1;if(Jt(o,p),o.stateNode===null)qr(n,o),Ja(o,s,d),Us(o,s,d,p),d=!0;else if(n===null){var E=o.stateNode,C=o.memoizedProps;E.props=C;var S=E.context,N=s.contextType;typeof N=="object"&&N!==null?N=pn(N):(N=je(s)?pt:$e.current,N=Vt(o,N));var U=s.getDerivedStateFromProps,V=typeof U=="function"||typeof E.getSnapshotBeforeUpdate=="function";V||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==d||S!==N)&&$a(o,E,d,N),jn=!1;var M=o.memoizedState;E.state=M,xr(o,d,E,p),S=o.memoizedState,C!==d||M!==S||be.current||jn?(typeof U=="function"&&(Ls(o,s,U,d),S=o.memoizedState),(C=jn||za(o,s,C,d,M,S,N))?(V||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=S),E.props=d,E.state=S,E.context=N,d=C):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{E=o.stateNode,ya(n,o),C=o.memoizedProps,N=o.type===o.elementType?C:Cn(o.type,C),E.props=N,V=o.pendingProps,M=E.context,S=s.contextType,typeof S=="object"&&S!==null?S=pn(S):(S=je(s)?pt:$e.current,S=Vt(o,S));var $=s.getDerivedStateFromProps;(U=typeof $=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==V||M!==S)&&$a(o,E,d,S),jn=!1,M=o.memoizedState,E.state=M,xr(o,d,E,p);var O=o.memoizedState;C!==V||M!==O||be.current||jn?(typeof $=="function"&&(Ls(o,s,$,d),O=o.memoizedState),(N=jn||za(o,s,N,d,M,O,S)||!1)?(U||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,O,S),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,O,S)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===n.memoizedProps&&M===n.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&M===n.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=O),E.props=d,E.state=O,E.context=S,d=N):(typeof E.componentDidUpdate!="function"||C===n.memoizedProps&&M===n.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&M===n.memoizedState||(o.flags|=1024),d=!1)}return qs(n,o,s,d,g,p)}function qs(n,o,s,d,p,g){ed(n,o);var E=(o.flags&128)!==0;if(!d&&!E)return p&&sa(o,s,!1),Gn(n,o,g);d=o.stateNode,Am.current=o;var C=E&&typeof s.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,n!==null&&E?(o.child=Bt(o,n.child,null,g),o.child=Bt(o,null,C,g)):Qe(n,o,C,g),o.memoizedState=d.state,p&&sa(o,s,!0),o.child}function td(n){var o=n.stateNode;o.pendingContext?ra(n,o.pendingContext,o.pendingContext!==o.context):o.context&&ra(n,o.context,!1),Cs(n,o.containerInfo)}function od(n,o,s,d,p){return Ht(),hs(p),o.flags|=256,Qe(n,o,s,d),o.child}var Hs={dehydrated:null,treeContext:null,retryLane:0};function Bs(n){return{baseLanes:n,cachePool:null,transitions:null}}function rd(n,o,s){var d=o.pendingProps,p=Ne.current,g=!1,E=(o.flags&128)!==0,C;if((C=E)||(C=n!==null&&n.memoizedState===null?!1:(p&2)!==0),C?(g=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),Te(Ne,p&1),n===null)return ms(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((o.mode&1)===0?o.lanes=1:n.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(E=d.children,n=d.fallback,g?(d=o.mode,g=o.child,E={mode:"hidden",children:E},(d&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=E):g=Zr(E,d,0,null),n=St(n,d,s,null),g.return=o,n.return=o,g.sibling=n,o.child=g,o.child.memoizedState=Bs(s),o.memoizedState=Hs,n):zs(o,E));if(p=n.memoizedState,p!==null&&(C=p.dehydrated,C!==null))return Pm(n,o,E,d,C,p,s);if(g){g=d.fallback,E=o.mode,p=n.child,C=p.sibling;var S={mode:"hidden",children:d.children};return(E&1)===0&&o.child!==p?(d=o.child,d.childLanes=0,d.pendingProps=S,o.deletions=null):(d=st(p,S),d.subtreeFlags=p.subtreeFlags&14680064),C!==null?g=st(C,g):(g=St(g,E,s,null),g.flags|=2),g.return=o,d.return=o,d.sibling=g,o.child=d,d=g,g=o.child,E=n.child.memoizedState,E=E===null?Bs(s):{baseLanes:E.baseLanes|s,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=n.childLanes&~s,o.memoizedState=Hs,d}return g=n.child,n=g.sibling,d=st(g,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=s),d.return=o,d.sibling=null,n!==null&&(s=o.deletions,s===null?(o.deletions=[n],o.flags|=16):s.push(n)),o.child=d,o.memoizedState=null,d}function zs(n,o){return o=Zr({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function Gr(n,o,s,d){return d!==null&&hs(d),Bt(o,n.child,null,s),n=zs(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function Pm(n,o,s,d,p,g,E){if(s)return o.flags&256?(o.flags&=-257,d=Fs(Error(r(422))),Gr(n,o,E,d)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(g=d.fallback,p=o.mode,d=Zr({mode:"visible",children:d.children},p,0,null),g=St(g,p,E,null),g.flags|=2,d.return=o,g.return=o,d.sibling=g,o.child=d,(o.mode&1)!==0&&Bt(o,n.child,null,E),o.child.memoizedState=Bs(E),o.memoizedState=Hs,g);if((o.mode&1)===0)return Gr(n,o,E,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var C=d.dgst;return d=C,g=Error(r(419)),d=Fs(g,d,void 0),Gr(n,o,E,d)}if(C=(E&n.childLanes)!==0,en||C){if(d=qe,d!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|E))!==0?0:p,p!==0&&p!==g.retryLane&&(g.retryLane=p,Fn(n,p),wn(d,n,p,-1))}return rl(),d=Fs(Error(r(421))),Gr(n,o,E,d)}return p.data==="$?"?(o.flags|=128,o.child=n.child,o=Hm.bind(null,n),p._reactRetry=o,null):(n=g.treeContext,an=Qn(p.nextSibling),un=o,Re=!0,Tn=null,n!==null&&(fn[cn++]=Ln,fn[cn++]=Un,fn[cn++]=mt,Ln=n.id,Un=n.overflow,mt=o),o=zs(o,d.children),o.flags|=4096,o)}function id(n,o,s){n.lanes|=o;var d=n.alternate;d!==null&&(d.lanes|=o),Es(n.return,o,s)}function Js(n,o,s,d,p){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:s,tailMode:p}:(g.isBackwards=o,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=s,g.tailMode=p)}function sd(n,o,s){var d=o.pendingProps,p=d.revealOrder,g=d.tail;if(Qe(n,o,d.children,s),d=Ne.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&id(n,s,o);else if(n.tag===19)id(n,s,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Te(Ne,d),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(s=o.child,p=null;s!==null;)n=s.alternate,n!==null&&Mr(n)===null&&(p=s),s=s.sibling;s=p,s===null?(p=o.child,o.child=null):(p=s.sibling,s.sibling=null),Js(o,!1,p,s,g);break;case"backwards":for(s=null,p=o.child,o.child=null;p!==null;){if(n=p.alternate,n!==null&&Mr(n)===null){o.child=p;break}n=p.sibling,p.sibling=s,s=p,p=n}Js(o,!0,s,null,g);break;case"together":Js(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function qr(n,o){(o.mode&1)===0&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function Gn(n,o,s){if(n!==null&&(o.dependencies=n.dependencies),Et|=o.lanes,(s&o.childLanes)===0)return null;if(n!==null&&o.child!==n.child)throw Error(r(153));if(o.child!==null){for(n=o.child,s=st(n,n.pendingProps),o.child=s,s.return=o;n.sibling!==null;)n=n.sibling,s=s.sibling=st(n,n.pendingProps),s.return=o;s.sibling=null}return o.child}function Rm(n,o,s){switch(o.tag){case 3:td(o),Ht();break;case 5:_a(o);break;case 1:je(o.type)&&Tr(o);break;case 4:Cs(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,p=o.memoizedProps.value;Te(Pr,d._currentValue),d._currentValue=p;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(Te(Ne,Ne.current&1),o.flags|=128,null):(s&o.child.childLanes)!==0?rd(n,o,s):(Te(Ne,Ne.current&1),n=Gn(n,o,s),n!==null?n.sibling:null);Te(Ne,Ne.current&1);break;case 19:if(d=(s&o.childLanes)!==0,(n.flags&128)!==0){if(d)return sd(n,o,s);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Te(Ne,Ne.current),d)break;return null;case 22:case 23:return o.lanes=0,ja(n,o,s)}return Gn(n,o,s)}var ld,$s,ud,ad;ld=function(n,o){for(var s=o.child;s!==null;){if(s.tag===5||s.tag===6)n.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},$s=function(){},ud=function(n,o,s,d){var p=n.memoizedProps;if(p!==d){n=o.stateNode,yt(Nn.current);var g=null;switch(s){case"input":p=Ei(n,p),d=Ei(n,d),g=[];break;case"select":p=K({},p,{value:void 0}),d=K({},d,{value:void 0}),g=[];break;case"textarea":p=Ci(n,p),d=Ci(n,d),g=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=vr)}Ii(s,d);var E;s=null;for(N in p)if(!d.hasOwnProperty(N)&&p.hasOwnProperty(N)&&p[N]!=null)if(N==="style"){var C=p[N];for(E in C)C.hasOwnProperty(E)&&(s||(s={}),s[E]="")}else N!=="dangerouslySetInnerHTML"&&N!=="children"&&N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(u.hasOwnProperty(N)?g||(g=[]):(g=g||[]).push(N,null));for(N in d){var S=d[N];if(C=p?.[N],d.hasOwnProperty(N)&&S!==C&&(S!=null||C!=null))if(N==="style")if(C){for(E in C)!C.hasOwnProperty(E)||S&&S.hasOwnProperty(E)||(s||(s={}),s[E]="");for(E in S)S.hasOwnProperty(E)&&C[E]!==S[E]&&(s||(s={}),s[E]=S[E])}else s||(g||(g=[]),g.push(N,s)),s=S;else N==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,C=C?C.__html:void 0,S!=null&&C!==S&&(g=g||[]).push(N,S)):N==="children"?typeof S!="string"&&typeof S!="number"||(g=g||[]).push(N,""+S):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&(u.hasOwnProperty(N)?(S!=null&&N==="onScroll"&&Ce("scroll",n),g||C===S||(g=[])):(g=g||[]).push(N,S))}s&&(g=g||[]).push("style",s);var N=g;(o.updateQueue=N)&&(o.flags|=4)}},ad=function(n,o,s,d){s!==d&&(o.flags|=4)};function Go(n,o){if(!Re)switch(n.tailMode){case"hidden":o=n.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?n.tail=null:s.sibling=null;break;case"collapsed":s=n.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Ye(n){var o=n.alternate!==null&&n.alternate.child===n.child,s=0,d=0;if(o)for(var p=n.child;p!==null;)s|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)s|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=d,n.childLanes=s,o}function Nm(n,o,s){var d=o.pendingProps;switch(cs(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(o),null;case 1:return je(o.type)&&_r(),Ye(o),null;case 3:return d=o.stateNode,$t(),Se(be),Se($e),ws(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(wr(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Tn!==null&&(nl(Tn),Tn=null))),$s(n,o),Ye(o),null;case 5:Ss(o);var p=yt(Do.current);if(s=o.type,n!==null&&o.stateNode!=null)ud(n,o,s,d,p),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(r(166));return Ye(o),null}if(n=yt(Nn.current),wr(o)){d=o.stateNode,s=o.type;var g=o.memoizedProps;switch(d[Rn]=o,d[Ro]=g,n=(o.mode&1)!==0,s){case"dialog":Ce("cancel",d),Ce("close",d);break;case"iframe":case"object":case"embed":Ce("load",d);break;case"video":case"audio":for(p=0;p<wo.length;p++)Ce(wo[p],d);break;case"source":Ce("error",d);break;case"img":case"image":case"link":Ce("error",d),Ce("load",d);break;case"details":Ce("toggle",d);break;case"input":Jl(d,g),Ce("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},Ce("invalid",d);break;case"textarea":Yl(d,g),Ce("invalid",d)}Ii(s,g),p=null;for(var E in g)if(g.hasOwnProperty(E)){var C=g[E];E==="children"?typeof C=="string"?d.textContent!==C&&(g.suppressHydrationWarning!==!0&&yr(d.textContent,C,n),p=["children",C]):typeof C=="number"&&d.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&yr(d.textContent,C,n),p=["children",""+C]):u.hasOwnProperty(E)&&C!=null&&E==="onScroll"&&Ce("scroll",d)}switch(s){case"input":Oo(d),Wl(d,g,!0);break;case"textarea":Oo(d),Ol(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=vr)}d=p,o.updateQueue=d,d!==null&&(o.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ql(s)),n==="http://www.w3.org/1999/xhtml"?s==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=E.createElement(s,{is:d.is}):(n=E.createElement(s),s==="select"&&(E=n,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):n=E.createElementNS(n,s),n[Rn]=o,n[Ro]=d,ld(n,o,!1,!1),o.stateNode=n;e:{switch(E=wi(s,d),s){case"dialog":Ce("cancel",n),Ce("close",n),p=d;break;case"iframe":case"object":case"embed":Ce("load",n),p=d;break;case"video":case"audio":for(p=0;p<wo.length;p++)Ce(wo[p],n);p=d;break;case"source":Ce("error",n),p=d;break;case"img":case"image":case"link":Ce("error",n),Ce("load",n),p=d;break;case"details":Ce("toggle",n),p=d;break;case"input":Jl(n,d),p=Ei(n,d),Ce("invalid",n);break;case"option":p=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},p=K({},d,{value:void 0}),Ce("invalid",n);break;case"textarea":Yl(n,d),p=Ci(n,d),Ce("invalid",n);break;default:p=d}Ii(s,p),C=p;for(g in C)if(C.hasOwnProperty(g)){var S=C[g];g==="style"?bl(n,S):g==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&Xl(n,S)):g==="children"?typeof S=="string"?(s!=="textarea"||S!=="")&&io(n,S):typeof S=="number"&&io(n,""+S):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(u.hasOwnProperty(g)?S!=null&&g==="onScroll"&&Ce("scroll",n):S!=null&&H(n,g,S,E))}switch(s){case"input":Oo(n),Wl(n,d,!1);break;case"textarea":Oo(n),Ol(n);break;case"option":d.value!=null&&n.setAttribute("value",""+ge(d.value));break;case"select":n.multiple=!!d.multiple,g=d.value,g!=null?wt(n,!!d.multiple,g,!1):d.defaultValue!=null&&wt(n,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=vr)}switch(s){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Ye(o),null;case 6:if(n&&o.stateNode!=null)ad(n,o,n.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(s=yt(Do.current),yt(Nn.current),wr(o)){if(d=o.stateNode,s=o.memoizedProps,d[Rn]=o,(g=d.nodeValue!==s)&&(n=un,n!==null))switch(n.tag){case 3:yr(d.nodeValue,s,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&yr(d.nodeValue,s,(n.mode&1)!==0)}g&&(o.flags|=4)}else d=(s.nodeType===9?s:s.ownerDocument).createTextNode(d),d[Rn]=o,o.stateNode=d}return Ye(o),null;case 13:if(Se(Ne),d=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Re&&an!==null&&(o.mode&1)!==0&&(o.flags&128)===0)ca(),Ht(),o.flags|=98560,g=!1;else if(g=wr(o),d!==null&&d.dehydrated!==null){if(n===null){if(!g)throw Error(r(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Rn]=o}else Ht(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ye(o),g=!1}else Tn!==null&&(nl(Tn),Tn=null),g=!0;if(!g)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=s,o):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(n===null||(Ne.current&1)!==0?Fe===0&&(Fe=3):rl())),o.updateQueue!==null&&(o.flags|=4),Ye(o),null);case 4:return $t(),$s(n,o),n===null&&Ao(o.stateNode.containerInfo),Ye(o),null;case 10:return vs(o.type._context),Ye(o),null;case 17:return je(o.type)&&_r(),Ye(o),null;case 19:if(Se(Ne),g=o.memoizedState,g===null)return Ye(o),null;if(d=(o.flags&128)!==0,E=g.rendering,E===null)if(d)Go(g,!1);else{if(Fe!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(E=Mr(n),E!==null){for(o.flags|=128,Go(g,!1),d=E.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=s,s=o.child;s!==null;)g=s,n=d,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,n=E.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),s=s.sibling;return Te(Ne,Ne.current&1|2),o.child}n=n.sibling}g.tail!==null&&ke()>Ot&&(o.flags|=128,d=!0,Go(g,!1),o.lanes=4194304)}else{if(!d)if(n=Mr(E),n!==null){if(o.flags|=128,d=!0,s=n.updateQueue,s!==null&&(o.updateQueue=s,o.flags|=4),Go(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Re)return Ye(o),null}else 2*ke()-g.renderingStartTime>Ot&&s!==1073741824&&(o.flags|=128,d=!0,Go(g,!1),o.lanes=4194304);g.isBackwards?(E.sibling=o.child,o.child=E):(s=g.last,s!==null?s.sibling=E:o.child=E,g.last=E)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=ke(),o.sibling=null,s=Ne.current,Te(Ne,d?s&1|2:s&1),o):(Ye(o),null);case 22:case 23:return ol(),d=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(dn&1073741824)!==0&&(Ye(o),o.subtreeFlags&6&&(o.flags|=8192)):Ye(o),null;case 24:return null;case 25:return null}throw Error(r(156,o.tag))}function xm(n,o){switch(cs(o),o.tag){case 1:return je(o.type)&&_r(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return $t(),Se(be),Se($e),ws(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 5:return Ss(o),null;case 13:if(Se(Ne),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Ht()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return Se(Ne),null;case 4:return $t(),null;case 10:return vs(o.type._context),null;case 22:case 23:return ol(),null;case 24:return null;default:return null}}var Hr=!1,Ke=!1,Mm=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Yt(n,o){var s=n.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(d){Me(n,o,d)}else s.current=null}function Ws(n,o,s){try{s()}catch(d){Me(n,o,d)}}var dd=!1;function km(n,o){if(os=sr,n=zu(),Qi(n)){if("selectionStart"in n)var s={start:n.selectionStart,end:n.selectionEnd};else e:{s=(s=n.ownerDocument)&&s.defaultView||window;var d=s.getSelection&&s.getSelection();if(d&&d.rangeCount!==0){s=d.anchorNode;var p=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var E=0,C=-1,S=-1,N=0,U=0,V=n,M=null;n:for(;;){for(var $;V!==s||p!==0&&V.nodeType!==3||(C=E+p),V!==g||d!==0&&V.nodeType!==3||(S=E+d),V.nodeType===3&&(E+=V.nodeValue.length),($=V.firstChild)!==null;)M=V,V=$;for(;;){if(V===n)break n;if(M===s&&++N===p&&(C=E),M===g&&++U===d&&(S=E),($=V.nextSibling)!==null)break;V=M,M=V.parentNode}V=$}s=C===-1||S===-1?null:{start:C,end:S}}else s=null}s=s||{start:0,end:0}}else s=null;for(rs={focusedElem:n,selectionRange:s},sr=!1,Y=o;Y!==null;)if(o=Y,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Y=n;else for(;Y!==null;){o=Y;try{var O=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var Q=O.memoizedProps,De=O.memoizedState,P=o.stateNode,I=P.getSnapshotBeforeUpdate(o.elementType===o.type?Q:Cn(o.type,Q),De);P.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var R=o.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(G){Me(o,o.return,G)}if(n=o.sibling,n!==null){n.return=o.return,Y=n;break}Y=o.return}return O=dd,dd=!1,O}function qo(n,o,s){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&n)===n){var g=p.destroy;p.destroy=void 0,g!==void 0&&Ws(o,s,g)}p=p.next}while(p!==d)}}function Br(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var s=o=o.next;do{if((s.tag&n)===n){var d=s.create;s.destroy=d()}s=s.next}while(s!==o)}}function Ys(n){var o=n.ref;if(o!==null){var s=n.stateNode;switch(n.tag){case 5:n=s;break;default:n=s}typeof o=="function"?o(n):o.current=n}}function fd(n){var o=n.alternate;o!==null&&(n.alternate=null,fd(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[Rn],delete o[Ro],delete o[us],delete o[mm],delete o[hm])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function cd(n){return n.tag===5||n.tag===3||n.tag===4}function pd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||cd(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ks(n,o,s){var d=n.tag;if(d===5||d===6)n=n.stateNode,o?s.nodeType===8?s.parentNode.insertBefore(n,o):s.insertBefore(n,o):(s.nodeType===8?(o=s.parentNode,o.insertBefore(n,s)):(o=s,o.appendChild(n)),s=s._reactRootContainer,s!=null||o.onclick!==null||(o.onclick=vr));else if(d!==4&&(n=n.child,n!==null))for(Ks(n,o,s),n=n.sibling;n!==null;)Ks(n,o,s),n=n.sibling}function Os(n,o,s){var d=n.tag;if(d===5||d===6)n=n.stateNode,o?s.insertBefore(n,o):s.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(Os(n,o,s),n=n.sibling;n!==null;)Os(n,o,s),n=n.sibling}var Be=null,Sn=!1;function nt(n,o,s){for(s=s.child;s!==null;)md(n,o,s),s=s.sibling}function md(n,o,s){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(er,s)}catch{}switch(s.tag){case 5:Ke||Yt(s,o);case 6:var d=Be,p=Sn;Be=null,nt(n,o,s),Be=d,Sn=p,Be!==null&&(Sn?(n=Be,s=s.stateNode,n.nodeType===8?n.parentNode.removeChild(s):n.removeChild(s)):Be.removeChild(s.stateNode));break;case 18:Be!==null&&(Sn?(n=Be,s=s.stateNode,n.nodeType===8?ls(n.parentNode,s):n.nodeType===1&&ls(n,s),yo(n)):ls(Be,s.stateNode));break;case 4:d=Be,p=Sn,Be=s.stateNode.containerInfo,Sn=!0,nt(n,o,s),Be=d,Sn=p;break;case 0:case 11:case 14:case 15:if(!Ke&&(d=s.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var g=p,E=g.destroy;g=g.tag,E!==void 0&&((g&2)!==0||(g&4)!==0)&&Ws(s,o,E),p=p.next}while(p!==d)}nt(n,o,s);break;case 1:if(!Ke&&(Yt(s,o),d=s.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=s.memoizedProps,d.state=s.memoizedState,d.componentWillUnmount()}catch(C){Me(s,o,C)}nt(n,o,s);break;case 21:nt(n,o,s);break;case 22:s.mode&1?(Ke=(d=Ke)||s.memoizedState!==null,nt(n,o,s),Ke=d):nt(n,o,s);break;default:nt(n,o,s)}}function hd(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var s=n.stateNode;s===null&&(s=n.stateNode=new Mm),o.forEach(function(d){var p=Bm.bind(null,n,d);s.has(d)||(s.add(d),d.then(p,p))})}}function In(n,o){var s=o.deletions;if(s!==null)for(var d=0;d<s.length;d++){var p=s[d];try{var g=n,E=o,C=E;e:for(;C!==null;){switch(C.tag){case 5:Be=C.stateNode,Sn=!1;break e;case 3:Be=C.stateNode.containerInfo,Sn=!0;break e;case 4:Be=C.stateNode.containerInfo,Sn=!0;break e}C=C.return}if(Be===null)throw Error(r(160));md(g,E,p),Be=null,Sn=!1;var S=p.alternate;S!==null&&(S.return=null),p.return=null}catch(N){Me(p,o,N)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)gd(o,n),o=o.sibling}function gd(n,o){var s=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(In(o,n),Mn(n),d&4){try{qo(3,n,n.return),Br(3,n)}catch(Q){Me(n,n.return,Q)}try{qo(5,n,n.return)}catch(Q){Me(n,n.return,Q)}}break;case 1:In(o,n),Mn(n),d&512&&s!==null&&Yt(s,s.return);break;case 5:if(In(o,n),Mn(n),d&512&&s!==null&&Yt(s,s.return),n.flags&32){var p=n.stateNode;try{io(p,"")}catch(Q){Me(n,n.return,Q)}}if(d&4&&(p=n.stateNode,p!=null)){var g=n.memoizedProps,E=s!==null?s.memoizedProps:g,C=n.type,S=n.updateQueue;if(n.updateQueue=null,S!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&$l(p,g),wi(C,E);var N=wi(C,g);for(E=0;E<S.length;E+=2){var U=S[E],V=S[E+1];U==="style"?bl(p,V):U==="dangerouslySetInnerHTML"?Xl(p,V):U==="children"?io(p,V):H(p,U,V,N)}switch(C){case"input":_i(p,g);break;case"textarea":Kl(p,g);break;case"select":var M=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!g.multiple;var $=g.value;$!=null?wt(p,!!g.multiple,$,!1):M!==!!g.multiple&&(g.defaultValue!=null?wt(p,!!g.multiple,g.defaultValue,!0):wt(p,!!g.multiple,g.multiple?[]:"",!1))}p[Ro]=g}catch(Q){Me(n,n.return,Q)}}break;case 6:if(In(o,n),Mn(n),d&4){if(n.stateNode===null)throw Error(r(162));p=n.stateNode,g=n.memoizedProps;try{p.nodeValue=g}catch(Q){Me(n,n.return,Q)}}break;case 3:if(In(o,n),Mn(n),d&4&&s!==null&&s.memoizedState.isDehydrated)try{yo(o.containerInfo)}catch(Q){Me(n,n.return,Q)}break;case 4:In(o,n),Mn(n);break;case 13:In(o,n),Mn(n),p=n.child,p.flags&8192&&(g=p.memoizedState!==null,p.stateNode.isHidden=g,!g||p.alternate!==null&&p.alternate.memoizedState!==null||(Zs=ke())),d&4&&hd(n);break;case 22:if(U=s!==null&&s.memoizedState!==null,n.mode&1?(Ke=(N=Ke)||U,In(o,n),Ke=N):In(o,n),Mn(n),d&8192){if(N=n.memoizedState!==null,(n.stateNode.isHidden=N)&&!U&&(n.mode&1)!==0)for(Y=n,U=n.child;U!==null;){for(V=Y=U;Y!==null;){switch(M=Y,$=M.child,M.tag){case 0:case 11:case 14:case 15:qo(4,M,M.return);break;case 1:Yt(M,M.return);var O=M.stateNode;if(typeof O.componentWillUnmount=="function"){d=M,s=M.return;try{o=d,O.props=o.memoizedProps,O.state=o.memoizedState,O.componentWillUnmount()}catch(Q){Me(d,s,Q)}}break;case 5:Yt(M,M.return);break;case 22:if(M.memoizedState!==null){Ed(V);continue}}$!==null?($.return=M,Y=$):Ed(V)}U=U.sibling}e:for(U=null,V=n;;){if(V.tag===5){if(U===null){U=V;try{p=V.stateNode,N?(g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=V.stateNode,S=V.memoizedProps.style,E=S!=null&&S.hasOwnProperty("display")?S.display:null,C.style.display=Zl("display",E))}catch(Q){Me(n,n.return,Q)}}}else if(V.tag===6){if(U===null)try{V.stateNode.nodeValue=N?"":V.memoizedProps}catch(Q){Me(n,n.return,Q)}}else if((V.tag!==22&&V.tag!==23||V.memoizedState===null||V===n)&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===n)break e;for(;V.sibling===null;){if(V.return===null||V.return===n)break e;U===V&&(U=null),V=V.return}U===V&&(U=null),V.sibling.return=V.return,V=V.sibling}}break;case 19:In(o,n),Mn(n),d&4&&hd(n);break;case 21:break;default:In(o,n),Mn(n)}}function Mn(n){var o=n.flags;if(o&2){try{e:{for(var s=n.return;s!==null;){if(cd(s)){var d=s;break e}s=s.return}throw Error(r(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(io(p,""),d.flags&=-33);var g=pd(n);Os(n,g,p);break;case 3:case 4:var E=d.stateNode.containerInfo,C=pd(n);Ks(n,C,E);break;default:throw Error(r(161))}}catch(S){Me(n,n.return,S)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function Dm(n,o,s){Y=n,yd(n)}function yd(n,o,s){for(var d=(n.mode&1)!==0;Y!==null;){var p=Y,g=p.child;if(p.tag===22&&d){var E=p.memoizedState!==null||Hr;if(!E){var C=p.alternate,S=C!==null&&C.memoizedState!==null||Ke;C=Hr;var N=Ke;if(Hr=E,(Ke=S)&&!N)for(Y=p;Y!==null;)E=Y,S=E.child,E.tag===22&&E.memoizedState!==null?_d(p):S!==null?(S.return=E,Y=S):_d(p);for(;g!==null;)Y=g,yd(g),g=g.sibling;Y=p,Hr=C,Ke=N}vd(n)}else(p.subtreeFlags&8772)!==0&&g!==null?(g.return=p,Y=g):vd(n)}}function vd(n){for(;Y!==null;){var o=Y;if((o.flags&8772)!==0){var s=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Ke||Br(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Ke)if(s===null)d.componentDidMount();else{var p=o.elementType===o.type?s.memoizedProps:Cn(o.type,s.memoizedProps);d.componentDidUpdate(p,s.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=o.updateQueue;g!==null&&Ea(o,g,d);break;case 3:var E=o.updateQueue;if(E!==null){if(s=null,o.child!==null)switch(o.child.tag){case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}Ea(o,E,s)}break;case 5:var C=o.stateNode;if(s===null&&o.flags&4){s=C;var S=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&s.focus();break;case"img":S.src&&(s.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var N=o.alternate;if(N!==null){var U=N.memoizedState;if(U!==null){var V=U.dehydrated;V!==null&&yo(V)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ke||o.flags&512&&Ys(o)}catch(M){Me(o,o.return,M)}}if(o===n){Y=null;break}if(s=o.sibling,s!==null){s.return=o.return,Y=s;break}Y=o.return}}function Ed(n){for(;Y!==null;){var o=Y;if(o===n){Y=null;break}var s=o.sibling;if(s!==null){s.return=o.return,Y=s;break}Y=o.return}}function _d(n){for(;Y!==null;){var o=Y;try{switch(o.tag){case 0:case 11:case 15:var s=o.return;try{Br(4,o)}catch(S){Me(o,s,S)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var p=o.return;try{d.componentDidMount()}catch(S){Me(o,p,S)}}var g=o.return;try{Ys(o)}catch(S){Me(o,g,S)}break;case 5:var E=o.return;try{Ys(o)}catch(S){Me(o,E,S)}}}catch(S){Me(o,o.return,S)}if(o===n){Y=null;break}var C=o.sibling;if(C!==null){C.return=o.return,Y=C;break}Y=o.return}}var Lm=Math.ceil,zr=W.ReactCurrentDispatcher,Qs=W.ReactCurrentOwner,hn=W.ReactCurrentBatchConfig,fe=0,qe=null,Le=null,ze=0,dn=0,Kt=Xn(0),Fe=0,Ho=null,Et=0,Jr=0,Xs=0,Bo=null,nn=null,Zs=0,Ot=1/0,qn=null,$r=!1,bs=null,tt=null,Wr=!1,ot=null,Yr=0,zo=0,js=null,Kr=-1,Or=0;function Xe(){return(fe&6)!==0?ke():Kr!==-1?Kr:Kr=ke()}function rt(n){return(n.mode&1)===0?1:(fe&2)!==0&&ze!==0?ze&-ze:ym.transition!==null?(Or===0&&(Or=pu()),Or):(n=ye,n!==0||(n=window.event,n=n===void 0?16:Cu(n.type)),n)}function wn(n,o,s,d){if(50<zo)throw zo=0,js=null,Error(r(185));co(n,s,d),((fe&2)===0||n!==qe)&&(n===qe&&((fe&2)===0&&(Jr|=s),Fe===4&&it(n,ze)),tn(n,d),s===1&&fe===0&&(o.mode&1)===0&&(Ot=ke()+500,Cr&&bn()))}function tn(n,o){var s=n.callbackNode;yp(n,o);var d=or(n,n===qe?ze:0);if(d===0)s!==null&&du(s),n.callbackNode=null,n.callbackPriority=0;else if(o=d&-d,n.callbackPriority!==o){if(s!=null&&du(s),o===1)n.tag===0?gm(Cd.bind(null,n)):la(Cd.bind(null,n)),cm(function(){(fe&6)===0&&bn()}),s=null;else{switch(mu(d)){case 1:s=ki;break;case 4:s=fu;break;case 16:s=jo;break;case 536870912:s=cu;break;default:s=jo}s=xd(s,Td.bind(null,n))}n.callbackPriority=o,n.callbackNode=s}}function Td(n,o){if(Kr=-1,Or=0,(fe&6)!==0)throw Error(r(327));var s=n.callbackNode;if(Qt()&&n.callbackNode!==s)return null;var d=or(n,n===qe?ze:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||o)o=Qr(n,d);else{o=d;var p=fe;fe|=2;var g=Id();(qe!==n||ze!==o)&&(qn=null,Ot=ke()+500,Tt(n,o));do try{Vm();break}catch(C){Sd(n,C)}while(!0);ys(),zr.current=g,fe=p,Le!==null?o=0:(qe=null,ze=0,o=Fe)}if(o!==0){if(o===2&&(p=Di(n),p!==0&&(d=p,o=el(n,p))),o===1)throw s=Ho,Tt(n,0),it(n,d),tn(n,ke()),s;if(o===6)it(n,d);else{if(p=n.current.alternate,(d&30)===0&&!Um(p)&&(o=Qr(n,d),o===2&&(g=Di(n),g!==0&&(d=g,o=el(n,g))),o===1))throw s=Ho,Tt(n,0),it(n,d),tn(n,ke()),s;switch(n.finishedWork=p,n.finishedLanes=d,o){case 0:case 1:throw Error(r(345));case 2:Ct(n,nn,qn);break;case 3:if(it(n,d),(d&130023424)===d&&(o=Zs+500-ke(),10<o)){if(or(n,0)!==0)break;if(p=n.suspendedLanes,(p&d)!==d){Xe(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=ss(Ct.bind(null,n,nn,qn),o);break}Ct(n,nn,qn);break;case 4:if(it(n,d),(d&4194240)===d)break;for(o=n.eventTimes,p=-1;0<d;){var E=31-En(d);g=1<<E,E=o[E],E>p&&(p=E),d&=~g}if(d=p,d=ke()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Lm(d/1960))-d,10<d){n.timeoutHandle=ss(Ct.bind(null,n,nn,qn),d);break}Ct(n,nn,qn);break;case 5:Ct(n,nn,qn);break;default:throw Error(r(329))}}}return tn(n,ke()),n.callbackNode===s?Td.bind(null,n):null}function el(n,o){var s=Bo;return n.current.memoizedState.isDehydrated&&(Tt(n,o).flags|=256),n=Qr(n,o),n!==2&&(o=nn,nn=s,o!==null&&nl(o)),n}function nl(n){nn===null?nn=n:nn.push.apply(nn,n)}function Um(n){for(var o=n;;){if(o.flags&16384){var s=o.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var d=0;d<s.length;d++){var p=s[d],g=p.getSnapshot;p=p.value;try{if(!_n(g(),p))return!1}catch{return!1}}}if(s=o.child,o.subtreeFlags&16384&&s!==null)s.return=o,o=s;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function it(n,o){for(o&=~Xs,o&=~Jr,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var s=31-En(o),d=1<<s;n[s]=-1,o&=~d}}function Cd(n){if((fe&6)!==0)throw Error(r(327));Qt();var o=or(n,0);if((o&1)===0)return tn(n,ke()),null;var s=Qr(n,o);if(n.tag!==0&&s===2){var d=Di(n);d!==0&&(o=d,s=el(n,d))}if(s===1)throw s=Ho,Tt(n,0),it(n,o),tn(n,ke()),s;if(s===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,Ct(n,nn,qn),tn(n,ke()),null}function tl(n,o){var s=fe;fe|=1;try{return n(o)}finally{fe=s,fe===0&&(Ot=ke()+500,Cr&&bn())}}function _t(n){ot!==null&&ot.tag===0&&(fe&6)===0&&Qt();var o=fe;fe|=1;var s=hn.transition,d=ye;try{if(hn.transition=null,ye=1,n)return n()}finally{ye=d,hn.transition=s,fe=o,(fe&6)===0&&bn()}}function ol(){dn=Kt.current,Se(Kt)}function Tt(n,o){n.finishedWork=null,n.finishedLanes=0;var s=n.timeoutHandle;if(s!==-1&&(n.timeoutHandle=-1,fm(s)),Le!==null)for(s=Le.return;s!==null;){var d=s;switch(cs(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&_r();break;case 3:$t(),Se(be),Se($e),ws();break;case 5:Ss(d);break;case 4:$t();break;case 13:Se(Ne);break;case 19:Se(Ne);break;case 10:vs(d.type._context);break;case 22:case 23:ol()}s=s.return}if(qe=n,Le=n=st(n.current,null),ze=dn=o,Fe=0,Ho=null,Xs=Jr=Et=0,nn=Bo=null,gt!==null){for(o=0;o<gt.length;o++)if(s=gt[o],d=s.interleaved,d!==null){s.interleaved=null;var p=d.next,g=s.pending;if(g!==null){var E=g.next;g.next=p,d.next=E}s.pending=d}gt=null}return n}function Sd(n,o){do{var s=Le;try{if(ys(),kr.current=Fr,Dr){for(var d=xe.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Dr=!1}if(vt=0,Ge=Ue=xe=null,Lo=!1,Uo=0,Qs.current=null,s===null||s.return===null){Fe=1,Ho=o,Le=null;break}e:{var g=n,E=s.return,C=s,S=o;if(o=ze,C.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var N=S,U=C,V=U.tag;if((U.mode&1)===0&&(V===0||V===11||V===15)){var M=U.alternate;M?(U.updateQueue=M.updateQueue,U.memoizedState=M.memoizedState,U.lanes=M.lanes):(U.updateQueue=null,U.memoizedState=null)}var $=Oa(E);if($!==null){$.flags&=-257,Qa($,E,C,g,o),$.mode&1&&Ka(g,N,o),o=$,S=N;var O=o.updateQueue;if(O===null){var Q=new Set;Q.add(S),o.updateQueue=Q}else O.add(S);break e}else{if((o&1)===0){Ka(g,N,o),rl();break e}S=Error(r(426))}}else if(Re&&C.mode&1){var De=Oa(E);if(De!==null){(De.flags&65536)===0&&(De.flags|=256),Qa(De,E,C,g,o),hs(Wt(S,C));break e}}g=S=Wt(S,C),Fe!==4&&(Fe=2),Bo===null?Bo=[g]:Bo.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,o&=-o,g.lanes|=o;var P=Wa(g,S,o);va(g,P);break e;case 1:C=S;var I=g.type,R=g.stateNode;if((g.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(tt===null||!tt.has(R)))){g.flags|=65536,o&=-o,g.lanes|=o;var G=Ya(g,C,o);va(g,G);break e}}g=g.return}while(g!==null)}Ad(s)}catch(X){o=X,Le===s&&s!==null&&(Le=s=s.return);continue}break}while(!0)}function Id(){var n=zr.current;return zr.current=Fr,n===null?Fr:n}function rl(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),qe===null||(Et&268435455)===0&&(Jr&268435455)===0||it(qe,ze)}function Qr(n,o){var s=fe;fe|=2;var d=Id();(qe!==n||ze!==o)&&(qn=null,Tt(n,o));do try{Fm();break}catch(p){Sd(n,p)}while(!0);if(ys(),fe=s,zr.current=d,Le!==null)throw Error(r(261));return qe=null,ze=0,Fe}function Fm(){for(;Le!==null;)wd(Le)}function Vm(){for(;Le!==null&&!up();)wd(Le)}function wd(n){var o=Nd(n.alternate,n,dn);n.memoizedProps=n.pendingProps,o===null?Ad(n):Le=o,Qs.current=null}function Ad(n){var o=n;do{var s=o.alternate;if(n=o.return,(o.flags&32768)===0){if(s=Nm(s,o,dn),s!==null){Le=s;return}}else{if(s=xm(s,o),s!==null){s.flags&=32767,Le=s;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Fe=6,Le=null;return}}if(o=o.sibling,o!==null){Le=o;return}Le=o=n}while(o!==null);Fe===0&&(Fe=5)}function Ct(n,o,s){var d=ye,p=hn.transition;try{hn.transition=null,ye=1,Gm(n,o,s,d)}finally{hn.transition=p,ye=d}return null}function Gm(n,o,s,d){do Qt();while(ot!==null);if((fe&6)!==0)throw Error(r(327));s=n.finishedWork;var p=n.finishedLanes;if(s===null)return null;if(n.finishedWork=null,n.finishedLanes=0,s===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var g=s.lanes|s.childLanes;if(vp(n,g),n===qe&&(Le=qe=null,ze=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Wr||(Wr=!0,xd(jo,function(){return Qt(),null})),g=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||g){g=hn.transition,hn.transition=null;var E=ye;ye=1;var C=fe;fe|=4,Qs.current=null,km(n,s),gd(s,n),rm(rs),sr=!!os,rs=os=null,n.current=s,Dm(s),ap(),fe=C,ye=E,hn.transition=g}else n.current=s;if(Wr&&(Wr=!1,ot=n,Yr=p),g=n.pendingLanes,g===0&&(tt=null),cp(s.stateNode),tn(n,ke()),o!==null)for(d=n.onRecoverableError,s=0;s<o.length;s++)p=o[s],d(p.value,{componentStack:p.stack,digest:p.digest});if($r)throw $r=!1,n=bs,bs=null,n;return(Yr&1)!==0&&n.tag!==0&&Qt(),g=n.pendingLanes,(g&1)!==0?n===js?zo++:(zo=0,js=n):zo=0,bn(),null}function Qt(){if(ot!==null){var n=mu(Yr),o=hn.transition,s=ye;try{if(hn.transition=null,ye=16>n?16:n,ot===null)var d=!1;else{if(n=ot,ot=null,Yr=0,(fe&6)!==0)throw Error(r(331));var p=fe;for(fe|=4,Y=n.current;Y!==null;){var g=Y,E=g.child;if((Y.flags&16)!==0){var C=g.deletions;if(C!==null){for(var S=0;S<C.length;S++){var N=C[S];for(Y=N;Y!==null;){var U=Y;switch(U.tag){case 0:case 11:case 15:qo(8,U,g)}var V=U.child;if(V!==null)V.return=U,Y=V;else for(;Y!==null;){U=Y;var M=U.sibling,$=U.return;if(fd(U),U===N){Y=null;break}if(M!==null){M.return=$,Y=M;break}Y=$}}}var O=g.alternate;if(O!==null){var Q=O.child;if(Q!==null){O.child=null;do{var De=Q.sibling;Q.sibling=null,Q=De}while(Q!==null)}}Y=g}}if((g.subtreeFlags&2064)!==0&&E!==null)E.return=g,Y=E;else e:for(;Y!==null;){if(g=Y,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:qo(9,g,g.return)}var P=g.sibling;if(P!==null){P.return=g.return,Y=P;break e}Y=g.return}}var I=n.current;for(Y=I;Y!==null;){E=Y;var R=E.child;if((E.subtreeFlags&2064)!==0&&R!==null)R.return=E,Y=R;else e:for(E=I;Y!==null;){if(C=Y,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Br(9,C)}}catch(X){Me(C,C.return,X)}if(C===E){Y=null;break e}var G=C.sibling;if(G!==null){G.return=C.return,Y=G;break e}Y=C.return}}if(fe=p,bn(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(er,n)}catch{}d=!0}return d}finally{ye=s,hn.transition=o}}return!1}function Pd(n,o,s){o=Wt(s,o),o=Wa(n,o,1),n=et(n,o,1),o=Xe(),n!==null&&(co(n,1,o),tn(n,o))}function Me(n,o,s){if(n.tag===3)Pd(n,n,s);else for(;o!==null;){if(o.tag===3){Pd(o,n,s);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(tt===null||!tt.has(d))){n=Wt(s,n),n=Ya(o,n,1),o=et(o,n,1),n=Xe(),o!==null&&(co(o,1,n),tn(o,n));break}}o=o.return}}function qm(n,o,s){var d=n.pingCache;d!==null&&d.delete(o),o=Xe(),n.pingedLanes|=n.suspendedLanes&s,qe===n&&(ze&s)===s&&(Fe===4||Fe===3&&(ze&130023424)===ze&&500>ke()-Zs?Tt(n,0):Xs|=s),tn(n,o)}function Rd(n,o){o===0&&((n.mode&1)===0?o=1:(o=tr,tr<<=1,(tr&130023424)===0&&(tr=4194304)));var s=Xe();n=Fn(n,o),n!==null&&(co(n,o,s),tn(n,s))}function Hm(n){var o=n.memoizedState,s=0;o!==null&&(s=o.retryLane),Rd(n,s)}function Bm(n,o){var s=0;switch(n.tag){case 13:var d=n.stateNode,p=n.memoizedState;p!==null&&(s=p.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(r(314))}d!==null&&d.delete(o),Rd(n,s)}var Nd;Nd=function(n,o,s){if(n!==null)if(n.memoizedProps!==o.pendingProps||be.current)en=!0;else{if((n.lanes&s)===0&&(o.flags&128)===0)return en=!1,Rm(n,o,s);en=(n.flags&131072)!==0}else en=!1,Re&&(o.flags&1048576)!==0&&ua(o,Ir,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;qr(n,o),n=o.pendingProps;var p=Vt(o,$e.current);Jt(o,s),p=Rs(null,o,d,n,p,s);var g=Ns();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,je(d)?(g=!0,Tr(o)):g=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Ts(o),p.updater=Vr,o.stateNode=p,p._reactInternals=o,Us(o,d,n,s),o=qs(null,o,d,!0,g,s)):(o.tag=0,Re&&g&&fs(o),Qe(null,o,p,s),o=o.child),o;case 16:d=o.elementType;e:{switch(qr(n,o),n=o.pendingProps,p=d._init,d=p(d._payload),o.type=d,p=o.tag=Jm(d),n=Cn(d,n),p){case 0:o=Gs(null,o,d,n,s);break e;case 1:o=nd(null,o,d,n,s);break e;case 11:o=Xa(null,o,d,n,s);break e;case 14:o=Za(null,o,d,Cn(d.type,n),s);break e}throw Error(r(306,d,""))}return o;case 0:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Cn(d,p),Gs(n,o,d,p,s);case 1:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Cn(d,p),nd(n,o,d,p,s);case 3:e:{if(td(o),n===null)throw Error(r(387));d=o.pendingProps,g=o.memoizedState,p=g.element,ya(n,o),xr(o,d,null,s);var E=o.memoizedState;if(d=E.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=g,o.memoizedState=g,o.flags&256){p=Wt(Error(r(423)),o),o=od(n,o,d,s,p);break e}else if(d!==p){p=Wt(Error(r(424)),o),o=od(n,o,d,s,p);break e}else for(an=Qn(o.stateNode.containerInfo.firstChild),un=o,Re=!0,Tn=null,s=ha(o,null,d,s),o.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ht(),d===p){o=Gn(n,o,s);break e}Qe(n,o,d,s)}o=o.child}return o;case 5:return _a(o),n===null&&ms(o),d=o.type,p=o.pendingProps,g=n!==null?n.memoizedProps:null,E=p.children,is(d,p)?E=null:g!==null&&is(d,g)&&(o.flags|=32),ed(n,o),Qe(n,o,E,s),o.child;case 6:return n===null&&ms(o),null;case 13:return rd(n,o,s);case 4:return Cs(o,o.stateNode.containerInfo),d=o.pendingProps,n===null?o.child=Bt(o,null,d,s):Qe(n,o,d,s),o.child;case 11:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Cn(d,p),Xa(n,o,d,p,s);case 7:return Qe(n,o,o.pendingProps,s),o.child;case 8:return Qe(n,o,o.pendingProps.children,s),o.child;case 12:return Qe(n,o,o.pendingProps.children,s),o.child;case 10:e:{if(d=o.type._context,p=o.pendingProps,g=o.memoizedProps,E=p.value,Te(Pr,d._currentValue),d._currentValue=E,g!==null)if(_n(g.value,E)){if(g.children===p.children&&!be.current){o=Gn(n,o,s);break e}}else for(g=o.child,g!==null&&(g.return=o);g!==null;){var C=g.dependencies;if(C!==null){E=g.child;for(var S=C.firstContext;S!==null;){if(S.context===d){if(g.tag===1){S=Vn(-1,s&-s),S.tag=2;var N=g.updateQueue;if(N!==null){N=N.shared;var U=N.pending;U===null?S.next=S:(S.next=U.next,U.next=S),N.pending=S}}g.lanes|=s,S=g.alternate,S!==null&&(S.lanes|=s),Es(g.return,s,o),C.lanes|=s;break}S=S.next}}else if(g.tag===10)E=g.type===o.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(r(341));E.lanes|=s,C=E.alternate,C!==null&&(C.lanes|=s),Es(E,s,o),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===o){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}Qe(n,o,p.children,s),o=o.child}return o;case 9:return p=o.type,d=o.pendingProps.children,Jt(o,s),p=pn(p),d=d(p),o.flags|=1,Qe(n,o,d,s),o.child;case 14:return d=o.type,p=Cn(d,o.pendingProps),p=Cn(d.type,p),Za(n,o,d,p,s);case 15:return ba(n,o,o.type,o.pendingProps,s);case 17:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:Cn(d,p),qr(n,o),o.tag=1,je(d)?(n=!0,Tr(o)):n=!1,Jt(o,s),Ja(o,d,p),Us(o,d,p,s),qs(null,o,d,!0,n,s);case 19:return sd(n,o,s);case 22:return ja(n,o,s)}throw Error(r(156,o.tag))};function xd(n,o){return au(n,o)}function zm(n,o,s,d){this.tag=n,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(n,o,s,d){return new zm(n,o,s,d)}function il(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Jm(n){if(typeof n=="function")return il(n)?1:0;if(n!=null){if(n=n.$$typeof,n===de)return 11;if(n===rn)return 14}return 2}function st(n,o){var s=n.alternate;return s===null?(s=gn(n.tag,o,n.key,n.mode),s.elementType=n.elementType,s.type=n.type,s.stateNode=n.stateNode,s.alternate=n,n.alternate=s):(s.pendingProps=o,s.type=n.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=n.flags&14680064,s.childLanes=n.childLanes,s.lanes=n.lanes,s.child=n.child,s.memoizedProps=n.memoizedProps,s.memoizedState=n.memoizedState,s.updateQueue=n.updateQueue,o=n.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},s.sibling=n.sibling,s.index=n.index,s.ref=n.ref,s}function Xr(n,o,s,d,p,g){var E=2;if(d=n,typeof n=="function")il(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case j:return St(s.children,p,g,o);case se:E=8,p|=8;break;case ee:return n=gn(12,s,o,p|2),n.elementType=ee,n.lanes=g,n;case we:return n=gn(13,s,o,p),n.elementType=we,n.lanes=g,n;case Ze:return n=gn(19,s,o,p),n.elementType=Ze,n.lanes=g,n;case Ee:return Zr(s,p,g,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ie:E=10;break e;case ve:E=9;break e;case de:E=11;break e;case rn:E=14;break e;case Ae:E=16,d=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return o=gn(E,s,o,p),o.elementType=n,o.type=d,o.lanes=g,o}function St(n,o,s,d){return n=gn(7,n,d,o),n.lanes=s,n}function Zr(n,o,s,d){return n=gn(22,n,d,o),n.elementType=Ee,n.lanes=s,n.stateNode={isHidden:!1},n}function sl(n,o,s){return n=gn(6,n,null,o),n.lanes=s,n}function ll(n,o,s){return o=gn(4,n.children!==null?n.children:[],n.key,o),o.lanes=s,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function $m(n,o,s,d,p){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Li(0),this.expirationTimes=Li(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Li(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function ul(n,o,s,d,p,g,E,C,S){return n=new $m(n,o,s,C,S),o===1?(o=1,g===!0&&(o|=8)):o=0,g=gn(3,null,null,o),n.current=g,g.stateNode=n,g.memoizedState={element:d,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ts(g),n}function Wm(n,o,s){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:b,key:d==null?null:""+d,children:n,containerInfo:o,implementation:s}}function Md(n){if(!n)return Zn;n=n._reactInternals;e:{if(ft(n)!==n||n.tag!==1)throw Error(r(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(je(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(r(171))}if(n.tag===1){var s=n.type;if(je(s))return ia(n,s,o)}return o}function kd(n,o,s,d,p,g,E,C,S){return n=ul(s,d,!0,n,p,g,E,C,S),n.context=Md(null),s=n.current,d=Xe(),p=rt(s),g=Vn(d,p),g.callback=o??null,et(s,g,p),n.current.lanes=p,co(n,p,d),tn(n,d),n}function br(n,o,s,d){var p=o.current,g=Xe(),E=rt(p);return s=Md(s),o.context===null?o.context=s:o.pendingContext=s,o=Vn(g,E),o.payload={element:n},d=d===void 0?null:d,d!==null&&(o.callback=d),n=et(p,o,E),n!==null&&(wn(n,p,E,g),Nr(n,p,E)),E}function jr(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Dd(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var s=n.retryLane;n.retryLane=s!==0&&s<o?s:o}}function al(n,o){Dd(n,o),(n=n.alternate)&&Dd(n,o)}function Ym(){return null}var Ld=typeof reportError=="function"?reportError:function(n){console.error(n)};function dl(n){this._internalRoot=n}ei.prototype.render=dl.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(r(409));br(n,o,null,null)},ei.prototype.unmount=dl.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;_t(function(){br(null,n,null,null)}),o[kn]=null}};function ei(n){this._internalRoot=n}ei.prototype.unstable_scheduleHydration=function(n){if(n){var o=yu();n={blockedOn:null,target:n,priority:o};for(var s=0;s<Yn.length&&o!==0&&o<Yn[s].priority;s++);Yn.splice(s,0,n),s===0&&_u(n)}};function fl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ni(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ud(){}function Km(n,o,s,d,p){if(p){if(typeof d=="function"){var g=d;d=function(){var N=jr(E);g.call(N)}}var E=kd(o,d,n,0,null,!1,!1,"",Ud);return n._reactRootContainer=E,n[kn]=E.current,Ao(n.nodeType===8?n.parentNode:n),_t(),E}for(;p=n.lastChild;)n.removeChild(p);if(typeof d=="function"){var C=d;d=function(){var N=jr(S);C.call(N)}}var S=ul(n,0,!1,null,null,!1,!1,"",Ud);return n._reactRootContainer=S,n[kn]=S.current,Ao(n.nodeType===8?n.parentNode:n),_t(function(){br(o,S,s,d)}),S}function ti(n,o,s,d,p){var g=s._reactRootContainer;if(g){var E=g;if(typeof p=="function"){var C=p;p=function(){var S=jr(E);C.call(S)}}br(o,E,n,p)}else E=Km(s,o,n,p,d);return jr(E)}hu=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var s=fo(o.pendingLanes);s!==0&&(Ui(o,s|1),tn(o,ke()),(fe&6)===0&&(Ot=ke()+500,bn()))}break;case 13:_t(function(){var d=Fn(n,1);if(d!==null){var p=Xe();wn(d,n,1,p)}}),al(n,1)}},Fi=function(n){if(n.tag===13){var o=Fn(n,134217728);if(o!==null){var s=Xe();wn(o,n,134217728,s)}al(n,134217728)}},gu=function(n){if(n.tag===13){var o=rt(n),s=Fn(n,o);if(s!==null){var d=Xe();wn(s,n,o,d)}al(n,o)}},yu=function(){return ye},vu=function(n,o){var s=ye;try{return ye=n,o()}finally{ye=s}},Ri=function(n,o,s){switch(o){case"input":if(_i(n,s),o=s.name,s.type==="radio"&&o!=null){for(s=n;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<s.length;o++){var d=s[o];if(d!==n&&d.form===n.form){var p=Er(d);if(!p)throw Error(r(90));zl(d),_i(d,p)}}}break;case"textarea":Kl(n,s);break;case"select":o=s.value,o!=null&&wt(n,!!s.multiple,o,!1)}},tu=tl,ou=_t;var Om={usingClientEntryPoint:!1,Events:[No,Ut,Er,eu,nu,tl]},Jo={findFiberByHostInstance:ct,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qm={bundleType:Jo.bundleType,version:Jo.version,rendererPackageName:Jo.rendererPackageName,rendererConfig:Jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=lu(n),n===null?null:n.stateNode},findFiberByHostInstance:Jo.findFiberByHostInstance||Ym,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oi.isDisabled&&oi.supportsFiber)try{er=oi.inject(Qm),Pn=oi}catch{}}return on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Om,on.createPortal=function(n,o){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fl(o))throw Error(r(200));return Wm(n,o,null,s)},on.createRoot=function(n,o){if(!fl(n))throw Error(r(299));var s=!1,d="",p=Ld;return o!=null&&(o.unstable_strictMode===!0&&(s=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=ul(n,1,!1,null,null,s,!1,d,p),n[kn]=o.current,Ao(n.nodeType===8?n.parentNode:n),new dl(o)},on.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=lu(o),n=n===null?null:n.stateNode,n},on.flushSync=function(n){return _t(n)},on.hydrate=function(n,o,s){if(!ni(o))throw Error(r(200));return ti(null,n,o,!0,s)},on.hydrateRoot=function(n,o,s){if(!fl(n))throw Error(r(405));var d=s!=null&&s.hydratedSources||null,p=!1,g="",E=Ld;if(s!=null&&(s.unstable_strictMode===!0&&(p=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),o=kd(o,null,n,1,s??null,p,!1,g,E),n[kn]=o.current,Ao(n),d)for(n=0;n<d.length;n++)s=d[n],p=s._getVersion,p=p(s._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[s,p]:o.mutableSourceEagerHydrationData.push(s,p);return new ei(o)},on.render=function(n,o,s){if(!ni(o))throw Error(r(200));return ti(null,n,o,!1,s)},on.unmountComponentAtNode=function(n){if(!ni(n))throw Error(r(40));return n._reactRootContainer?(_t(function(){ti(null,null,n,!1,function(){n._reactRootContainer=null,n[kn]=null})}),!0):!1},on.unstable_batchedUpdates=tl,on.unstable_renderSubtreeIntoContainer=function(n,o,s,d){if(!ni(s))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return ti(n,o,s,!1,d)},on.version="18.3.1-next-f1338f8080-20240426",on}var Jd;function rh(){if(Jd)return ml.exports;Jd=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ml.exports=oh(),ml.exports}var $d;function ih(){if($d)return ri;$d=1;var t=rh();return ri.createRoot=t.createRoot,ri.hydrateRoot=t.hydrateRoot,ri}var sh=ih();const lh=Tc(sh);let ii;const uh=new Uint8Array(16);function ah(){if(!ii&&(ii=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ii))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ii(uh)}const Je=[];for(let t=0;t<256;++t)Je.push((t+256).toString(16).slice(1));function dh(t,e=0){return Je[t[e+0]]+Je[t[e+1]]+Je[t[e+2]]+Je[t[e+3]]+"-"+Je[t[e+4]]+Je[t[e+5]]+"-"+Je[t[e+6]]+Je[t[e+7]]+"-"+Je[t[e+8]]+Je[t[e+9]]+"-"+Je[t[e+10]]+Je[t[e+11]]+Je[t[e+12]]+Je[t[e+13]]+Je[t[e+14]]+Je[t[e+15]]}const fh=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Wd={randomUUID:fh};function ut(t,e,r){if(Wd.randomUUID&&!t)return Wd.randomUUID();t=t||{};const i=t.random||(t.rng||ah)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,dh(i)}var ch={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ph=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),vn=(t,e)=>{const r=Ve.forwardRef(({color:i="currentColor",size:u=24,strokeWidth:f=2,absoluteStrokeWidth:c,className:m="",children:y,...h},v)=>Ve.createElement("svg",{ref:v,...ch,width:u,height:u,stroke:i,strokeWidth:c?Number(f)*24/Number(u):f,className:["lucide",`lucide-${ph(t)}`,m].join(" "),...h},[...e.map(([_,T])=>Ve.createElement(_,T)),...Array.isArray(y)?y:[y]]));return r.displayName=`${t}`,r};const mh=vn("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);const hh=vn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const gh=vn("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const Cc=vn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Yd=vn("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const li=vn("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);const yh=vn("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const vh=vn("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const Eh=vn("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const _h=vn("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);const Th=vn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Ch=vn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Sh=({files:t,activeFileId:e,onUpload:r,onDeleteFile:i})=>{const u=Ve.useRef(null),[f,c]=Ve.useState(!1),m=t.find(y=>y.id===e);return F.jsxs("div",{className:"w-full h-full flex flex-col bg-slate-50 relative border-l border-gray-200",children:[F.jsx("div",{className:"h-16 border-b border-gray-200 bg-white flex items-center justify-between px-6 shrink-0",children:m?F.jsxs("div",{className:"flex items-center gap-3 text-sm text-emerald-800 bg-emerald-50 px-4 py-2.5 rounded-lg border border-emerald-100 w-full justify-between shadow-sm",children:[F.jsxs("div",{className:"flex items-center gap-3 truncate",children:[m.status==="ready"?F.jsx(hh,{size:18,className:"text-emerald-500 fill-emerald-100"}):F.jsx(yh,{size:18,className:"animate-spin text-emerald-600"}),F.jsx("span",{className:"font-semibold truncate text-emerald-900",children:m.name})]}),F.jsxs("div",{className:"flex items-center gap-3",children:[m.status==="ready"?F.jsx("span",{className:"text-xs font-bold text-emerald-600 bg-white px-2 py-1 rounded shadow-sm",children:"Ready"}):F.jsx("span",{className:"text-xs font-bold text-emerald-600",children:m.status==="uploading"?"Saving...":`${m.progress}%`}),F.jsx("button",{onClick:()=>i(m.id),className:"text-emerald-400 hover:text-red-500 hover:bg-white p-1 rounded transition-colors",children:F.jsx(Th,{size:16})})]})]}):F.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[F.jsx(Cc,{size:16}),F.jsx("span",{className:"text-sm font-medium",children:"No document active"})]})}),F.jsx("div",{className:"flex-1 relative bg-slate-100 overflow-hidden flex flex-col items-center justify-center p-6",children:m&&m.fileUrl?F.jsx("div",{className:"w-full h-full bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden relative",children:F.jsx("object",{data:m.fileUrl,type:"application/pdf",className:"w-full h-full block",children:F.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400 gap-4",children:[F.jsx(Yd,{size:64,className:"text-slate-300"}),F.jsx("p",{className:"font-medium",children:"Preview requires a dedicated PDF viewer."}),F.jsxs("a",{href:m.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:underline flex items-center gap-2",children:["Open PDF in new tab ",F.jsx(gh,{size:16})]})]})})}):F.jsxs("div",{className:`
                    w-full h-full border-2 border-dashed rounded-xl flex flex-col items-center justify-center transition-all cursor-pointer group
                    ${f?"bg-emerald-50 border-emerald-400":"bg-white border-slate-300 hover:border-emerald-300 hover:bg-emerald-50/30"}
                `,onClick:()=>u.current?.click(),onDragOver:y=>{y.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:y=>{y.preventDefault(),c(!1),y.dataTransfer.files.length&&r(y.dataTransfer.files)},children:[F.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mb-6 group-hover:bg-emerald-100 transition-colors",children:F.jsx(Yd,{size:40,className:"text-slate-400 group-hover:text-emerald-500 transition-colors"})}),F.jsx("p",{className:"text-slate-700 font-bold text-lg mb-2",children:"Drag & Drop PDF here"}),F.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"or click to browse files"}),F.jsx("button",{className:"bg-slate-900 text-white px-6 py-2.5 rounded-lg text-sm font-medium shadow hover:bg-slate-800 transition-all",children:"Select File"}),F.jsx("input",{type:"file",ref:u,onChange:y=>y.target.files?.length&&r(y.target.files),accept:".pdf",className:"hidden"})]})})]})},Sc=({size:t="md"})=>{const e={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20"},r={sm:16,md:20,lg:40};return F.jsxs("div",{className:`relative flex items-center justify-center bg-gradient-to-br from-emerald-400 to-green-600 rounded-xl shadow-lg shadow-emerald-100 ${e[t]}`,children:[F.jsx(mh,{size:r[t],className:"text-white relative z-10",strokeWidth:2.5}),F.jsx(li,{size:r[t]*.6,className:"absolute -bottom-1 -right-1 text-emerald-100 z-20 fill-emerald-100"})]})},Ih=({messages:t,isLoading:e,onSendMessage:r})=>{const[i,u]=Ve.useState(""),f=Ve.useRef(null);Ve.useEffect(()=>{f.current?.scrollIntoView({behavior:"smooth"})},[t,e]);const c=m=>{m?.preventDefault(),!(!i.trim()||e)&&(r(i),u(""))};return F.jsxs("div",{className:"flex-1 w-full h-full flex flex-col bg-white border-r border-gray-100 shadow-sm relative z-10",children:[F.jsxs("div",{className:"h-16 border-b border-gray-100 flex items-center justify-between px-6 bg-white shrink-0",children:[F.jsxs("div",{className:"flex items-center gap-3",children:[F.jsx(Sc,{size:"sm"}),F.jsx("h1",{className:"font-bold text-slate-800 text-lg tracking-tight",children:"GreenDoc"})]}),F.jsxs("div",{className:"flex items-center gap-2",children:[F.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),F.jsx("span",{className:"text-xs font-medium text-emerald-600 uppercase tracking-wider",children:"Online"})]})]}),F.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 bg-white pb-6",children:t.length===0?F.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center px-4 animate-fade-in",children:[F.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-2xl flex items-center justify-center mb-6",children:F.jsx(li,{size:32,className:"text-emerald-600"})}),F.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Welcome to GreenDoc"}),F.jsx("p",{className:"text-slate-500 max-w-xs mb-8",children:"Upload your PDF to the right panel and I'll analyze it instantly."}),F.jsx("div",{className:"grid grid-cols-1 w-full gap-3 max-w-xs",children:["Summarize document","Key takeaways","Explain the main concept"].map((m,y)=>F.jsx("button",{onClick:()=>r(m),className:"text-sm py-3 px-4 bg-white border border-gray-200 rounded-xl text-slate-600 hover:border-emerald-400 hover:bg-emerald-50/50 hover:text-emerald-700 transition-all text-left shadow-sm hover:shadow-md",children:m},y))})]}):F.jsxs("div",{className:"space-y-6",children:[t.map(m=>F.jsxs("div",{className:`flex gap-4 animate-slide-up ${m.role==="user"?"flex-row-reverse":""}`,children:[F.jsx("div",{className:`
                            w-8 h-8 rounded-full flex items-center justify-center shrink-0 shadow-sm
                            ${m.role==="user"?"bg-slate-900 text-white":"bg-white border border-gray-200 text-emerald-600"}
                        `,children:m.role==="user"?F.jsx(Ch,{size:14}):F.jsx(li,{size:14})}),F.jsxs("div",{className:`flex flex-col max-w-[85%] ${m.role==="user"?"items-end":"items-start"}`,children:[F.jsx("div",{className:`
                                py-3.5 px-5 rounded-2xl text-[15px] leading-relaxed shadow-sm
                                ${m.role==="user"?"bg-slate-900 text-white rounded-tr-sm":"bg-white border border-gray-100 text-slate-700 rounded-tl-sm shadow-md"}
                            `,children:F.jsx("div",{dangerouslySetInnerHTML:{__html:m.content.replace(/\n/g,"<br/>").replace(/\*\*(.*?)\*\*/g,"<b>$1</b>")}})}),F.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1",children:new Date(m.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},m.id)),e&&F.jsxs("div",{className:"flex gap-4 animate-fade-in",children:[F.jsx("div",{className:"w-8 h-8 rounded-full bg-white border border-gray-200 flex items-center justify-center text-emerald-600 shadow-sm",children:F.jsx(li,{size:14})}),F.jsxs("div",{className:"bg-white border border-gray-100 py-4 px-5 rounded-2xl rounded-tl-sm shadow-md flex items-center gap-1.5",children:[F.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-400 rounded-full animate-bounce"}),F.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-400 rounded-full animate-bounce delay-75"}),F.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-400 rounded-full animate-bounce delay-150"})]})]}),F.jsx("div",{ref:f})]})}),F.jsxs("div",{className:"p-6 bg-white",children:[F.jsxs("form",{onSubmit:c,className:"flex items-center gap-2 p-2 rounded-2xl border border-gray-200 bg-white shadow-sm focus-within:border-emerald-400 focus-within:ring-4 focus-within:ring-emerald-50 transition-all",children:[F.jsx("input",{value:i,onChange:m=>u(m.target.value),placeholder:"Ask GreenDoc...",className:"flex-1 py-3 px-4 bg-transparent border-none focus:ring-0 text-base text-slate-800 placeholder:text-slate-400",disabled:e}),F.jsx("button",{type:"submit",disabled:e||!i.trim(),className:`
                    p-3 rounded-xl flex items-center justify-center transition-all
                    ${e||!i.trim()?"text-gray-300 bg-gray-50":"bg-slate-900 text-white hover:bg-slate-800 shadow-md hover:shadow-lg active:scale-95"}
                `,children:e?F.jsx(_h,{size:20}):F.jsx(Eh,{size:20})})]}),F.jsx("p",{className:"text-center text-xs text-gray-400 mt-3",children:"AI can make mistakes. Please verify important information."})]})]})},wh=({onComplete:t})=>{const[e,r]=Ve.useState(!0),[i,u]=Ve.useState(!1);return Ve.useEffect(()=>{const f=setTimeout(()=>{u(!0)},2e3),c=setTimeout(()=>{r(!1),t()},2500);return()=>{clearTimeout(f),clearTimeout(c)}},[t]),e?F.jsx("div",{className:`fixed inset-0 z-[100] bg-white flex flex-col items-center justify-center transition-opacity duration-500 ${i?"opacity-0":"opacity-100"}`,children:F.jsxs("div",{className:"animate-slide-up flex flex-col items-center",children:[F.jsx("div",{className:"animate-bounce mb-8",children:F.jsx(Sc,{size:"lg"})}),F.jsx("h1",{className:"text-4xl font-bold text-slate-900 tracking-tighter mb-3",children:"GreenDoc"}),F.jsx("p",{className:"text-emerald-600 font-semibold tracking-wide text-sm uppercase",children:"Intelligent Document Assistant"}),F.jsxs("div",{className:"mt-12 flex gap-2",children:[F.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500 animate-pulse"}),F.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500 animate-pulse delay-75"}),F.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500 animate-pulse delay-150"})]})]})}):null},Ah=()=>{const t=window.pdfjsLib;return t||console.warn("PDF.js lib not found on window, retrying..."),t},Ph=async(t,e)=>{const r=Ah();if(!r)throw new Error("PDF.js library failed to load. Please refresh the page.");try{const i=await t.arrayBuffer();if(!i||i.byteLength===0)throw new Error("The file is empty or corrupted (0 bytes).");const u=new Uint8Array(i.slice(0)),c=await r.getDocument({data:u,cMapUrl:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/cmaps/",cMapPacked:!0,standardFontDataUrl:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/standard_fonts/",disableFontFace:!0,rangeChunkSize:65536,isEvalSupported:!1}).promise,m=c.numPages;if(m===0)throw new Error("PDF seems to have no pages.");const y=[],h=20;for(let _=1;_<=m;_+=h){const T=[],w=Math.min(_+h-1,m);for(let x=_;x<=w;x++)T.push(c.getPage(x).then(async D=>{try{return(await D.getTextContent({disableCombineTextItems:!1,includeMarkedContent:!1})).items.map(H=>H.str).join(" ")}catch(B){return console.warn(`Warning: Could not parse page ${x}, skipping.`,B),""}finally{D.cleanup()}}).catch(D=>(console.warn(`Error accessing page ${x}:`,D),"")));const k=await Promise.all(T);y.push(...k),e&&e(w,m)}const v=y.join(" ");if(!v.replace(/\s/g,"").length)throw new Error("No text found. This PDF might be a scanned image.");return v}catch(i){throw console.error("PDF Parsing Error:",i),i.name==="InvalidPDFException"?new Error("Invalid PDF structure. The file might be corrupted, password protected, or relies on missing system fonts."):i}},Rh=(t,e=4500,r=200)=>{const i=t.replace(/\s+/g," ").trim();if(!i)return[];const u=[];let f=0;for(;f<i.length;){const c=Math.min(f+e,i.length);u.push(i.slice(f,c)),f+=e-r}return u};let Nh,xh;function Mh(){return{geminiUrl:Nh,vertexUrl:xh}}function kh(t,e,r,i){var u,f;if(!t?.baseUrl){const c=Mh();return e?(u=c.vertexUrl)!==null&&u!==void 0?u:r:(f=c.geminiUrl)!==null&&f!==void 0?f:i}return t.baseUrl}class Bn{}function z(t,e){const r=/\{([^}]+)\}/g;return t.replace(r,(i,u)=>{if(Object.prototype.hasOwnProperty.call(e,u)){const f=e[u];return f!=null?String(f):""}else throw new Error(`Key '${u}' not found in valueMap.`)})}function a(t,e,r){for(let f=0;f<e.length-1;f++){const c=e[f];if(c.endsWith("[]")){const m=c.slice(0,-2);if(!(m in t))if(Array.isArray(r))t[m]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[m])){const y=t[m];if(Array.isArray(r))for(let h=0;h<y.length;h++){const v=y[h];a(v,e.slice(f+1),r[h])}else for(const h of y)a(h,e.slice(f+1),r)}return}else if(c.endsWith("[0]")){const m=c.slice(0,-3);m in t||(t[m]=[{}]);const y=t[m];a(y[0],e.slice(f+1),r);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const i=e[e.length-1],u=t[i];if(u!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===u)return;if(typeof u=="object"&&typeof r=="object"&&u!==null&&r!==null)Object.assign(u,r);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof r=="object"&&r!==null&&!Array.isArray(r)?Object.assign(t,r):t[i]=r}function l(t,e,r=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return r;const u=e[i];if(u.endsWith("[]")){const f=u.slice(0,-2);if(f in t){const c=t[f];return Array.isArray(c)?c.map(m=>l(m,e.slice(i+1),r)):r}else return r}else t=t[u]}return t}catch(i){if(i instanceof TypeError)return r;throw i}}function Dh(t,e){for(const[r,i]of Object.entries(e)){const u=r.split("."),f=i.split("."),c=new Set;let m=-1;for(let y=0;y<u.length;y++)if(u[y]==="*"){m=y;break}if(m!==-1&&f.length>m)for(let y=m;y<f.length;y++){const h=f[y];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&c.add(h)}Tl(t,u,f,0,c)}}function Tl(t,e,r,i,u){if(i>=e.length||typeof t!="object"||t===null)return;const f=e[i];if(f.endsWith("[]")){const c=f.slice(0,-2),m=t;if(c in m&&Array.isArray(m[c]))for(const y of m[c])Tl(y,e,r,i+1,u)}else if(f==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,m=Object.keys(c).filter(h=>!h.startsWith("_")&&!u.has(h)),y={};for(const h of m)y[h]=c[h];for(const[h,v]of Object.entries(y)){const _=[];for(const T of r.slice(i))T==="*"?_.push(h):_.push(T);a(c,_,v)}for(const h of m)delete c[h]}}else{const c=t;f in c&&Tl(c[f],e,r,i+1,u)}}function Ml(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Lh(t){const e={},r=l(t,["operationName"]);r!=null&&a(e,["operationName"],r);const i=l(t,["resourceName"]);return i!=null&&a(e,["_url","resourceName"],i),e}function Uh(t){const e={},r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["metadata"]);i!=null&&a(e,["metadata"],i);const u=l(t,["done"]);u!=null&&a(e,["done"],u);const f=l(t,["error"]);f!=null&&a(e,["error"],f);const c=l(t,["response","generateVideoResponse"]);return c!=null&&a(e,["response"],Vh(c)),e}function Fh(t){const e={},r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["metadata"]);i!=null&&a(e,["metadata"],i);const u=l(t,["done"]);u!=null&&a(e,["done"],u);const f=l(t,["error"]);f!=null&&a(e,["error"],f);const c=l(t,["response"]);return c!=null&&a(e,["response"],Gh(c)),e}function Vh(t){const e={},r=l(t,["generatedSamples"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(c=>qh(c))),a(e,["generatedVideos"],f)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&a(e,["raiMediaFilteredCount"],i);const u=l(t,["raiMediaFilteredReasons"]);return u!=null&&a(e,["raiMediaFilteredReasons"],u),e}function Gh(t){const e={},r=l(t,["videos"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(c=>Hh(c))),a(e,["generatedVideos"],f)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&a(e,["raiMediaFilteredCount"],i);const u=l(t,["raiMediaFilteredReasons"]);return u!=null&&a(e,["raiMediaFilteredReasons"],u),e}function qh(t){const e={},r=l(t,["video"]);return r!=null&&a(e,["video"],Yh(r)),e}function Hh(t){const e={},r=l(t,["_self"]);return r!=null&&a(e,["video"],Kh(r)),e}function Bh(t){const e={},r=l(t,["operationName"]);return r!=null&&a(e,["_url","operationName"],r),e}function zh(t){const e={},r=l(t,["operationName"]);return r!=null&&a(e,["_url","operationName"],r),e}function Jh(t){const e={},r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["metadata"]);i!=null&&a(e,["metadata"],i);const u=l(t,["done"]);u!=null&&a(e,["done"],u);const f=l(t,["error"]);f!=null&&a(e,["error"],f);const c=l(t,["response"]);return c!=null&&a(e,["response"],$h(c)),e}function $h(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["parent"]);i!=null&&a(e,["parent"],i);const u=l(t,["documentName"]);return u!=null&&a(e,["documentName"],u),e}function Ic(t){const e={},r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["metadata"]);i!=null&&a(e,["metadata"],i);const u=l(t,["done"]);u!=null&&a(e,["done"],u);const f=l(t,["error"]);f!=null&&a(e,["error"],f);const c=l(t,["response"]);return c!=null&&a(e,["response"],Wh(c)),e}function Wh(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["parent"]);i!=null&&a(e,["parent"],i);const u=l(t,["documentName"]);return u!=null&&a(e,["documentName"],u),e}function Yh(t){const e={},r=l(t,["uri"]);r!=null&&a(e,["uri"],r);const i=l(t,["encodedVideo"]);i!=null&&a(e,["videoBytes"],Ml(i));const u=l(t,["encoding"]);return u!=null&&a(e,["mimeType"],u),e}function Kh(t){const e={},r=l(t,["gcsUri"]);r!=null&&a(e,["uri"],r);const i=l(t,["bytesBase64Encoded"]);i!=null&&a(e,["videoBytes"],Ml(i));const u=l(t,["mimeType"]);return u!=null&&a(e,["mimeType"],u),e}var Kd;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Kd||(Kd={}));var Od;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Od||(Od={}));var Qd;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Qd||(Qd={}));var at;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(at||(at={}));var Xd;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Xd||(Xd={}));var Zd;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Zd||(Zd={}));var bd;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(bd||(bd={}));var jd;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(jd||(jd={}));var ef;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ef||(ef={}));var nf;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(nf||(nf={}));var tf;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(tf||(tf={}));var of;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(of||(of={}));var rf;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(rf||(rf={}));var sf;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(sf||(sf={}));var lf;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(lf||(lf={}));var uf;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(uf||(uf={}));var af;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(af||(af={}));var df;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(df||(df={}));var ff;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ff||(ff={}));var fi;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(fi||(fi={}));var cf;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(cf||(cf={}));var pf;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(pf||(pf={}));var mf;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(mf||(mf={}));var Cl;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Cl||(Cl={}));var hf;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(hf||(hf={}));var gf;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(gf||(gf={}));var yf;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(yf||(yf={}));var vf;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(vf||(vf={}));var Ef;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ef||(Ef={}));var _f;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(_f||(_f={}));var Tf;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Tf||(Tf={}));var Cf;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Cf||(Cf={}));var Sf;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Sf||(Sf={}));var If;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(If||(If={}));var wf;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(wf||(wf={}));var Af;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Af||(Af={}));var Pf;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Pf||(Pf={}));var Rf;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Rf||(Rf={}));var Nf;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Nf||(Nf={}));var xf;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(xf||(xf={}));var Mf;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Mf||(Mf={}));var kf;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(kf||(kf={}));var Df;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Df||(Df={}));var Lf;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Lf||(Lf={}));var Uf;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Uf||(Uf={}));var Ff;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Ff||(Ff={}));var Vf;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Vf||(Vf={}));var Gf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Gf||(Gf={}));var qf;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(qf||(qf={}));var Hf;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Hf||(Hf={}));var Bf;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Bf||(Bf={}));var zf;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(zf||(zf={}));var Jf;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Jf||(Jf={}));var $f;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})($f||($f={}));var Zt;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Zt||(Zt={}));class Sl{constructor(e){const r={};for(const i of e.headers.entries())r[i[0]]=i[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}}class Wo{get text(){var e,r,i,u,f,c,m,y;if(((u=(i=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||i===void 0?void 0:i.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const _=[];for(const T of(y=(m=(c=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)!==null&&y!==void 0?y:[]){for(const[w,k]of Object.entries(T))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(k!==null||k!==void 0)&&_.push(w);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,h+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,r,i,u,f,c,m,y;if(((u=(i=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||i===void 0?void 0:i.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const _ of(y=(m=(c=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)!==null&&y!==void 0?y:[]){for(const[T,w]of Object.entries(_))T!=="inlineData"&&(w!==null||w!==void 0)&&v.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(h+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,r,i,u,f,c,m,y;if(((u=(i=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||i===void 0?void 0:i.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(y=(m=(c=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if(h?.length!==0)return h}get executableCode(){var e,r,i,u,f,c,m,y,h;if(((u=(i=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||i===void 0?void 0:i.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(m=(c=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)===null||y===void 0?void 0:y.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if(v?.length!==0)return(h=v?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,r,i,u,f,c,m,y,h;if(((u=(i=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||i===void 0?void 0:i.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(m=(c=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||c===void 0?void 0:c.content)===null||m===void 0?void 0:m.parts)===null||y===void 0?void 0:y.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if(v?.length!==0)return(h=v?.[0])===null||h===void 0?void 0:h.output}}class Wf{}class Yf{}class Oh{}class Qh{}class Xh{}class Zh{}class Kf{}class Of{}class Qf{}class bh{}class ci{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const i=new ci;let u;const f=e;return r?u=Fh(f):u=Uh(f),Object.assign(i,u),i}}class Xf{}class Zf{}class bf{}class jf{}class jh{}class eg{}class ng{}class kl{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const i=new kl,f=Jh(e);return Object.assign(i,f),i}}class tg{}class og{}class rg{}class ec{}class ig{get text(){var e,r,i;let u="",f=!1;const c=[];for(const m of(i=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&i!==void 0?i:[]){for(const[y,h]of Object.entries(m))y!=="text"&&y!=="thought"&&h!==null&&c.push(y);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,u+=m.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,r,i;let u="";const f=[];for(const c of(i=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&i!==void 0?i:[]){for(const[m,y]of Object.entries(c))m!=="inlineData"&&y!==null&&f.push(m);c.inlineData&&typeof c.inlineData.data=="string"&&(u+=atob(c.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}}class sg{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Dl{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const i=new Dl,f=Ic(e);return Object.assign(i,f),i}}function he(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function wc(t,e){const r=he(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function Ac(t){return Array.isArray(t)?t.map(e=>pi(e)):[pi(t)]}function pi(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Pc(t){const e=pi(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Rc(t){const e=pi(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function nc(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Nc(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>nc(e)):[nc(t)]}function Il(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function tc(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function oc(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Oe(t){if(t==null)throw new Error("ContentUnion is required");return Il(t)?t:{role:"user",parts:Nc(t)}}function Ll(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{const i=Oe(r);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const r=Oe(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>Oe(r)):[Oe(e)]}function yn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(tc(t)||oc(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Oe(t)]}const e=[],r=[],i=Il(t[0]);for(const u of t){const f=Il(u);if(f!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(f)e.push(u);else{if(tc(u)||oc(u))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(u)}}return i||e.push({role:"user",parts:Nc(r)}),e}function lg(t,e){t.includes("null")&&(e.nullable=!0);const r=t.filter(i=>i!=="null");if(r.length===1)e.type=Object.values(at).includes(r[0].toUpperCase())?r[0].toUpperCase():at.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of r)e.anyOf.push({type:Object.values(at).includes(i.toUpperCase())?i.toUpperCase():at.TYPE_UNSPECIFIED})}}function bt(t){const e={},r=["items"],i=["anyOf"],u=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const f=t.anyOf;f!=null&&f.length==2&&(f[0].type==="null"?(e.nullable=!0,t=f[1]):f[1].type==="null"&&(e.nullable=!0,t=f[0])),t.type instanceof Array&&lg(t.type,e);for(const[c,m]of Object.entries(t))if(m!=null)if(c=="type"){if(m==="null")throw new Error("type: null can not be the only possible type for the field.");if(m instanceof Array)continue;e.type=Object.values(at).includes(m.toUpperCase())?m.toUpperCase():at.TYPE_UNSPECIFIED}else if(r.includes(c))e[c]=bt(m);else if(i.includes(c)){const y=[];for(const h of m){if(h.type=="null"){e.nullable=!0;continue}y.push(bt(h))}e[c]=y}else if(u.includes(c)){const y={};for(const[h,v]of Object.entries(m))y[h]=bt(v);e[c]=y}else{if(c==="additionalProperties")continue;e[c]=m}return e}function Ul(t){return bt(t)}function Fl(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Vl(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function no(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=bt(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=bt(e.response));return t}function to(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const r of t)e.push(r);return e}function ug(t,e,r,i=1){const u=!e.startsWith(`${r}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:u?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:u?`${r}/${e}`:e}function zn(t,e){if(typeof e!="string")throw new Error("name must be a string");return ug(t,e,"cachedContents")}function xc(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function dt(t){return Ml(t)}function ag(t){return t!=null&&typeof t=="object"&&"name"in t}function dg(t){return t!=null&&typeof t=="object"&&"video"in t}function fg(t){return t!=null&&typeof t=="object"&&"uri"in t}function Mc(t){var e;let r;if(ag(t)&&(r=t.name),!(fg(t)&&(r=t.uri,r===void 0))&&!(dg(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const u=r.split("files/")[1].match(/[a-z0-9]+/);if(u===null)throw new Error(`Could not extract file name from URI ${r}`);r=u[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function kc(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function Dc(t){for(const e of["models","tunedModels","publisherModels"])if(cg(t,e))return t[e];return[]}function cg(t,e){return t!==null&&typeof t=="object"&&e in t}function pg(t,e={}){const r=t,i={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return r.outputSchema&&(i.responseJsonSchema=r.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function mg(t,e={}){const r=[],i=new Set;for(const u of t){const f=u.name;if(i.has(f))throw new Error(`Duplicate function name ${f} found in MCP tools. Please ensure function names are unique.`);i.add(f);const c=pg(u,e);c.functionDeclarations&&r.push(...c.functionDeclarations)}return{functionDeclarations:r}}function Lc(t,e){let r;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))r={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))r={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))r={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");r={inlinedRequests:e}}else r=e;const i=[r.gcsUri,r.bigqueryUri].filter(Boolean).length,u=[r.inlinedRequests,r.fileName].filter(Boolean).length;if(t.isVertexAI()){if(u>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||u!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return r}function hg(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Uc(t){if(typeof t!="object"||t===null)return{};const e=t,r=e.inlinedResponses;if(typeof r!="object"||r===null)return t;const u=r.inlinedResponses;if(!Array.isArray(u)||u.length===0)return t;let f=!1;for(const c of u){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){f=!0;break}}return f&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function oo(t,e){const r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function Fc(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function gg(t){const e={},r=l(t,["responsesFile"]);r!=null&&a(e,["fileName"],r);const i=l(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(c=>Xg(c))),a(e,["inlinedResponses"],f)}const u=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(c=>c)),a(e,["inlinedEmbedContentResponses"],f)}return e}function yg(t){const e={},r=l(t,["predictionsFormat"]);r!=null&&a(e,["format"],r);const i=l(t,["gcsDestination","outputUriPrefix"]);i!=null&&a(e,["gcsUri"],i);const u=l(t,["bigqueryDestination","outputUri"]);return u!=null&&a(e,["bigqueryUri"],u),e}function vg(t){const e={},r=l(t,["format"]);r!=null&&a(e,["predictionsFormat"],r);const i=l(t,["gcsUri"]);i!=null&&a(e,["gcsDestination","outputUriPrefix"],i);const u=l(t,["bigqueryUri"]);if(u!=null&&a(e,["bigqueryDestination","outputUri"],u),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ui(t){const e={},r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["metadata","displayName"]);i!=null&&a(e,["displayName"],i);const u=l(t,["metadata","state"]);u!=null&&a(e,["state"],Fc(u));const f=l(t,["metadata","createTime"]);f!=null&&a(e,["createTime"],f);const c=l(t,["metadata","endTime"]);c!=null&&a(e,["endTime"],c);const m=l(t,["metadata","updateTime"]);m!=null&&a(e,["updateTime"],m);const y=l(t,["metadata","model"]);y!=null&&a(e,["model"],y);const h=l(t,["metadata","output"]);return h!=null&&a(e,["dest"],gg(Uc(h))),e}function wl(t){const e={},r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["displayName"]);i!=null&&a(e,["displayName"],i);const u=l(t,["state"]);u!=null&&a(e,["state"],Fc(u));const f=l(t,["error"]);f!=null&&a(e,["error"],f);const c=l(t,["createTime"]);c!=null&&a(e,["createTime"],c);const m=l(t,["startTime"]);m!=null&&a(e,["startTime"],m);const y=l(t,["endTime"]);y!=null&&a(e,["endTime"],y);const h=l(t,["updateTime"]);h!=null&&a(e,["updateTime"],h);const v=l(t,["model"]);v!=null&&a(e,["model"],v);const _=l(t,["inputConfig"]);_!=null&&a(e,["src"],Eg(_));const T=l(t,["outputConfig"]);T!=null&&a(e,["dest"],yg(Uc(T)));const w=l(t,["completionStats"]);return w!=null&&a(e,["completionStats"],w),e}function Eg(t){const e={},r=l(t,["instancesFormat"]);r!=null&&a(e,["format"],r);const i=l(t,["gcsSource","uris"]);i!=null&&a(e,["gcsUri"],i);const u=l(t,["bigquerySource","inputUri"]);return u!=null&&a(e,["bigqueryUri"],u),e}function _g(t,e){const r={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=l(e,["fileName"]);i!=null&&a(r,["fileName"],i);const u=l(e,["inlinedRequests"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(c=>Qg(t,c))),a(r,["requests","requests"],f)}return r}function Tg(t){const e={},r=l(t,["format"]);r!=null&&a(e,["instancesFormat"],r);const i=l(t,["gcsUri"]);i!=null&&a(e,["gcsSource","uris"],i);const u=l(t,["bigqueryUri"]);if(u!=null&&a(e,["bigquerySource","inputUri"],u),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Cg(t){const e={},r=l(t,["data"]);if(r!=null&&a(e,["data"],r),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Sg(t,e){const r={},i=l(e,["name"]);return i!=null&&a(r,["_url","name"],oo(t,i)),r}function Ig(t,e){const r={},i=l(e,["name"]);return i!=null&&a(r,["_url","name"],oo(t,i)),r}function wg(t){const e={},r=l(t,["content"]);r!=null&&a(e,["content"],r);const i=l(t,["citationMetadata"]);i!=null&&a(e,["citationMetadata"],Ag(i));const u=l(t,["tokenCount"]);u!=null&&a(e,["tokenCount"],u);const f=l(t,["finishReason"]);f!=null&&a(e,["finishReason"],f);const c=l(t,["avgLogprobs"]);c!=null&&a(e,["avgLogprobs"],c);const m=l(t,["groundingMetadata"]);m!=null&&a(e,["groundingMetadata"],m);const y=l(t,["index"]);y!=null&&a(e,["index"],y);const h=l(t,["logprobsResult"]);h!=null&&a(e,["logprobsResult"],h);const v=l(t,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(w=>w)),a(e,["safetyRatings"],T)}const _=l(t,["urlContextMetadata"]);return _!=null&&a(e,["urlContextMetadata"],_),e}function Ag(t){const e={},r=l(t,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(u=>u)),a(e,["citations"],i)}return e}function Vc(t){const e={},r=l(t,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>oy(f))),a(e,["parts"],u)}const i=l(t,["role"]);return i!=null&&a(e,["role"],i),e}function Pg(t,e){const r={},i=l(t,["displayName"]);if(e!==void 0&&i!=null&&a(e,["batch","displayName"],i),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function Rg(t,e){const r={},i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const u=l(t,["dest"]);return e!==void 0&&u!=null&&a(e,["outputConfig"],vg(hg(u))),r}function rc(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["src"]);u!=null&&a(r,["batch","inputConfig"],_g(t,Lc(t,u)));const f=l(e,["config"]);return f!=null&&Pg(f,r),r}function Ng(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["model"],he(t,i));const u=l(e,["src"]);u!=null&&a(r,["inputConfig"],Tg(Lc(t,u)));const f=l(e,["config"]);return f!=null&&Rg(f,r),r}function xg(t,e){const r={},i=l(t,["displayName"]);return e!==void 0&&i!=null&&a(e,["batch","displayName"],i),r}function Mg(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["src"]);u!=null&&a(r,["batch","inputConfig"],Gg(t,u));const f=l(e,["config"]);return f!=null&&xg(f,r),r}function kg(t,e){const r={},i=l(e,["name"]);return i!=null&&a(r,["_url","name"],oo(t,i)),r}function Dg(t,e){const r={},i=l(e,["name"]);return i!=null&&a(r,["_url","name"],oo(t,i)),r}function Lg(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const u=l(t,["done"]);u!=null&&a(e,["done"],u);const f=l(t,["error"]);return f!=null&&a(e,["error"],f),e}function Ug(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const u=l(t,["done"]);u!=null&&a(e,["done"],u);const f=l(t,["error"]);return f!=null&&a(e,["error"],f),e}function Fg(t,e){const r={},i=l(e,["contents"]);if(i!=null){let f=Ll(t,i);Array.isArray(f)&&(f=f.map(c=>c)),a(r,["requests[]","request","content"],f)}const u=l(e,["config"]);return u!=null&&(a(r,["_self"],Vg(u,r)),Dh(r,{"requests[].*":"requests[].request.*"})),r}function Vg(t,e){const r={},i=l(t,["taskType"]);e!==void 0&&i!=null&&a(e,["requests[]","taskType"],i);const u=l(t,["title"]);e!==void 0&&u!=null&&a(e,["requests[]","title"],u);const f=l(t,["outputDimensionality"]);if(e!==void 0&&f!=null&&a(e,["requests[]","outputDimensionality"],f),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function Gg(t,e){const r={},i=l(e,["fileName"]);i!=null&&a(r,["file_name"],i);const u=l(e,["inlinedRequests"]);return u!=null&&a(r,["requests"],Fg(t,u)),r}function qg(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Hg(t){const e={},r=l(t,["id"]);r!=null&&a(e,["id"],r);const i=l(t,["args"]);i!=null&&a(e,["args"],i);const u=l(t,["name"]);if(u!=null&&a(e,["name"],u),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Bg(t){const e={},r=l(t,["mode"]);r!=null&&a(e,["mode"],r);const i=l(t,["allowedFunctionNames"]);if(i!=null&&a(e,["allowedFunctionNames"],i),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zg(t,e,r){const i={},u=l(e,["systemInstruction"]);r!==void 0&&u!=null&&a(r,["systemInstruction"],Vc(Oe(u)));const f=l(e,["temperature"]);f!=null&&a(i,["temperature"],f);const c=l(e,["topP"]);c!=null&&a(i,["topP"],c);const m=l(e,["topK"]);m!=null&&a(i,["topK"],m);const y=l(e,["candidateCount"]);y!=null&&a(i,["candidateCount"],y);const h=l(e,["maxOutputTokens"]);h!=null&&a(i,["maxOutputTokens"],h);const v=l(e,["stopSequences"]);v!=null&&a(i,["stopSequences"],v);const _=l(e,["responseLogprobs"]);_!=null&&a(i,["responseLogprobs"],_);const T=l(e,["logprobs"]);T!=null&&a(i,["logprobs"],T);const w=l(e,["presencePenalty"]);w!=null&&a(i,["presencePenalty"],w);const k=l(e,["frequencyPenalty"]);k!=null&&a(i,["frequencyPenalty"],k);const x=l(e,["seed"]);x!=null&&a(i,["seed"],x);const D=l(e,["responseMimeType"]);D!=null&&a(i,["responseMimeType"],D);const B=l(e,["responseSchema"]);B!=null&&a(i,["responseSchema"],Ul(B));const q=l(e,["responseJsonSchema"]);if(q!=null&&a(i,["responseJsonSchema"],q),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=l(e,["safetySettings"]);if(r!==void 0&&H!=null){let de=H;Array.isArray(de)&&(de=de.map(we=>ry(we))),a(r,["safetySettings"],de)}const W=l(e,["tools"]);if(r!==void 0&&W!=null){let de=to(W);Array.isArray(de)&&(de=de.map(we=>sy(no(we)))),a(r,["tools"],de)}const Z=l(e,["toolConfig"]);if(r!==void 0&&Z!=null&&a(r,["toolConfig"],iy(Z)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=l(e,["cachedContent"]);r!==void 0&&b!=null&&a(r,["cachedContent"],zn(t,b));const j=l(e,["responseModalities"]);j!=null&&a(i,["responseModalities"],j);const se=l(e,["mediaResolution"]);se!=null&&a(i,["mediaResolution"],se);const ee=l(e,["speechConfig"]);if(ee!=null&&a(i,["speechConfig"],Fl(ee)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ie=l(e,["thinkingConfig"]);ie!=null&&a(i,["thinkingConfig"],ie);const ve=l(e,["imageConfig"]);return ve!=null&&a(i,["imageConfig"],Og(ve)),i}function Jg(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["candidates"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(h=>wg(h))),a(e,["candidates"],y)}const u=l(t,["modelVersion"]);u!=null&&a(e,["modelVersion"],u);const f=l(t,["promptFeedback"]);f!=null&&a(e,["promptFeedback"],f);const c=l(t,["responseId"]);c!=null&&a(e,["responseId"],c);const m=l(t,["usageMetadata"]);return m!=null&&a(e,["usageMetadata"],m),e}function $g(t,e){const r={},i=l(e,["name"]);return i!=null&&a(r,["_url","name"],oo(t,i)),r}function Wg(t,e){const r={},i=l(e,["name"]);return i!=null&&a(r,["_url","name"],oo(t,i)),r}function Yg(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=l(t,["enableWidget"]);return r!=null&&a(e,["enableWidget"],r),e}function Kg(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=l(t,["timeRangeFilter"]);return r!=null&&a(e,["timeRangeFilter"],r),e}function Og(t){const e={},r=l(t,["aspectRatio"]);r!=null&&a(e,["aspectRatio"],r);const i=l(t,["imageSize"]);if(i!=null&&a(e,["imageSize"],i),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Qg(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["request","model"],he(t,i));const u=l(e,["contents"]);if(u!=null){let m=yn(u);Array.isArray(m)&&(m=m.map(y=>Vc(y))),a(r,["request","contents"],m)}const f=l(e,["metadata"]);f!=null&&a(r,["metadata"],f);const c=l(e,["config"]);return c!=null&&a(r,["request","generationConfig"],zg(t,c,l(r,["request"],{}))),r}function Xg(t){const e={},r=l(t,["response"]);r!=null&&a(e,["response"],Jg(r));const i=l(t,["error"]);return i!=null&&a(e,["error"],i),e}function Zg(t,e){const r={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const u=l(t,["pageToken"]);if(e!==void 0&&u!=null&&a(e,["_query","pageToken"],u),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function bg(t,e){const r={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const u=l(t,["pageToken"]);e!==void 0&&u!=null&&a(e,["_query","pageToken"],u);const f=l(t,["filter"]);return e!==void 0&&f!=null&&a(e,["_query","filter"],f),r}function jg(t){const e={},r=l(t,["config"]);return r!=null&&Zg(r,e),e}function ey(t){const e={},r=l(t,["config"]);return r!=null&&bg(r,e),e}function ny(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const u=l(t,["operations"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(c=>ui(c))),a(e,["batchJobs"],f)}return e}function ty(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const u=l(t,["batchPredictionJobs"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(c=>wl(c))),a(e,["batchJobs"],f)}return e}function oy(t){const e={},r=l(t,["mediaResolution"]);r!=null&&a(e,["mediaResolution"],r);const i=l(t,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const u=l(t,["executableCode"]);u!=null&&a(e,["executableCode"],u);const f=l(t,["fileData"]);f!=null&&a(e,["fileData"],qg(f));const c=l(t,["functionCall"]);c!=null&&a(e,["functionCall"],Hg(c));const m=l(t,["functionResponse"]);m!=null&&a(e,["functionResponse"],m);const y=l(t,["inlineData"]);y!=null&&a(e,["inlineData"],Cg(y));const h=l(t,["text"]);h!=null&&a(e,["text"],h);const v=l(t,["thought"]);v!=null&&a(e,["thought"],v);const _=l(t,["thoughtSignature"]);_!=null&&a(e,["thoughtSignature"],_);const T=l(t,["videoMetadata"]);return T!=null&&a(e,["videoMetadata"],T),e}function ry(t){const e={},r=l(t,["category"]);if(r!=null&&a(e,["category"],r),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=l(t,["threshold"]);return i!=null&&a(e,["threshold"],i),e}function iy(t){const e={},r=l(t,["functionCallingConfig"]);r!=null&&a(e,["functionCallingConfig"],Bg(r));const i=l(t,["retrievalConfig"]);return i!=null&&a(e,["retrievalConfig"],i),e}function sy(t){const e={},r=l(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),a(e,["functionDeclarations"],v)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const u=l(t,["computerUse"]);u!=null&&a(e,["computerUse"],u);const f=l(t,["fileSearch"]);f!=null&&a(e,["fileSearch"],f);const c=l(t,["codeExecution"]);if(c!=null&&a(e,["codeExecution"],c),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=l(t,["googleMaps"]);m!=null&&a(e,["googleMaps"],Yg(m));const y=l(t,["googleSearch"]);y!=null&&a(e,["googleSearch"],Kg(y));const h=l(t,["urlContext"]);return h!=null&&a(e,["urlContext"],h),e}var Hn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Hn||(Hn={}));class It{constructor(e,r,i,u){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,i,u)}init(e,r,i){var u,f;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=r.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(f=(u=c.config)===null||u===void 0?void 0:u.pageSize)!==null&&f!==void 0?f:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class ly extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new It(Hn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(r),r),this.create=async r=>(this.apiClient.isVertexAI()&&(r.config=this.formatDestination(r.src,r.config)),this.createInternal(r)),this.createEmbeddings=async r=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(r)}}createInlinedGenerateContentRequest(e){const r=rc(this.apiClient,e),i=r._url,u=z("{model}:batchGenerateContent",i),m=r.batch.inputConfig.requests,y=m.requests,h=[];for(const v of y){const _=Object.assign({},v);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const w=_.request;w.systemInstruction=T,_.request=w}h.push(_)}return m.requests=h,delete r.config,delete r._url,delete r._query,{path:u,body:r}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,r){const i=r?Object.assign({},r):{},u=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${u}`),i.dest===void 0){const f=this.getGcsUri(e),c=this.getBigqueryUri(e);if(f)f.endsWith(".jsonl")?i.dest=`${f.slice(0,-6)}/dest`:i.dest=`${f}_dest_${u}`;else if(c)i.dest=`${c}_dest_${u}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=Ng(this.apiClient,e);return m=z("batchPredictionJobs",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>wl(v))}else{const h=rc(this.apiClient,e);return m=z("{model}:batchGenerateContent",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),c.then(v=>ui(v))}}async createEmbeddingsInternal(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Mg(this.apiClient,e);return f=z("{model}:asyncBatchEmbedContent",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>ui(y))}}async get(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=Wg(this.apiClient,e);return m=z("batchPredictionJobs/{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>wl(v))}else{const h=$g(this.apiClient,e);return m=z("batches/{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),c.then(v=>ui(v))}}async cancel(e){var r,i,u,f;let c="",m={};if(this.apiClient.isVertexAI()){const y=Ig(this.apiClient,e);c=z("batchPredictionJobs/{name}:cancel",y._url),m=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const y=Sg(this.apiClient,e);c=z("batches/{name}:cancel",y._url),m=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal})}}async listInternal(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=ey(e);return m=z("batchPredictionJobs",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=ty(v),T=new ec;return Object.assign(T,_),T})}else{const h=jg(e);return m=z("batches",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=ny(v),T=new ec;return Object.assign(T,_),T})}}async delete(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=Dg(this.apiClient,e);return m=z("batchPredictionJobs/{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>Ug(v))}else{const h=kg(this.apiClient,e);return m=z("batches/{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>Lg(v))}}}function uy(t){const e={},r=l(t,["data"]);if(r!=null&&a(e,["data"],r),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function ic(t){const e={},r=l(t,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>My(f))),a(e,["parts"],u)}const i=l(t,["role"]);return i!=null&&a(e,["role"],i),e}function ay(t,e){const r={},i=l(t,["ttl"]);e!==void 0&&i!=null&&a(e,["ttl"],i);const u=l(t,["expireTime"]);e!==void 0&&u!=null&&a(e,["expireTime"],u);const f=l(t,["displayName"]);e!==void 0&&f!=null&&a(e,["displayName"],f);const c=l(t,["contents"]);if(e!==void 0&&c!=null){let v=yn(c);Array.isArray(v)&&(v=v.map(_=>ic(_))),a(e,["contents"],v)}const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&a(e,["systemInstruction"],ic(Oe(m)));const y=l(t,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(_=>Dy(_))),a(e,["tools"],v)}const h=l(t,["toolConfig"]);if(e!==void 0&&h!=null&&a(e,["toolConfig"],ky(h)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function dy(t,e){const r={},i=l(t,["ttl"]);e!==void 0&&i!=null&&a(e,["ttl"],i);const u=l(t,["expireTime"]);e!==void 0&&u!=null&&a(e,["expireTime"],u);const f=l(t,["displayName"]);e!==void 0&&f!=null&&a(e,["displayName"],f);const c=l(t,["contents"]);if(e!==void 0&&c!=null){let _=yn(c);Array.isArray(_)&&(_=_.map(T=>T)),a(e,["contents"],_)}const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&a(e,["systemInstruction"],Oe(m));const y=l(t,["tools"]);if(e!==void 0&&y!=null){let _=y;Array.isArray(_)&&(_=_.map(T=>Ly(T))),a(e,["tools"],_)}const h=l(t,["toolConfig"]);e!==void 0&&h!=null&&a(e,["toolConfig"],h);const v=l(t,["kmsKeyName"]);return e!==void 0&&v!=null&&a(e,["encryption_spec","kmsKeyName"],v),r}function fy(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["model"],wc(t,i));const u=l(e,["config"]);return u!=null&&ay(u,r),r}function cy(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["model"],wc(t,i));const u=l(e,["config"]);return u!=null&&dy(u,r),r}function py(t,e){const r={},i=l(e,["name"]);return i!=null&&a(r,["_url","name"],zn(t,i)),r}function my(t,e){const r={},i=l(e,["name"]);return i!=null&&a(r,["_url","name"],zn(t,i)),r}function hy(t){const e={},r=l(t,["sdkHttpResponse"]);return r!=null&&a(e,["sdkHttpResponse"],r),e}function gy(t){const e={},r=l(t,["sdkHttpResponse"]);return r!=null&&a(e,["sdkHttpResponse"],r),e}function yy(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function vy(t){const e={},r=l(t,["id"]);r!=null&&a(e,["id"],r);const i=l(t,["args"]);i!=null&&a(e,["args"],i);const u=l(t,["name"]);if(u!=null&&a(e,["name"],u),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ey(t){const e={},r=l(t,["mode"]);r!=null&&a(e,["mode"],r);const i=l(t,["allowedFunctionNames"]);if(i!=null&&a(e,["allowedFunctionNames"],i),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _y(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const u=l(t,["parameters"]);u!=null&&a(e,["parameters"],u);const f=l(t,["parametersJsonSchema"]);f!=null&&a(e,["parametersJsonSchema"],f);const c=l(t,["response"]);c!=null&&a(e,["response"],c);const m=l(t,["responseJsonSchema"]);return m!=null&&a(e,["responseJsonSchema"],m),e}function Ty(t,e){const r={},i=l(e,["name"]);return i!=null&&a(r,["_url","name"],zn(t,i)),r}function Cy(t,e){const r={},i=l(e,["name"]);return i!=null&&a(r,["_url","name"],zn(t,i)),r}function Sy(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=l(t,["enableWidget"]);return r!=null&&a(e,["enableWidget"],r),e}function Iy(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=l(t,["timeRangeFilter"]);return r!=null&&a(e,["timeRangeFilter"],r),e}function wy(t,e){const r={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const u=l(t,["pageToken"]);return e!==void 0&&u!=null&&a(e,["_query","pageToken"],u),r}function Ay(t,e){const r={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const u=l(t,["pageToken"]);return e!==void 0&&u!=null&&a(e,["_query","pageToken"],u),r}function Py(t){const e={},r=l(t,["config"]);return r!=null&&wy(r,e),e}function Ry(t){const e={},r=l(t,["config"]);return r!=null&&Ay(r,e),e}function Ny(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const u=l(t,["cachedContents"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(c=>c)),a(e,["cachedContents"],f)}return e}function xy(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const u=l(t,["cachedContents"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(c=>c)),a(e,["cachedContents"],f)}return e}function My(t){const e={},r=l(t,["mediaResolution"]);r!=null&&a(e,["mediaResolution"],r);const i=l(t,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const u=l(t,["executableCode"]);u!=null&&a(e,["executableCode"],u);const f=l(t,["fileData"]);f!=null&&a(e,["fileData"],yy(f));const c=l(t,["functionCall"]);c!=null&&a(e,["functionCall"],vy(c));const m=l(t,["functionResponse"]);m!=null&&a(e,["functionResponse"],m);const y=l(t,["inlineData"]);y!=null&&a(e,["inlineData"],uy(y));const h=l(t,["text"]);h!=null&&a(e,["text"],h);const v=l(t,["thought"]);v!=null&&a(e,["thought"],v);const _=l(t,["thoughtSignature"]);_!=null&&a(e,["thoughtSignature"],_);const T=l(t,["videoMetadata"]);return T!=null&&a(e,["videoMetadata"],T),e}function ky(t){const e={},r=l(t,["functionCallingConfig"]);r!=null&&a(e,["functionCallingConfig"],Ey(r));const i=l(t,["retrievalConfig"]);return i!=null&&a(e,["retrievalConfig"],i),e}function Dy(t){const e={},r=l(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),a(e,["functionDeclarations"],v)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const u=l(t,["computerUse"]);u!=null&&a(e,["computerUse"],u);const f=l(t,["fileSearch"]);f!=null&&a(e,["fileSearch"],f);const c=l(t,["codeExecution"]);if(c!=null&&a(e,["codeExecution"],c),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=l(t,["googleMaps"]);m!=null&&a(e,["googleMaps"],Sy(m));const y=l(t,["googleSearch"]);y!=null&&a(e,["googleSearch"],Iy(y));const h=l(t,["urlContext"]);return h!=null&&a(e,["urlContext"],h),e}function Ly(t){const e={},r=l(t,["functionDeclarations"]);if(r!=null){let _=r;Array.isArray(_)&&(_=_.map(T=>_y(T))),a(e,["functionDeclarations"],_)}const i=l(t,["retrieval"]);i!=null&&a(e,["retrieval"],i);const u=l(t,["googleSearchRetrieval"]);u!=null&&a(e,["googleSearchRetrieval"],u);const f=l(t,["computerUse"]);if(f!=null&&a(e,["computerUse"],f),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=l(t,["codeExecution"]);c!=null&&a(e,["codeExecution"],c);const m=l(t,["enterpriseWebSearch"]);m!=null&&a(e,["enterpriseWebSearch"],m);const y=l(t,["googleMaps"]);y!=null&&a(e,["googleMaps"],y);const h=l(t,["googleSearch"]);h!=null&&a(e,["googleSearch"],h);const v=l(t,["urlContext"]);return v!=null&&a(e,["urlContext"],v),e}function Uy(t,e){const r={},i=l(t,["ttl"]);e!==void 0&&i!=null&&a(e,["ttl"],i);const u=l(t,["expireTime"]);return e!==void 0&&u!=null&&a(e,["expireTime"],u),r}function Fy(t,e){const r={},i=l(t,["ttl"]);e!==void 0&&i!=null&&a(e,["ttl"],i);const u=l(t,["expireTime"]);return e!==void 0&&u!=null&&a(e,["expireTime"],u),r}function Vy(t,e){const r={},i=l(e,["name"]);i!=null&&a(r,["_url","name"],zn(t,i));const u=l(e,["config"]);return u!=null&&Uy(u,r),r}function Gy(t,e){const r={},i=l(e,["name"]);i!=null&&a(r,["_url","name"],zn(t,i));const u=l(e,["config"]);return u!=null&&Fy(u,r),r}class qy extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new It(Hn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(r),r)}async create(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=cy(this.apiClient,e);return m=z("cachedContents",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const h=fy(this.apiClient,e);return m=z("cachedContents",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=Cy(this.apiClient,e);return m=z("{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const h=Ty(this.apiClient,e);return m=z("{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=my(this.apiClient,e);return m=z("{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=gy(v),T=new bf;return Object.assign(T,_),T})}else{const h=py(this.apiClient,e);return m=z("{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=hy(v),T=new bf;return Object.assign(T,_),T})}}async update(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=Gy(this.apiClient,e);return m=z("{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const h=Vy(this.apiClient,e);return m=z("{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=Ry(e);return m=z("cachedContents",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=xy(v),T=new jf;return Object.assign(T,_),T})}else{const h=Py(e);return m=z("cachedContents",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Ny(v),T=new jf;return Object.assign(T,_),T})}}}function sc(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(t){return this instanceof Ie?(this.v=t,this):new Ie(t)}function jt(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),u,f=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",c),u[Symbol.asyncIterator]=function(){return this},u;function c(w){return function(k){return Promise.resolve(k).then(w,_)}}function m(w,k){i[w]&&(u[w]=function(x){return new Promise(function(D,B){f.push([w,x,D,B])>1||y(w,x)})},k&&(u[w]=k(u[w])))}function y(w,k){try{h(i[w](k))}catch(x){T(f[0][3],x)}}function h(w){w.value instanceof Ie?Promise.resolve(w.value.v).then(v,_):T(f[0][2],w)}function v(w){y("next",w)}function _(w){y("throw",w)}function T(w,k){w(k),f.shift(),f.length&&y(f[0][0],f[0][1])}}function Ko(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof sc=="function"?sc(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(f){r[f]=t[f]&&function(c){return new Promise(function(m,y){c=t[f](c),u(m,y,c.done,c.value)})}}function u(f,c,m,y){Promise.resolve(y).then(function(h){f({value:h,done:m})},c)}}function Hy(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:Gc(r)}function Gc(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function By(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function lc(t){if(t===void 0||t.length===0)return[];const e=[],r=t.length;let i=0;for(;i<r;)if(t[i].role==="user")e.push(t[i]),i++;else{const u=[];let f=!0;for(;i<r&&t[i].role==="model";)u.push(t[i]),f&&!Gc(t[i])&&(f=!1),i++;f?e.push(...u):e.pop()}return e}class zy{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new Jy(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Jy{constructor(e,r,i,u={},f=[]){this.apiClient=e,this.modelsModule=r,this.model=i,this.config=u,this.history=f,this.sendPromise=Promise.resolve(),By(f)}async sendMessage(e){var r;await this.sendPromise;const i=Oe(e.message),u=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var f,c,m;const y=await u,h=(c=(f=y.candidates)===null||f===void 0?void 0:f[0])===null||c===void 0?void 0:c.content,v=y.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];v!=null&&(T=(m=v.slice(_))!==null&&m!==void 0?m:[]);const w=h?[h]:[];this.recordHistory(i,w,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),u}async sendMessageStream(e){var r;await this.sendPromise;const i=Oe(e.message),u=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=u.then(()=>{}).catch(()=>{});const f=await u;return this.processStreamResponse(f,i)}getHistory(e=!1){const r=e?lc(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){var i,u;return jt(this,arguments,function*(){var c,m,y,h;const v=[];try{for(var _=!0,T=Ko(e),w;w=yield Ie(T.next()),c=w.done,!c;_=!0){h=w.value,_=!1;const k=h;if(Hy(k)){const x=(u=(i=k.candidates)===null||i===void 0?void 0:i[0])===null||u===void 0?void 0:u.content;x!==void 0&&v.push(x)}yield yield Ie(k)}}catch(k){m={error:k}}finally{try{!_&&!c&&(y=T.return)&&(yield Ie(y.call(T)))}finally{if(m)throw m.error}}this.recordHistory(r,v)})}recordHistory(e,r,i){let u=[];r.length>0&&r.every(f=>f.role!==void 0)?u=r:u.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...lc(i)):this.history.push(e),this.history.push(...u)}}class hi extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,hi.prototype)}}function $y(t){const e={},r=l(t,["file"]);return r!=null&&a(e,["file"],r),e}function Wy(t){const e={},r=l(t,["sdkHttpResponse"]);return r!=null&&a(e,["sdkHttpResponse"],r),e}function Yy(t){const e={},r=l(t,["name"]);return r!=null&&a(e,["_url","file"],Mc(r)),e}function Ky(t){const e={},r=l(t,["sdkHttpResponse"]);return r!=null&&a(e,["sdkHttpResponse"],r),e}function Oy(t){const e={},r=l(t,["name"]);return r!=null&&a(e,["_url","file"],Mc(r)),e}function Qy(t,e){const r={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const u=l(t,["pageToken"]);return e!==void 0&&u!=null&&a(e,["_query","pageToken"],u),r}function Xy(t){const e={},r=l(t,["config"]);return r!=null&&Qy(r,e),e}function Zy(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const u=l(t,["files"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(c=>c)),a(e,["files"],f)}return e}class by extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new It(Hn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>r)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Xy(e);return f=z("files",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),u.then(y=>{const h=Zy(y),v=new tg;return Object.assign(v,h),v})}}async createInternal(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=$y(e);return f=z("upload/v1beta/files",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const h=Wy(y),v=new og;return Object.assign(v,h),v})}}async get(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Oy(e);return f=z("files/{file}",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Yy(e);return f=z("files/{file}",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),u.then(y=>{const h=Ky(y),v=new rg;return Object.assign(v,h),v})}}}function ai(t){const e={},r=l(t,["data"]);if(r!=null&&a(e,["data"],r),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function jy(t){const e={},r=l(t,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>hv(f))),a(e,["parts"],u)}const i=l(t,["role"]);return i!=null&&a(e,["role"],i),e}function ev(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function nv(t){const e={},r=l(t,["id"]);r!=null&&a(e,["id"],r);const i=l(t,["args"]);i!=null&&a(e,["args"],i);const u=l(t,["name"]);if(u!=null&&a(e,["name"],u),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tv(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const u=l(t,["parameters"]);u!=null&&a(e,["parameters"],u);const f=l(t,["parametersJsonSchema"]);f!=null&&a(e,["parametersJsonSchema"],f);const c=l(t,["response"]);c!=null&&a(e,["response"],c);const m=l(t,["responseJsonSchema"]);return m!=null&&a(e,["responseJsonSchema"],m),e}function ov(t){const e={},r=l(t,["modelSelectionConfig"]);r!=null&&a(e,["modelConfig"],r);const i=l(t,["responseJsonSchema"]);i!=null&&a(e,["responseJsonSchema"],i);const u=l(t,["audioTimestamp"]);u!=null&&a(e,["audioTimestamp"],u);const f=l(t,["candidateCount"]);f!=null&&a(e,["candidateCount"],f);const c=l(t,["enableAffectiveDialog"]);c!=null&&a(e,["enableAffectiveDialog"],c);const m=l(t,["frequencyPenalty"]);m!=null&&a(e,["frequencyPenalty"],m);const y=l(t,["logprobs"]);y!=null&&a(e,["logprobs"],y);const h=l(t,["maxOutputTokens"]);h!=null&&a(e,["maxOutputTokens"],h);const v=l(t,["mediaResolution"]);v!=null&&a(e,["mediaResolution"],v);const _=l(t,["presencePenalty"]);_!=null&&a(e,["presencePenalty"],_);const T=l(t,["responseLogprobs"]);T!=null&&a(e,["responseLogprobs"],T);const w=l(t,["responseMimeType"]);w!=null&&a(e,["responseMimeType"],w);const k=l(t,["responseModalities"]);k!=null&&a(e,["responseModalities"],k);const x=l(t,["responseSchema"]);x!=null&&a(e,["responseSchema"],x);const D=l(t,["routingConfig"]);D!=null&&a(e,["routingConfig"],D);const B=l(t,["seed"]);B!=null&&a(e,["seed"],B);const q=l(t,["speechConfig"]);q!=null&&a(e,["speechConfig"],qc(q));const H=l(t,["stopSequences"]);H!=null&&a(e,["stopSequences"],H);const W=l(t,["temperature"]);W!=null&&a(e,["temperature"],W);const Z=l(t,["thinkingConfig"]);Z!=null&&a(e,["thinkingConfig"],Z);const b=l(t,["topK"]);b!=null&&a(e,["topK"],b);const j=l(t,["topP"]);if(j!=null&&a(e,["topP"],j),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function rv(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=l(t,["enableWidget"]);return r!=null&&a(e,["enableWidget"],r),e}function iv(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=l(t,["timeRangeFilter"]);return r!=null&&a(e,["timeRangeFilter"],r),e}function sv(t,e){const r={},i=l(t,["generationConfig"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig"],i);const u=l(t,["responseModalities"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","responseModalities"],u);const f=l(t,["temperature"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","temperature"],f);const c=l(t,["topP"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","topP"],c);const m=l(t,["topK"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","topK"],m);const y=l(t,["maxOutputTokens"]);e!==void 0&&y!=null&&a(e,["setup","generationConfig","maxOutputTokens"],y);const h=l(t,["mediaResolution"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","mediaResolution"],h);const v=l(t,["seed"]);e!==void 0&&v!=null&&a(e,["setup","generationConfig","seed"],v);const _=l(t,["speechConfig"]);e!==void 0&&_!=null&&a(e,["setup","generationConfig","speechConfig"],Vl(_));const T=l(t,["thinkingConfig"]);e!==void 0&&T!=null&&a(e,["setup","generationConfig","thinkingConfig"],T);const w=l(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],w);const k=l(t,["systemInstruction"]);e!==void 0&&k!=null&&a(e,["setup","systemInstruction"],jy(Oe(k)));const x=l(t,["tools"]);if(e!==void 0&&x!=null){let b=to(x);Array.isArray(b)&&(b=b.map(j=>yv(no(j)))),a(e,["setup","tools"],b)}const D=l(t,["sessionResumption"]);e!==void 0&&D!=null&&a(e,["setup","sessionResumption"],gv(D));const B=l(t,["inputAudioTranscription"]);e!==void 0&&B!=null&&a(e,["setup","inputAudioTranscription"],B);const q=l(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&a(e,["setup","outputAudioTranscription"],q);const H=l(t,["realtimeInputConfig"]);e!==void 0&&H!=null&&a(e,["setup","realtimeInputConfig"],H);const W=l(t,["contextWindowCompression"]);e!==void 0&&W!=null&&a(e,["setup","contextWindowCompression"],W);const Z=l(t,["proactivity"]);return e!==void 0&&Z!=null&&a(e,["setup","proactivity"],Z),r}function lv(t,e){const r={},i=l(t,["generationConfig"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig"],ov(i));const u=l(t,["responseModalities"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","responseModalities"],u);const f=l(t,["temperature"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","temperature"],f);const c=l(t,["topP"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","topP"],c);const m=l(t,["topK"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","topK"],m);const y=l(t,["maxOutputTokens"]);e!==void 0&&y!=null&&a(e,["setup","generationConfig","maxOutputTokens"],y);const h=l(t,["mediaResolution"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","mediaResolution"],h);const v=l(t,["seed"]);e!==void 0&&v!=null&&a(e,["setup","generationConfig","seed"],v);const _=l(t,["speechConfig"]);e!==void 0&&_!=null&&a(e,["setup","generationConfig","speechConfig"],qc(Vl(_)));const T=l(t,["thinkingConfig"]);e!==void 0&&T!=null&&a(e,["setup","generationConfig","thinkingConfig"],T);const w=l(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],w);const k=l(t,["systemInstruction"]);e!==void 0&&k!=null&&a(e,["setup","systemInstruction"],Oe(k));const x=l(t,["tools"]);if(e!==void 0&&x!=null){let b=to(x);Array.isArray(b)&&(b=b.map(j=>vv(no(j)))),a(e,["setup","tools"],b)}const D=l(t,["sessionResumption"]);e!==void 0&&D!=null&&a(e,["setup","sessionResumption"],D);const B=l(t,["inputAudioTranscription"]);e!==void 0&&B!=null&&a(e,["setup","inputAudioTranscription"],B);const q=l(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&a(e,["setup","outputAudioTranscription"],q);const H=l(t,["realtimeInputConfig"]);e!==void 0&&H!=null&&a(e,["setup","realtimeInputConfig"],H);const W=l(t,["contextWindowCompression"]);e!==void 0&&W!=null&&a(e,["setup","contextWindowCompression"],W);const Z=l(t,["proactivity"]);return e!==void 0&&Z!=null&&a(e,["setup","proactivity"],Z),r}function uv(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["setup","model"],he(t,i));const u=l(e,["config"]);return u!=null&&a(r,["config"],sv(u,r)),r}function av(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["setup","model"],he(t,i));const u=l(e,["config"]);return u!=null&&a(r,["config"],lv(u,r)),r}function dv(t){const e={},r=l(t,["musicGenerationConfig"]);return r!=null&&a(e,["musicGenerationConfig"],r),e}function fv(t){const e={},r=l(t,["weightedPrompts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(u=>u)),a(e,["weightedPrompts"],i)}return e}function cv(t){const e={},r=l(t,["media"]);if(r!=null){let h=Ac(r);Array.isArray(h)&&(h=h.map(v=>ai(v))),a(e,["mediaChunks"],h)}const i=l(t,["audio"]);i!=null&&a(e,["audio"],ai(Rc(i)));const u=l(t,["audioStreamEnd"]);u!=null&&a(e,["audioStreamEnd"],u);const f=l(t,["video"]);f!=null&&a(e,["video"],ai(Pc(f)));const c=l(t,["text"]);c!=null&&a(e,["text"],c);const m=l(t,["activityStart"]);m!=null&&a(e,["activityStart"],m);const y=l(t,["activityEnd"]);return y!=null&&a(e,["activityEnd"],y),e}function pv(t){const e={},r=l(t,["media"]);if(r!=null){let h=Ac(r);Array.isArray(h)&&(h=h.map(v=>v)),a(e,["mediaChunks"],h)}const i=l(t,["audio"]);i!=null&&a(e,["audio"],Rc(i));const u=l(t,["audioStreamEnd"]);u!=null&&a(e,["audioStreamEnd"],u);const f=l(t,["video"]);f!=null&&a(e,["video"],Pc(f));const c=l(t,["text"]);c!=null&&a(e,["text"],c);const m=l(t,["activityStart"]);m!=null&&a(e,["activityStart"],m);const y=l(t,["activityEnd"]);return y!=null&&a(e,["activityEnd"],y),e}function mv(t){const e={},r=l(t,["setupComplete"]);r!=null&&a(e,["setupComplete"],r);const i=l(t,["serverContent"]);i!=null&&a(e,["serverContent"],i);const u=l(t,["toolCall"]);u!=null&&a(e,["toolCall"],u);const f=l(t,["toolCallCancellation"]);f!=null&&a(e,["toolCallCancellation"],f);const c=l(t,["usageMetadata"]);c!=null&&a(e,["usageMetadata"],Ev(c));const m=l(t,["goAway"]);m!=null&&a(e,["goAway"],m);const y=l(t,["sessionResumptionUpdate"]);return y!=null&&a(e,["sessionResumptionUpdate"],y),e}function hv(t){const e={},r=l(t,["mediaResolution"]);r!=null&&a(e,["mediaResolution"],r);const i=l(t,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const u=l(t,["executableCode"]);u!=null&&a(e,["executableCode"],u);const f=l(t,["fileData"]);f!=null&&a(e,["fileData"],ev(f));const c=l(t,["functionCall"]);c!=null&&a(e,["functionCall"],nv(c));const m=l(t,["functionResponse"]);m!=null&&a(e,["functionResponse"],m);const y=l(t,["inlineData"]);y!=null&&a(e,["inlineData"],ai(y));const h=l(t,["text"]);h!=null&&a(e,["text"],h);const v=l(t,["thought"]);v!=null&&a(e,["thought"],v);const _=l(t,["thoughtSignature"]);_!=null&&a(e,["thoughtSignature"],_);const T=l(t,["videoMetadata"]);return T!=null&&a(e,["videoMetadata"],T),e}function gv(t){const e={},r=l(t,["handle"]);if(r!=null&&a(e,["handle"],r),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function qc(t){const e={},r=l(t,["languageCode"]);r!=null&&a(e,["languageCode"],r);const i=l(t,["voiceConfig"]);if(i!=null&&a(e,["voiceConfig"],i),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function yv(t){const e={},r=l(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),a(e,["functionDeclarations"],v)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const u=l(t,["computerUse"]);u!=null&&a(e,["computerUse"],u);const f=l(t,["fileSearch"]);f!=null&&a(e,["fileSearch"],f);const c=l(t,["codeExecution"]);if(c!=null&&a(e,["codeExecution"],c),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=l(t,["googleMaps"]);m!=null&&a(e,["googleMaps"],rv(m));const y=l(t,["googleSearch"]);y!=null&&a(e,["googleSearch"],iv(y));const h=l(t,["urlContext"]);return h!=null&&a(e,["urlContext"],h),e}function vv(t){const e={},r=l(t,["functionDeclarations"]);if(r!=null){let _=r;Array.isArray(_)&&(_=_.map(T=>tv(T))),a(e,["functionDeclarations"],_)}const i=l(t,["retrieval"]);i!=null&&a(e,["retrieval"],i);const u=l(t,["googleSearchRetrieval"]);u!=null&&a(e,["googleSearchRetrieval"],u);const f=l(t,["computerUse"]);if(f!=null&&a(e,["computerUse"],f),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=l(t,["codeExecution"]);c!=null&&a(e,["codeExecution"],c);const m=l(t,["enterpriseWebSearch"]);m!=null&&a(e,["enterpriseWebSearch"],m);const y=l(t,["googleMaps"]);y!=null&&a(e,["googleMaps"],y);const h=l(t,["googleSearch"]);h!=null&&a(e,["googleSearch"],h);const v=l(t,["urlContext"]);return v!=null&&a(e,["urlContext"],v),e}function Ev(t){const e={},r=l(t,["promptTokenCount"]);r!=null&&a(e,["promptTokenCount"],r);const i=l(t,["cachedContentTokenCount"]);i!=null&&a(e,["cachedContentTokenCount"],i);const u=l(t,["candidatesTokenCount"]);u!=null&&a(e,["responseTokenCount"],u);const f=l(t,["toolUsePromptTokenCount"]);f!=null&&a(e,["toolUsePromptTokenCount"],f);const c=l(t,["thoughtsTokenCount"]);c!=null&&a(e,["thoughtsTokenCount"],c);const m=l(t,["totalTokenCount"]);m!=null&&a(e,["totalTokenCount"],m);const y=l(t,["promptTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(k=>k)),a(e,["promptTokensDetails"],w)}const h=l(t,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(k=>k)),a(e,["cacheTokensDetails"],w)}const v=l(t,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(k=>k)),a(e,["responseTokensDetails"],w)}const _=l(t,["toolUsePromptTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(k=>k)),a(e,["toolUsePromptTokensDetails"],w)}const T=l(t,["trafficType"]);return T!=null&&a(e,["trafficType"],T),e}function _v(t){const e={},r=l(t,["data"]);if(r!=null&&a(e,["data"],r),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Tv(t){const e={},r=l(t,["content"]);r!=null&&a(e,["content"],r);const i=l(t,["citationMetadata"]);i!=null&&a(e,["citationMetadata"],Cv(i));const u=l(t,["tokenCount"]);u!=null&&a(e,["tokenCount"],u);const f=l(t,["finishReason"]);f!=null&&a(e,["finishReason"],f);const c=l(t,["avgLogprobs"]);c!=null&&a(e,["avgLogprobs"],c);const m=l(t,["groundingMetadata"]);m!=null&&a(e,["groundingMetadata"],m);const y=l(t,["index"]);y!=null&&a(e,["index"],y);const h=l(t,["logprobsResult"]);h!=null&&a(e,["logprobsResult"],h);const v=l(t,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(w=>w)),a(e,["safetyRatings"],T)}const _=l(t,["urlContextMetadata"]);return _!=null&&a(e,["urlContextMetadata"],_),e}function Cv(t){const e={},r=l(t,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(u=>u)),a(e,["citations"],i)}return e}function Sv(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["contents"]);if(u!=null){let f=yn(u);Array.isArray(f)&&(f=f.map(c=>c)),a(r,["contents"],f)}return r}function Iv(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["tokensInfo"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>f)),a(e,["tokensInfo"],u)}return e}function wv(t){const e={},r=l(t,["values"]);r!=null&&a(e,["values"],r);const i=l(t,["statistics"]);return i!=null&&a(e,["statistics"],Av(i)),e}function Av(t){const e={},r=l(t,["truncated"]);r!=null&&a(e,["truncated"],r);const i=l(t,["token_count"]);return i!=null&&a(e,["tokenCount"],i),e}function gi(t){const e={},r=l(t,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>UE(f))),a(e,["parts"],u)}const i=l(t,["role"]);return i!=null&&a(e,["role"],i),e}function Pv(t){const e={},r=l(t,["controlType"]);r!=null&&a(e,["controlType"],r);const i=l(t,["enableControlImageComputation"]);return i!=null&&a(e,["computeControl"],i),e}function Rv(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Nv(t,e){const r={},i=l(t,["systemInstruction"]);e!==void 0&&i!=null&&a(e,["systemInstruction"],Oe(i));const u=l(t,["tools"]);if(e!==void 0&&u!=null){let c=u;Array.isArray(c)&&(c=c.map(m=>$c(m))),a(e,["tools"],c)}const f=l(t,["generationConfig"]);return e!==void 0&&f!=null&&a(e,["generationConfig"],_E(f)),r}function xv(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["contents"]);if(u!=null){let c=yn(u);Array.isArray(c)&&(c=c.map(m=>gi(m))),a(r,["contents"],c)}const f=l(e,["config"]);return f!=null&&Rv(f),r}function Mv(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["contents"]);if(u!=null){let c=yn(u);Array.isArray(c)&&(c=c.map(m=>m)),a(r,["contents"],c)}const f=l(e,["config"]);return f!=null&&Nv(f,r),r}function kv(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["totalTokens"]);i!=null&&a(e,["totalTokens"],i);const u=l(t,["cachedContentTokenCount"]);return u!=null&&a(e,["cachedContentTokenCount"],u),e}function Dv(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["totalTokens"]);return i!=null&&a(e,["totalTokens"],i),e}function Lv(t,e){const r={},i=l(e,["model"]);return i!=null&&a(r,["_url","name"],he(t,i)),r}function Uv(t,e){const r={},i=l(e,["model"]);return i!=null&&a(r,["_url","name"],he(t,i)),r}function Fv(t){const e={},r=l(t,["sdkHttpResponse"]);return r!=null&&a(e,["sdkHttpResponse"],r),e}function Vv(t){const e={},r=l(t,["sdkHttpResponse"]);return r!=null&&a(e,["sdkHttpResponse"],r),e}function Gv(t,e){const r={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const u=l(t,["negativePrompt"]);e!==void 0&&u!=null&&a(e,["parameters","negativePrompt"],u);const f=l(t,["numberOfImages"]);e!==void 0&&f!=null&&a(e,["parameters","sampleCount"],f);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&a(e,["parameters","aspectRatio"],c);const m=l(t,["guidanceScale"]);e!==void 0&&m!=null&&a(e,["parameters","guidanceScale"],m);const y=l(t,["seed"]);e!==void 0&&y!=null&&a(e,["parameters","seed"],y);const h=l(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&a(e,["parameters","safetySetting"],h);const v=l(t,["personGeneration"]);e!==void 0&&v!=null&&a(e,["parameters","personGeneration"],v);const _=l(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&a(e,["parameters","includeSafetyAttributes"],_);const T=l(t,["includeRaiReason"]);e!==void 0&&T!=null&&a(e,["parameters","includeRaiReason"],T);const w=l(t,["language"]);e!==void 0&&w!=null&&a(e,["parameters","language"],w);const k=l(t,["outputMimeType"]);e!==void 0&&k!=null&&a(e,["parameters","outputOptions","mimeType"],k);const x=l(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&a(e,["parameters","outputOptions","compressionQuality"],x);const D=l(t,["addWatermark"]);e!==void 0&&D!=null&&a(e,["parameters","addWatermark"],D);const B=l(t,["labels"]);e!==void 0&&B!=null&&a(e,["labels"],B);const q=l(t,["editMode"]);e!==void 0&&q!=null&&a(e,["parameters","editMode"],q);const H=l(t,["baseSteps"]);return e!==void 0&&H!=null&&a(e,["parameters","editConfig","baseSteps"],H),r}function qv(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["prompt"]);u!=null&&a(r,["instances[0]","prompt"],u);const f=l(e,["referenceImages"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>BE(y))),a(r,["instances[0]","referenceImages"],m)}const c=l(e,["config"]);return c!=null&&Gv(c,r),r}function Hv(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["predictions"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>yi(f))),a(e,["generatedImages"],u)}return e}function Bv(t,e){const r={},i=l(t,["taskType"]);e!==void 0&&i!=null&&a(e,["requests[]","taskType"],i);const u=l(t,["title"]);e!==void 0&&u!=null&&a(e,["requests[]","title"],u);const f=l(t,["outputDimensionality"]);if(e!==void 0&&f!=null&&a(e,["requests[]","outputDimensionality"],f),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function zv(t,e){const r={},i=l(t,["taskType"]);e!==void 0&&i!=null&&a(e,["instances[]","task_type"],i);const u=l(t,["title"]);e!==void 0&&u!=null&&a(e,["instances[]","title"],u);const f=l(t,["outputDimensionality"]);e!==void 0&&f!=null&&a(e,["parameters","outputDimensionality"],f);const c=l(t,["mimeType"]);e!==void 0&&c!=null&&a(e,["instances[]","mimeType"],c);const m=l(t,["autoTruncate"]);return e!==void 0&&m!=null&&a(e,["parameters","autoTruncate"],m),r}function Jv(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["contents"]);if(u!=null){let m=Ll(t,u);Array.isArray(m)&&(m=m.map(y=>y)),a(r,["requests[]","content"],m)}const f=l(e,["config"]);f!=null&&Bv(f,r);const c=l(e,["model"]);return c!==void 0&&a(r,["requests[]","model"],he(t,c)),r}function $v(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["contents"]);if(u!=null){let c=Ll(t,u);Array.isArray(c)&&(c=c.map(m=>m)),a(r,["instances[]","content"],c)}const f=l(e,["config"]);return f!=null&&zv(f,r),r}function Wv(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["embeddings"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(c=>c)),a(e,["embeddings"],f)}const u=l(t,["metadata"]);return u!=null&&a(e,["metadata"],u),e}function Yv(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["predictions[]","embeddings"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(c=>wv(c))),a(e,["embeddings"],f)}const u=l(t,["metadata"]);return u!=null&&a(e,["metadata"],u),e}function Kv(t){const e={},r=l(t,["endpoint"]);r!=null&&a(e,["name"],r);const i=l(t,["deployedModelId"]);return i!=null&&a(e,["deployedModelId"],i),e}function Ov(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Qv(t){const e={},r=l(t,["id"]);r!=null&&a(e,["id"],r);const i=l(t,["args"]);i!=null&&a(e,["args"],i);const u=l(t,["name"]);if(u!=null&&a(e,["name"],u),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Xv(t){const e={},r=l(t,["mode"]);r!=null&&a(e,["mode"],r);const i=l(t,["allowedFunctionNames"]);if(i!=null&&a(e,["allowedFunctionNames"],i),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Zv(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const u=l(t,["parameters"]);u!=null&&a(e,["parameters"],u);const f=l(t,["parametersJsonSchema"]);f!=null&&a(e,["parametersJsonSchema"],f);const c=l(t,["response"]);c!=null&&a(e,["response"],c);const m=l(t,["responseJsonSchema"]);return m!=null&&a(e,["responseJsonSchema"],m),e}function bv(t,e,r){const i={},u=l(e,["systemInstruction"]);r!==void 0&&u!=null&&a(r,["systemInstruction"],gi(Oe(u)));const f=l(e,["temperature"]);f!=null&&a(i,["temperature"],f);const c=l(e,["topP"]);c!=null&&a(i,["topP"],c);const m=l(e,["topK"]);m!=null&&a(i,["topK"],m);const y=l(e,["candidateCount"]);y!=null&&a(i,["candidateCount"],y);const h=l(e,["maxOutputTokens"]);h!=null&&a(i,["maxOutputTokens"],h);const v=l(e,["stopSequences"]);v!=null&&a(i,["stopSequences"],v);const _=l(e,["responseLogprobs"]);_!=null&&a(i,["responseLogprobs"],_);const T=l(e,["logprobs"]);T!=null&&a(i,["logprobs"],T);const w=l(e,["presencePenalty"]);w!=null&&a(i,["presencePenalty"],w);const k=l(e,["frequencyPenalty"]);k!=null&&a(i,["frequencyPenalty"],k);const x=l(e,["seed"]);x!=null&&a(i,["seed"],x);const D=l(e,["responseMimeType"]);D!=null&&a(i,["responseMimeType"],D);const B=l(e,["responseSchema"]);B!=null&&a(i,["responseSchema"],Ul(B));const q=l(e,["responseJsonSchema"]);if(q!=null&&a(i,["responseJsonSchema"],q),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=l(e,["safetySettings"]);if(r!==void 0&&H!=null){let de=H;Array.isArray(de)&&(de=de.map(we=>zE(we))),a(r,["safetySettings"],de)}const W=l(e,["tools"]);if(r!==void 0&&W!=null){let de=to(W);Array.isArray(de)&&(de=de.map(we=>QE(no(we)))),a(r,["tools"],de)}const Z=l(e,["toolConfig"]);if(r!==void 0&&Z!=null&&a(r,["toolConfig"],OE(Z)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=l(e,["cachedContent"]);r!==void 0&&b!=null&&a(r,["cachedContent"],zn(t,b));const j=l(e,["responseModalities"]);j!=null&&a(i,["responseModalities"],j);const se=l(e,["mediaResolution"]);se!=null&&a(i,["mediaResolution"],se);const ee=l(e,["speechConfig"]);if(ee!=null&&a(i,["speechConfig"],Fl(ee)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ie=l(e,["thinkingConfig"]);ie!=null&&a(i,["thinkingConfig"],ie);const ve=l(e,["imageConfig"]);return ve!=null&&a(i,["imageConfig"],wE(ve)),i}function jv(t,e,r){const i={},u=l(e,["systemInstruction"]);r!==void 0&&u!=null&&a(r,["systemInstruction"],Oe(u));const f=l(e,["temperature"]);f!=null&&a(i,["temperature"],f);const c=l(e,["topP"]);c!=null&&a(i,["topP"],c);const m=l(e,["topK"]);m!=null&&a(i,["topK"],m);const y=l(e,["candidateCount"]);y!=null&&a(i,["candidateCount"],y);const h=l(e,["maxOutputTokens"]);h!=null&&a(i,["maxOutputTokens"],h);const v=l(e,["stopSequences"]);v!=null&&a(i,["stopSequences"],v);const _=l(e,["responseLogprobs"]);_!=null&&a(i,["responseLogprobs"],_);const T=l(e,["logprobs"]);T!=null&&a(i,["logprobs"],T);const w=l(e,["presencePenalty"]);w!=null&&a(i,["presencePenalty"],w);const k=l(e,["frequencyPenalty"]);k!=null&&a(i,["frequencyPenalty"],k);const x=l(e,["seed"]);x!=null&&a(i,["seed"],x);const D=l(e,["responseMimeType"]);D!=null&&a(i,["responseMimeType"],D);const B=l(e,["responseSchema"]);B!=null&&a(i,["responseSchema"],Ul(B));const q=l(e,["responseJsonSchema"]);q!=null&&a(i,["responseJsonSchema"],q);const H=l(e,["routingConfig"]);H!=null&&a(i,["routingConfig"],H);const W=l(e,["modelSelectionConfig"]);W!=null&&a(i,["modelConfig"],W);const Z=l(e,["safetySettings"]);if(r!==void 0&&Z!=null){let Ae=Z;Array.isArray(Ae)&&(Ae=Ae.map(Ee=>Ee)),a(r,["safetySettings"],Ae)}const b=l(e,["tools"]);if(r!==void 0&&b!=null){let Ae=to(b);Array.isArray(Ae)&&(Ae=Ae.map(Ee=>$c(no(Ee)))),a(r,["tools"],Ae)}const j=l(e,["toolConfig"]);r!==void 0&&j!=null&&a(r,["toolConfig"],j);const se=l(e,["labels"]);r!==void 0&&se!=null&&a(r,["labels"],se);const ee=l(e,["cachedContent"]);r!==void 0&&ee!=null&&a(r,["cachedContent"],zn(t,ee));const ie=l(e,["responseModalities"]);ie!=null&&a(i,["responseModalities"],ie);const ve=l(e,["mediaResolution"]);ve!=null&&a(i,["mediaResolution"],ve);const de=l(e,["speechConfig"]);de!=null&&a(i,["speechConfig"],Jc(Fl(de)));const we=l(e,["audioTimestamp"]);we!=null&&a(i,["audioTimestamp"],we);const Ze=l(e,["thinkingConfig"]);Ze!=null&&a(i,["thinkingConfig"],Ze);const rn=l(e,["imageConfig"]);return rn!=null&&a(i,["imageConfig"],AE(rn)),i}function uc(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["contents"]);if(u!=null){let c=yn(u);Array.isArray(c)&&(c=c.map(m=>gi(m))),a(r,["contents"],c)}const f=l(e,["config"]);return f!=null&&a(r,["generationConfig"],bv(t,f,r)),r}function ac(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["contents"]);if(u!=null){let c=yn(u);Array.isArray(c)&&(c=c.map(m=>m)),a(r,["contents"],c)}const f=l(e,["config"]);return f!=null&&a(r,["generationConfig"],jv(t,f,r)),r}function dc(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["candidates"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(h=>Tv(h))),a(e,["candidates"],y)}const u=l(t,["modelVersion"]);u!=null&&a(e,["modelVersion"],u);const f=l(t,["promptFeedback"]);f!=null&&a(e,["promptFeedback"],f);const c=l(t,["responseId"]);c!=null&&a(e,["responseId"],c);const m=l(t,["usageMetadata"]);return m!=null&&a(e,["usageMetadata"],m),e}function fc(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(v=>v)),a(e,["candidates"],h)}const u=l(t,["createTime"]);u!=null&&a(e,["createTime"],u);const f=l(t,["modelVersion"]);f!=null&&a(e,["modelVersion"],f);const c=l(t,["promptFeedback"]);c!=null&&a(e,["promptFeedback"],c);const m=l(t,["responseId"]);m!=null&&a(e,["responseId"],m);const y=l(t,["usageMetadata"]);return y!=null&&a(e,["usageMetadata"],y),e}function eE(t,e){const r={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const u=l(t,["aspectRatio"]);e!==void 0&&u!=null&&a(e,["parameters","aspectRatio"],u);const f=l(t,["guidanceScale"]);if(e!==void 0&&f!=null&&a(e,["parameters","guidanceScale"],f),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=l(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&a(e,["parameters","safetySetting"],c);const m=l(t,["personGeneration"]);e!==void 0&&m!=null&&a(e,["parameters","personGeneration"],m);const y=l(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&a(e,["parameters","includeSafetyAttributes"],y);const h=l(t,["includeRaiReason"]);e!==void 0&&h!=null&&a(e,["parameters","includeRaiReason"],h);const v=l(t,["language"]);e!==void 0&&v!=null&&a(e,["parameters","language"],v);const _=l(t,["outputMimeType"]);e!==void 0&&_!=null&&a(e,["parameters","outputOptions","mimeType"],_);const T=l(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&a(e,["parameters","outputOptions","compressionQuality"],T),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=l(t,["imageSize"]);if(e!==void 0&&w!=null&&a(e,["parameters","sampleImageSize"],w),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function nE(t,e){const r={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const u=l(t,["negativePrompt"]);e!==void 0&&u!=null&&a(e,["parameters","negativePrompt"],u);const f=l(t,["numberOfImages"]);e!==void 0&&f!=null&&a(e,["parameters","sampleCount"],f);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&a(e,["parameters","aspectRatio"],c);const m=l(t,["guidanceScale"]);e!==void 0&&m!=null&&a(e,["parameters","guidanceScale"],m);const y=l(t,["seed"]);e!==void 0&&y!=null&&a(e,["parameters","seed"],y);const h=l(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&a(e,["parameters","safetySetting"],h);const v=l(t,["personGeneration"]);e!==void 0&&v!=null&&a(e,["parameters","personGeneration"],v);const _=l(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&a(e,["parameters","includeSafetyAttributes"],_);const T=l(t,["includeRaiReason"]);e!==void 0&&T!=null&&a(e,["parameters","includeRaiReason"],T);const w=l(t,["language"]);e!==void 0&&w!=null&&a(e,["parameters","language"],w);const k=l(t,["outputMimeType"]);e!==void 0&&k!=null&&a(e,["parameters","outputOptions","mimeType"],k);const x=l(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&a(e,["parameters","outputOptions","compressionQuality"],x);const D=l(t,["addWatermark"]);e!==void 0&&D!=null&&a(e,["parameters","addWatermark"],D);const B=l(t,["labels"]);e!==void 0&&B!=null&&a(e,["labels"],B);const q=l(t,["imageSize"]);e!==void 0&&q!=null&&a(e,["parameters","sampleImageSize"],q);const H=l(t,["enhancePrompt"]);return e!==void 0&&H!=null&&a(e,["parameters","enhancePrompt"],H),r}function tE(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["prompt"]);u!=null&&a(r,["instances[0]","prompt"],u);const f=l(e,["config"]);return f!=null&&eE(f,r),r}function oE(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["prompt"]);u!=null&&a(r,["instances[0]","prompt"],u);const f=l(e,["config"]);return f!=null&&nE(f,r),r}function rE(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["predictions"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(c=>gE(c))),a(e,["generatedImages"],f)}const u=l(t,["positivePromptSafetyAttributes"]);return u!=null&&a(e,["positivePromptSafetyAttributes"],Bc(u)),e}function iE(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["predictions"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(c=>yi(c))),a(e,["generatedImages"],f)}const u=l(t,["positivePromptSafetyAttributes"]);return u!=null&&a(e,["positivePromptSafetyAttributes"],zc(u)),e}function sE(t,e){const r={},i=l(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const u=l(t,["durationSeconds"]);if(e!==void 0&&u!=null&&a(e,["parameters","durationSeconds"],u),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=l(t,["aspectRatio"]);e!==void 0&&f!=null&&a(e,["parameters","aspectRatio"],f);const c=l(t,["resolution"]);e!==void 0&&c!=null&&a(e,["parameters","resolution"],c);const m=l(t,["personGeneration"]);if(e!==void 0&&m!=null&&a(e,["parameters","personGeneration"],m),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=l(t,["negativePrompt"]);e!==void 0&&y!=null&&a(e,["parameters","negativePrompt"],y);const h=l(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&a(e,["parameters","enhancePrompt"],h),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=l(t,["lastFrame"]);e!==void 0&&v!=null&&a(e,["instances[0]","lastFrame"],vi(v));const _=l(t,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(w=>u_(w))),a(e,["instances[0]","referenceImages"],T)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function lE(t,e){const r={},i=l(t,["numberOfVideos"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const u=l(t,["outputGcsUri"]);e!==void 0&&u!=null&&a(e,["parameters","storageUri"],u);const f=l(t,["fps"]);e!==void 0&&f!=null&&a(e,["parameters","fps"],f);const c=l(t,["durationSeconds"]);e!==void 0&&c!=null&&a(e,["parameters","durationSeconds"],c);const m=l(t,["seed"]);e!==void 0&&m!=null&&a(e,["parameters","seed"],m);const y=l(t,["aspectRatio"]);e!==void 0&&y!=null&&a(e,["parameters","aspectRatio"],y);const h=l(t,["resolution"]);e!==void 0&&h!=null&&a(e,["parameters","resolution"],h);const v=l(t,["personGeneration"]);e!==void 0&&v!=null&&a(e,["parameters","personGeneration"],v);const _=l(t,["pubsubTopic"]);e!==void 0&&_!=null&&a(e,["parameters","pubsubTopic"],_);const T=l(t,["negativePrompt"]);e!==void 0&&T!=null&&a(e,["parameters","negativePrompt"],T);const w=l(t,["enhancePrompt"]);e!==void 0&&w!=null&&a(e,["parameters","enhancePrompt"],w);const k=l(t,["generateAudio"]);e!==void 0&&k!=null&&a(e,["parameters","generateAudio"],k);const x=l(t,["lastFrame"]);e!==void 0&&x!=null&&a(e,["instances[0]","lastFrame"],An(x));const D=l(t,["referenceImages"]);if(e!==void 0&&D!=null){let H=D;Array.isArray(H)&&(H=H.map(W=>a_(W))),a(e,["instances[0]","referenceImages"],H)}const B=l(t,["mask"]);e!==void 0&&B!=null&&a(e,["instances[0]","mask"],l_(B));const q=l(t,["compressionQuality"]);return e!==void 0&&q!=null&&a(e,["parameters","compressionQuality"],q),r}function uE(t){const e={},r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["metadata"]);i!=null&&a(e,["metadata"],i);const u=l(t,["done"]);u!=null&&a(e,["done"],u);const f=l(t,["error"]);f!=null&&a(e,["error"],f);const c=l(t,["response","generateVideoResponse"]);return c!=null&&a(e,["response"],cE(c)),e}function aE(t){const e={},r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["metadata"]);i!=null&&a(e,["metadata"],i);const u=l(t,["done"]);u!=null&&a(e,["done"],u);const f=l(t,["error"]);f!=null&&a(e,["error"],f);const c=l(t,["response"]);return c!=null&&a(e,["response"],pE(c)),e}function dE(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["prompt"]);u!=null&&a(r,["instances[0]","prompt"],u);const f=l(e,["image"]);f!=null&&a(r,["instances[0]","image"],vi(f));const c=l(e,["video"]);c!=null&&a(r,["instances[0]","video"],Wc(c));const m=l(e,["source"]);m!=null&&mE(m,r);const y=l(e,["config"]);return y!=null&&sE(y,r),r}function fE(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["prompt"]);u!=null&&a(r,["instances[0]","prompt"],u);const f=l(e,["image"]);f!=null&&a(r,["instances[0]","image"],An(f));const c=l(e,["video"]);c!=null&&a(r,["instances[0]","video"],Yc(c));const m=l(e,["source"]);m!=null&&hE(m,r);const y=l(e,["config"]);return y!=null&&lE(y,r),r}function cE(t){const e={},r=l(t,["generatedSamples"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(c=>vE(c))),a(e,["generatedVideos"],f)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&a(e,["raiMediaFilteredCount"],i);const u=l(t,["raiMediaFilteredReasons"]);return u!=null&&a(e,["raiMediaFilteredReasons"],u),e}function pE(t){const e={},r=l(t,["videos"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(c=>EE(c))),a(e,["generatedVideos"],f)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&a(e,["raiMediaFilteredCount"],i);const u=l(t,["raiMediaFilteredReasons"]);return u!=null&&a(e,["raiMediaFilteredReasons"],u),e}function mE(t,e){const r={},i=l(t,["prompt"]);e!==void 0&&i!=null&&a(e,["instances[0]","prompt"],i);const u=l(t,["image"]);e!==void 0&&u!=null&&a(e,["instances[0]","image"],vi(u));const f=l(t,["video"]);return e!==void 0&&f!=null&&a(e,["instances[0]","video"],Wc(f)),r}function hE(t,e){const r={},i=l(t,["prompt"]);e!==void 0&&i!=null&&a(e,["instances[0]","prompt"],i);const u=l(t,["image"]);e!==void 0&&u!=null&&a(e,["instances[0]","image"],An(u));const f=l(t,["video"]);return e!==void 0&&f!=null&&a(e,["instances[0]","video"],Yc(f)),r}function gE(t){const e={},r=l(t,["_self"]);r!=null&&a(e,["image"],PE(r));const i=l(t,["raiFilteredReason"]);i!=null&&a(e,["raiFilteredReason"],i);const u=l(t,["_self"]);return u!=null&&a(e,["safetyAttributes"],Bc(u)),e}function yi(t){const e={},r=l(t,["_self"]);r!=null&&a(e,["image"],Hc(r));const i=l(t,["raiFilteredReason"]);i!=null&&a(e,["raiFilteredReason"],i);const u=l(t,["_self"]);u!=null&&a(e,["safetyAttributes"],zc(u));const f=l(t,["prompt"]);return f!=null&&a(e,["enhancedPrompt"],f),e}function yE(t){const e={},r=l(t,["_self"]);r!=null&&a(e,["mask"],Hc(r));const i=l(t,["labels"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>f)),a(e,["labels"],u)}return e}function vE(t){const e={},r=l(t,["video"]);return r!=null&&a(e,["video"],i_(r)),e}function EE(t){const e={},r=l(t,["_self"]);return r!=null&&a(e,["video"],s_(r)),e}function _E(t){const e={},r=l(t,["modelSelectionConfig"]);r!=null&&a(e,["modelConfig"],r);const i=l(t,["responseJsonSchema"]);i!=null&&a(e,["responseJsonSchema"],i);const u=l(t,["audioTimestamp"]);u!=null&&a(e,["audioTimestamp"],u);const f=l(t,["candidateCount"]);f!=null&&a(e,["candidateCount"],f);const c=l(t,["enableAffectiveDialog"]);c!=null&&a(e,["enableAffectiveDialog"],c);const m=l(t,["frequencyPenalty"]);m!=null&&a(e,["frequencyPenalty"],m);const y=l(t,["logprobs"]);y!=null&&a(e,["logprobs"],y);const h=l(t,["maxOutputTokens"]);h!=null&&a(e,["maxOutputTokens"],h);const v=l(t,["mediaResolution"]);v!=null&&a(e,["mediaResolution"],v);const _=l(t,["presencePenalty"]);_!=null&&a(e,["presencePenalty"],_);const T=l(t,["responseLogprobs"]);T!=null&&a(e,["responseLogprobs"],T);const w=l(t,["responseMimeType"]);w!=null&&a(e,["responseMimeType"],w);const k=l(t,["responseModalities"]);k!=null&&a(e,["responseModalities"],k);const x=l(t,["responseSchema"]);x!=null&&a(e,["responseSchema"],x);const D=l(t,["routingConfig"]);D!=null&&a(e,["routingConfig"],D);const B=l(t,["seed"]);B!=null&&a(e,["seed"],B);const q=l(t,["speechConfig"]);q!=null&&a(e,["speechConfig"],Jc(q));const H=l(t,["stopSequences"]);H!=null&&a(e,["stopSequences"],H);const W=l(t,["temperature"]);W!=null&&a(e,["temperature"],W);const Z=l(t,["thinkingConfig"]);Z!=null&&a(e,["thinkingConfig"],Z);const b=l(t,["topK"]);b!=null&&a(e,["topK"],b);const j=l(t,["topP"]);if(j!=null&&a(e,["topP"],j),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function TE(t,e){const r={},i=l(e,["model"]);return i!=null&&a(r,["_url","name"],he(t,i)),r}function CE(t,e){const r={},i=l(e,["model"]);return i!=null&&a(r,["_url","name"],he(t,i)),r}function SE(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=l(t,["enableWidget"]);return r!=null&&a(e,["enableWidget"],r),e}function IE(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=l(t,["timeRangeFilter"]);return r!=null&&a(e,["timeRangeFilter"],r),e}function wE(t){const e={},r=l(t,["aspectRatio"]);r!=null&&a(e,["aspectRatio"],r);const i=l(t,["imageSize"]);if(i!=null&&a(e,["imageSize"],i),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function AE(t){const e={},r=l(t,["aspectRatio"]);r!=null&&a(e,["aspectRatio"],r);const i=l(t,["imageSize"]);i!=null&&a(e,["imageSize"],i);const u=l(t,["outputMimeType"]);u!=null&&a(e,["imageOutputOptions","mimeType"],u);const f=l(t,["outputCompressionQuality"]);return f!=null&&a(e,["imageOutputOptions","compressionQuality"],f),e}function PE(t){const e={},r=l(t,["bytesBase64Encoded"]);r!=null&&a(e,["imageBytes"],dt(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Hc(t){const e={},r=l(t,["gcsUri"]);r!=null&&a(e,["gcsUri"],r);const i=l(t,["bytesBase64Encoded"]);i!=null&&a(e,["imageBytes"],dt(i));const u=l(t,["mimeType"]);return u!=null&&a(e,["mimeType"],u),e}function vi(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=l(t,["imageBytes"]);r!=null&&a(e,["bytesBase64Encoded"],dt(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function An(t){const e={},r=l(t,["gcsUri"]);r!=null&&a(e,["gcsUri"],r);const i=l(t,["imageBytes"]);i!=null&&a(e,["bytesBase64Encoded"],dt(i));const u=l(t,["mimeType"]);return u!=null&&a(e,["mimeType"],u),e}function RE(t,e,r){const i={},u=l(e,["pageSize"]);r!==void 0&&u!=null&&a(r,["_query","pageSize"],u);const f=l(e,["pageToken"]);r!==void 0&&f!=null&&a(r,["_query","pageToken"],f);const c=l(e,["filter"]);r!==void 0&&c!=null&&a(r,["_query","filter"],c);const m=l(e,["queryBase"]);return r!==void 0&&m!=null&&a(r,["_url","models_url"],kc(t,m)),i}function NE(t,e,r){const i={},u=l(e,["pageSize"]);r!==void 0&&u!=null&&a(r,["_query","pageSize"],u);const f=l(e,["pageToken"]);r!==void 0&&f!=null&&a(r,["_query","pageToken"],f);const c=l(e,["filter"]);r!==void 0&&c!=null&&a(r,["_query","filter"],c);const m=l(e,["queryBase"]);return r!==void 0&&m!=null&&a(r,["_url","models_url"],kc(t,m)),i}function xE(t,e){const r={},i=l(e,["config"]);return i!=null&&RE(t,i,r),r}function ME(t,e){const r={},i=l(e,["config"]);return i!=null&&NE(t,i,r),r}function kE(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const u=l(t,["_self"]);if(u!=null){let f=Dc(u);Array.isArray(f)&&(f=f.map(c=>Al(c))),a(e,["models"],f)}return e}function DE(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const u=l(t,["_self"]);if(u!=null){let f=Dc(u);Array.isArray(f)&&(f=f.map(c=>Pl(c))),a(e,["models"],f)}return e}function LE(t){const e={},r=l(t,["maskMode"]);r!=null&&a(e,["maskMode"],r);const i=l(t,["segmentationClasses"]);i!=null&&a(e,["maskClasses"],i);const u=l(t,["maskDilation"]);return u!=null&&a(e,["dilation"],u),e}function Al(t){const e={},r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["displayName"]);i!=null&&a(e,["displayName"],i);const u=l(t,["description"]);u!=null&&a(e,["description"],u);const f=l(t,["version"]);f!=null&&a(e,["version"],f);const c=l(t,["_self"]);c!=null&&a(e,["tunedModelInfo"],XE(c));const m=l(t,["inputTokenLimit"]);m!=null&&a(e,["inputTokenLimit"],m);const y=l(t,["outputTokenLimit"]);y!=null&&a(e,["outputTokenLimit"],y);const h=l(t,["supportedGenerationMethods"]);h!=null&&a(e,["supportedActions"],h);const v=l(t,["temperature"]);v!=null&&a(e,["temperature"],v);const _=l(t,["maxTemperature"]);_!=null&&a(e,["maxTemperature"],_);const T=l(t,["topP"]);T!=null&&a(e,["topP"],T);const w=l(t,["topK"]);w!=null&&a(e,["topK"],w);const k=l(t,["thinking"]);return k!=null&&a(e,["thinking"],k),e}function Pl(t){const e={},r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["displayName"]);i!=null&&a(e,["displayName"],i);const u=l(t,["description"]);u!=null&&a(e,["description"],u);const f=l(t,["versionId"]);f!=null&&a(e,["version"],f);const c=l(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>Kv(T))),a(e,["endpoints"],_)}const m=l(t,["labels"]);m!=null&&a(e,["labels"],m);const y=l(t,["_self"]);y!=null&&a(e,["tunedModelInfo"],ZE(y));const h=l(t,["defaultCheckpointId"]);h!=null&&a(e,["defaultCheckpointId"],h);const v=l(t,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>T)),a(e,["checkpoints"],_)}return e}function UE(t){const e={},r=l(t,["mediaResolution"]);r!=null&&a(e,["mediaResolution"],r);const i=l(t,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const u=l(t,["executableCode"]);u!=null&&a(e,["executableCode"],u);const f=l(t,["fileData"]);f!=null&&a(e,["fileData"],Ov(f));const c=l(t,["functionCall"]);c!=null&&a(e,["functionCall"],Qv(c));const m=l(t,["functionResponse"]);m!=null&&a(e,["functionResponse"],m);const y=l(t,["inlineData"]);y!=null&&a(e,["inlineData"],_v(y));const h=l(t,["text"]);h!=null&&a(e,["text"],h);const v=l(t,["thought"]);v!=null&&a(e,["thought"],v);const _=l(t,["thoughtSignature"]);_!=null&&a(e,["thoughtSignature"],_);const T=l(t,["videoMetadata"]);return T!=null&&a(e,["videoMetadata"],T),e}function FE(t){const e={},r=l(t,["productImage"]);return r!=null&&a(e,["image"],An(r)),e}function VE(t,e){const r={},i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const u=l(t,["baseSteps"]);e!==void 0&&u!=null&&a(e,["parameters","baseSteps"],u);const f=l(t,["outputGcsUri"]);e!==void 0&&f!=null&&a(e,["parameters","storageUri"],f);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const m=l(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&a(e,["parameters","safetySetting"],m);const y=l(t,["personGeneration"]);e!==void 0&&y!=null&&a(e,["parameters","personGeneration"],y);const h=l(t,["addWatermark"]);e!==void 0&&h!=null&&a(e,["parameters","addWatermark"],h);const v=l(t,["outputMimeType"]);e!==void 0&&v!=null&&a(e,["parameters","outputOptions","mimeType"],v);const _=l(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&a(e,["parameters","outputOptions","compressionQuality"],_);const T=l(t,["enhancePrompt"]);e!==void 0&&T!=null&&a(e,["parameters","enhancePrompt"],T);const w=l(t,["labels"]);return e!==void 0&&w!=null&&a(e,["labels"],w),r}function GE(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["source"]);u!=null&&HE(u,r);const f=l(e,["config"]);return f!=null&&VE(f,r),r}function qE(t){const e={},r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(u=>yi(u))),a(e,["generatedImages"],i)}return e}function HE(t,e){const r={},i=l(t,["prompt"]);e!==void 0&&i!=null&&a(e,["instances[0]","prompt"],i);const u=l(t,["personImage"]);e!==void 0&&u!=null&&a(e,["instances[0]","personImage","image"],An(u));const f=l(t,["productImages"]);if(e!==void 0&&f!=null){let c=f;Array.isArray(c)&&(c=c.map(m=>FE(m))),a(e,["instances[0]","productImages"],c)}return r}function BE(t){const e={},r=l(t,["referenceImage"]);r!=null&&a(e,["referenceImage"],An(r));const i=l(t,["referenceId"]);i!=null&&a(e,["referenceId"],i);const u=l(t,["referenceType"]);u!=null&&a(e,["referenceType"],u);const f=l(t,["maskImageConfig"]);f!=null&&a(e,["maskImageConfig"],LE(f));const c=l(t,["controlImageConfig"]);c!=null&&a(e,["controlImageConfig"],Pv(c));const m=l(t,["styleImageConfig"]);m!=null&&a(e,["styleImageConfig"],m);const y=l(t,["subjectImageConfig"]);return y!=null&&a(e,["subjectImageConfig"],y),e}function Bc(t){const e={},r=l(t,["safetyAttributes","categories"]);r!=null&&a(e,["categories"],r);const i=l(t,["safetyAttributes","scores"]);i!=null&&a(e,["scores"],i);const u=l(t,["contentType"]);return u!=null&&a(e,["contentType"],u),e}function zc(t){const e={},r=l(t,["safetyAttributes","categories"]);r!=null&&a(e,["categories"],r);const i=l(t,["safetyAttributes","scores"]);i!=null&&a(e,["scores"],i);const u=l(t,["contentType"]);return u!=null&&a(e,["contentType"],u),e}function zE(t){const e={},r=l(t,["category"]);if(r!=null&&a(e,["category"],r),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=l(t,["threshold"]);return i!=null&&a(e,["threshold"],i),e}function JE(t){const e={},r=l(t,["image"]);return r!=null&&a(e,["image"],An(r)),e}function $E(t,e){const r={},i=l(t,["mode"]);e!==void 0&&i!=null&&a(e,["parameters","mode"],i);const u=l(t,["maxPredictions"]);e!==void 0&&u!=null&&a(e,["parameters","maxPredictions"],u);const f=l(t,["confidenceThreshold"]);e!==void 0&&f!=null&&a(e,["parameters","confidenceThreshold"],f);const c=l(t,["maskDilation"]);e!==void 0&&c!=null&&a(e,["parameters","maskDilation"],c);const m=l(t,["binaryColorThreshold"]);e!==void 0&&m!=null&&a(e,["parameters","binaryColorThreshold"],m);const y=l(t,["labels"]);return e!==void 0&&y!=null&&a(e,["labels"],y),r}function WE(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["source"]);u!=null&&KE(u,r);const f=l(e,["config"]);return f!=null&&$E(f,r),r}function YE(t){const e={},r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(u=>yE(u))),a(e,["generatedMasks"],i)}return e}function KE(t,e){const r={},i=l(t,["prompt"]);e!==void 0&&i!=null&&a(e,["instances[0]","prompt"],i);const u=l(t,["image"]);e!==void 0&&u!=null&&a(e,["instances[0]","image"],An(u));const f=l(t,["scribbleImage"]);return e!==void 0&&f!=null&&a(e,["instances[0]","scribble"],JE(f)),r}function Jc(t){const e={},r=l(t,["languageCode"]);r!=null&&a(e,["languageCode"],r);const i=l(t,["voiceConfig"]);if(i!=null&&a(e,["voiceConfig"],i),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function OE(t){const e={},r=l(t,["functionCallingConfig"]);r!=null&&a(e,["functionCallingConfig"],Xv(r));const i=l(t,["retrievalConfig"]);return i!=null&&a(e,["retrievalConfig"],i),e}function QE(t){const e={},r=l(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),a(e,["functionDeclarations"],v)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const u=l(t,["computerUse"]);u!=null&&a(e,["computerUse"],u);const f=l(t,["fileSearch"]);f!=null&&a(e,["fileSearch"],f);const c=l(t,["codeExecution"]);if(c!=null&&a(e,["codeExecution"],c),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=l(t,["googleMaps"]);m!=null&&a(e,["googleMaps"],SE(m));const y=l(t,["googleSearch"]);y!=null&&a(e,["googleSearch"],IE(y));const h=l(t,["urlContext"]);return h!=null&&a(e,["urlContext"],h),e}function $c(t){const e={},r=l(t,["functionDeclarations"]);if(r!=null){let _=r;Array.isArray(_)&&(_=_.map(T=>Zv(T))),a(e,["functionDeclarations"],_)}const i=l(t,["retrieval"]);i!=null&&a(e,["retrieval"],i);const u=l(t,["googleSearchRetrieval"]);u!=null&&a(e,["googleSearchRetrieval"],u);const f=l(t,["computerUse"]);if(f!=null&&a(e,["computerUse"],f),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=l(t,["codeExecution"]);c!=null&&a(e,["codeExecution"],c);const m=l(t,["enterpriseWebSearch"]);m!=null&&a(e,["enterpriseWebSearch"],m);const y=l(t,["googleMaps"]);y!=null&&a(e,["googleMaps"],y);const h=l(t,["googleSearch"]);h!=null&&a(e,["googleSearch"],h);const v=l(t,["urlContext"]);return v!=null&&a(e,["urlContext"],v),e}function XE(t){const e={},r=l(t,["baseModel"]);r!=null&&a(e,["baseModel"],r);const i=l(t,["createTime"]);i!=null&&a(e,["createTime"],i);const u=l(t,["updateTime"]);return u!=null&&a(e,["updateTime"],u),e}function ZE(t){const e={},r=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&a(e,["baseModel"],r);const i=l(t,["createTime"]);i!=null&&a(e,["createTime"],i);const u=l(t,["updateTime"]);return u!=null&&a(e,["updateTime"],u),e}function bE(t,e){const r={},i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const u=l(t,["description"]);e!==void 0&&u!=null&&a(e,["description"],u);const f=l(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&a(e,["defaultCheckpointId"],f),r}function jE(t,e){const r={},i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const u=l(t,["description"]);e!==void 0&&u!=null&&a(e,["description"],u);const f=l(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&a(e,["defaultCheckpointId"],f),r}function e_(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","name"],he(t,i));const u=l(e,["config"]);return u!=null&&bE(u,r),r}function n_(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["config"]);return u!=null&&jE(u,r),r}function t_(t,e){const r={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const u=l(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&a(e,["parameters","safetySetting"],u);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const c=l(t,["includeRaiReason"]);e!==void 0&&c!=null&&a(e,["parameters","includeRaiReason"],c);const m=l(t,["outputMimeType"]);e!==void 0&&m!=null&&a(e,["parameters","outputOptions","mimeType"],m);const y=l(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&a(e,["parameters","outputOptions","compressionQuality"],y);const h=l(t,["enhanceInputImage"]);e!==void 0&&h!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],h);const v=l(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=l(t,["labels"]);e!==void 0&&_!=null&&a(e,["labels"],_);const T=l(t,["numberOfImages"]);e!==void 0&&T!=null&&a(e,["parameters","sampleCount"],T);const w=l(t,["mode"]);return e!==void 0&&w!=null&&a(e,["parameters","mode"],w),r}function o_(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["_url","model"],he(t,i));const u=l(e,["image"]);u!=null&&a(r,["instances[0]","image"],An(u));const f=l(e,["upscaleFactor"]);f!=null&&a(r,["parameters","upscaleConfig","upscaleFactor"],f);const c=l(e,["config"]);return c!=null&&t_(c,r),r}function r_(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["predictions"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>yi(f))),a(e,["generatedImages"],u)}return e}function i_(t){const e={},r=l(t,["uri"]);r!=null&&a(e,["uri"],r);const i=l(t,["encodedVideo"]);i!=null&&a(e,["videoBytes"],dt(i));const u=l(t,["encoding"]);return u!=null&&a(e,["mimeType"],u),e}function s_(t){const e={},r=l(t,["gcsUri"]);r!=null&&a(e,["uri"],r);const i=l(t,["bytesBase64Encoded"]);i!=null&&a(e,["videoBytes"],dt(i));const u=l(t,["mimeType"]);return u!=null&&a(e,["mimeType"],u),e}function l_(t){const e={},r=l(t,["image"]);r!=null&&a(e,["_self"],An(r));const i=l(t,["maskMode"]);return i!=null&&a(e,["maskMode"],i),e}function u_(t){const e={},r=l(t,["image"]);r!=null&&a(e,["image"],vi(r));const i=l(t,["referenceType"]);return i!=null&&a(e,["referenceType"],i),e}function a_(t){const e={},r=l(t,["image"]);r!=null&&a(e,["image"],An(r));const i=l(t,["referenceType"]);return i!=null&&a(e,["referenceType"],i),e}function Wc(t){const e={},r=l(t,["uri"]);r!=null&&a(e,["uri"],r);const i=l(t,["videoBytes"]);i!=null&&a(e,["encodedVideo"],dt(i));const u=l(t,["mimeType"]);return u!=null&&a(e,["encoding"],u),e}function Yc(t){const e={},r=l(t,["uri"]);r!=null&&a(e,["gcsUri"],r);const i=l(t,["videoBytes"]);i!=null&&a(e,["bytesBase64Encoded"],dt(i));const u=l(t,["mimeType"]);return u!=null&&a(e,["mimeType"],u),e}function d_(t,e){const r={},i=l(t,["displayName"]);return e!==void 0&&i!=null&&a(e,["displayName"],i),r}function f_(t){const e={},r=l(t,["config"]);return r!=null&&d_(r,e),e}function c_(t,e){const r={},i=l(t,["force"]);return e!==void 0&&i!=null&&a(e,["_query","force"],i),r}function p_(t){const e={},r=l(t,["name"]);r!=null&&a(e,["_url","name"],r);const i=l(t,["config"]);return i!=null&&c_(i,e),e}function m_(t){const e={},r=l(t,["name"]);return r!=null&&a(e,["_url","name"],r),e}function h_(t,e){const r={},i=l(t,["customMetadata"]);if(e!==void 0&&i!=null){let f=i;Array.isArray(f)&&(f=f.map(c=>c)),a(e,["customMetadata"],f)}const u=l(t,["chunkingConfig"]);return e!==void 0&&u!=null&&a(e,["chunkingConfig"],u),r}function g_(t){const e={},r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["metadata"]);i!=null&&a(e,["metadata"],i);const u=l(t,["done"]);u!=null&&a(e,["done"],u);const f=l(t,["error"]);f!=null&&a(e,["error"],f);const c=l(t,["response"]);return c!=null&&a(e,["response"],v_(c)),e}function y_(t){const e={},r=l(t,["fileSearchStoreName"]);r!=null&&a(e,["_url","file_search_store_name"],r);const i=l(t,["fileName"]);i!=null&&a(e,["fileName"],i);const u=l(t,["config"]);return u!=null&&h_(u,e),e}function v_(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["parent"]);i!=null&&a(e,["parent"],i);const u=l(t,["documentName"]);return u!=null&&a(e,["documentName"],u),e}function E_(t,e){const r={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const u=l(t,["pageToken"]);return e!==void 0&&u!=null&&a(e,["_query","pageToken"],u),r}function __(t){const e={},r=l(t,["config"]);return r!=null&&E_(r,e),e}function T_(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const u=l(t,["fileSearchStores"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(c=>c)),a(e,["fileSearchStores"],f)}return e}function Kc(t,e){const r={},i=l(t,["mimeType"]);e!==void 0&&i!=null&&a(e,["mimeType"],i);const u=l(t,["displayName"]);e!==void 0&&u!=null&&a(e,["displayName"],u);const f=l(t,["customMetadata"]);if(e!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>y)),a(e,["customMetadata"],m)}const c=l(t,["chunkingConfig"]);return e!==void 0&&c!=null&&a(e,["chunkingConfig"],c),r}function C_(t){const e={},r=l(t,["fileSearchStoreName"]);r!=null&&a(e,["_url","file_search_store_name"],r);const i=l(t,["config"]);return i!=null&&Kc(i,e),e}function S_(t){const e={},r=l(t,["sdkHttpResponse"]);return r!=null&&a(e,["sdkHttpResponse"],r),e}const I_="Content-Type",w_="X-Server-Timeout",A_="User-Agent",Rl="x-goog-api-client",P_="1.31.0",R_=`google-genai-sdk/${P_}`,N_="v1beta1",x_="v1beta",cc=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class M_{constructor(e){var r,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const u={};this.clientOptions.vertexai?(u.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:N_,u.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(u.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:x_,u.baseUrl="https://generativelanguage.googleapis.com/"),u.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=u,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(u,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,i){const u=[this.getRequestUrlInternal(r)];return i&&u.push(this.getBaseResourcePath()),e!==""&&u.push(e),new URL(`${u.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),u=this.constructUrl(e.path,r,i);if(e.queryParams)for(const[c,m]of Object.entries(e.queryParams))u.searchParams.append(c,String(m));let f={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else f.body=e.body;return f=await this.includeExtraHttpOptionsToRequestInit(f,r,u.toString(),e.abortSignal),this.unaryApiCall(u,f,e.httpMethod)}patchHttpOptions(e,r){const i=JSON.parse(JSON.stringify(e));for(const[u,f]of Object.entries(r))typeof f=="object"?i[u]=Object.assign(Object.assign({},i[u]),f):f!==void 0&&(i[u]=f);return i}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),u=this.constructUrl(e.path,r,i);(!u.searchParams.has("alt")||u.searchParams.get("alt")!=="sse")&&u.searchParams.set("alt","sse");let f={};return f.body=e.body,f=await this.includeExtraHttpOptionsToRequestInit(f,r,u.toString(),e.abortSignal),this.streamApiCall(u,f,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,i,u){if(r&&r.timeout||u){const f=new AbortController,c=f.signal;if(r.timeout&&r?.timeout>0){const m=setTimeout(()=>f.abort(),r.timeout);m&&typeof m.unref=="function"&&m.unref()}u&&u.addEventListener("abort",()=>{f.abort()}),e.signal=c}return r&&r.extraBody!==null&&k_(e,r.extraBody),e.headers=await this.getHeadersInternal(r,i),e}async unaryApiCall(e,r,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:i})).then(async u=>(await pc(u),new Sl(u))).catch(u=>{throw u instanceof Error?u:new Error(JSON.stringify(u))})}async streamApiCall(e,r,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:i})).then(async u=>(await pc(u),this.processStreamResponse(u))).catch(u=>{throw u instanceof Error?u:new Error(JSON.stringify(u))})}processStreamResponse(e){var r;return jt(this,arguments,function*(){const u=(r=e?.body)===null||r===void 0?void 0:r.getReader(),f=new TextDecoder("utf-8");if(!u)throw new Error("Response body is empty");try{let c="";for(;;){const{done:m,value:y}=yield Ie(u.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=f.decode(y,{stream:!0});try{const _=JSON.parse(h);if("error"in _){const T=JSON.parse(JSON.stringify(_.error)),w=T.status,k=T.code,x=`got status: ${w}. ${JSON.stringify(_)}`;if(k>=400&&k<600)throw new hi({message:x,status:k})}}catch(_){if(_.name==="ApiError")throw _}c+=h;let v=c.match(cc);for(;v;){const _=v[1];try{const T=new Response(_,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Ie(new Sl(T)),c=c.slice(v[0].length),v=c.match(cc)}catch(T){throw new Error(`exception parsing stream chunk ${_}. ${T}`)}}}}finally{u.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},r=R_+" "+this.clientOptions.userAgentExtra;return e[A_]=r,e[Rl]=r,e[I_]="application/json",e}async getHeadersInternal(e,r){const i=new Headers;if(e&&e.headers){for(const[u,f]of Object.entries(e.headers))i.append(u,f);e.timeout&&e.timeout>0&&i.append(w_,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,r),i}getFileName(e){var r;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(r=i.split(/[/\\]/).pop())!==null&&r!==void 0?r:""),i}async uploadFile(e,r){var i;const u={};r!=null&&(u.mimeType=r.mimeType,u.name=r.name,u.displayName=r.displayName),u.name&&!u.name.startsWith("files/")&&(u.name=`files/${u.name}`);const f=this.clientOptions.uploader,c=await f.stat(e);u.sizeBytes=String(c.size);const m=(i=r?.mimeType)!==null&&i!==void 0?i:c.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");u.mimeType=m;const y={file:u},h=this.getFileName(e),v=z("upload/v1beta/files",y._url),_=await this.fetchUploadUrl(v,u.sizeBytes,u.mimeType,h,y,r?.httpOptions);return f.upload(e,_,this)}async uploadFileToFileSearchStore(e,r,i){var u;const f=this.clientOptions.uploader,c=await f.stat(r),m=String(c.size),y=(u=i?.mimeType)!==null&&u!==void 0?u:c.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(r),_={};i!=null&&Kc(i,_);const T=await this.fetchUploadUrl(h,m,y,v,_,i?.httpOptions);return f.uploadToFileSearchStore(r,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r,i,u,f,c){var m;let y={};c?y=c:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r}`,"X-Goog-Upload-Header-Content-Type":`${i}`},u?{"X-Goog-Upload-File-Name":u}:{})};const h=await this.request({path:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:y});if(!h||!h?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(m=h?.headers)===null||m===void 0?void 0:m["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function pc(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const r=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const u=JSON.stringify(i);throw r>=400&&r<600?new hi({message:u,status:r}):new Error(u)}}function k_(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{const f=JSON.parse(t.body);if(typeof f=="object"&&f!==null&&!Array.isArray(f))r=f;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(f,c){const m=Object.assign({},f);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const h=c[y],v=m[y];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?m[y]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),m[y]=h)}return m}const u=i(r,e);t.body=JSON.stringify(u)}const D_="mcp_used/unknown";let L_=!1;function Oc(t){for(const e of t)if(U_(e)||typeof e=="object"&&"inputSchema"in e)return!0;return L_}function Qc(t){var e;const r=(e=t[Rl])!==null&&e!==void 0?e:"";t[Rl]=(r+` ${D_}`).trimStart()}function U_(t){return t!==null&&typeof t=="object"&&t instanceof Gl}function F_(t,e=100){return jt(this,arguments,function*(){let i,u=0;for(;u<e;){const f=yield Ie(t.listTools({cursor:i}));for(const c of f.tools)yield yield Ie(c),u++;if(!f.nextCursor)break;i=f.nextCursor}})}class Gl{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new Gl(e,r)}async initialize(){var e,r,i,u;if(this.mcpTools.length>0)return;const f={},c=[];for(const v of this.mcpClients)try{for(var m=!0,y=(r=void 0,Ko(F_(v))),h;h=await y.next(),e=h.done,!e;m=!0){u=h.value,m=!1;const _=u;c.push(_);const T=_.name;if(f[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);f[T]=v}}catch(_){r={error:_}}finally{try{!m&&!e&&(i=y.return)&&await i.call(y)}finally{if(r)throw r.error}}this.mcpTools=c,this.functionNameToMcpClient=f}async tool(){return await this.initialize(),mg(this.mcpTools,this.config)}async callTool(e){await this.initialize();const r=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const u=this.functionNameToMcpClient[i.name];let f;this.config.timeout&&(f={timeout:this.config.timeout});const c=await u.callTool({name:i.name,arguments:i.args},void 0,f);r.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return r}}async function V_(t,e,r){const i=new sg;let u;r.data instanceof Blob?u=JSON.parse(await r.data.text()):u=JSON.parse(r.data),Object.assign(i,u),e(i)}class G_{constructor(e,r,i){this.apiClient=e,this.auth=r,this.webSocketFactory=i}async connect(e){var r,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const u=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),c=B_(this.apiClient.getDefaultHeaders()),m=this.apiClient.getApiKey(),y=`${u}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateMusic?key=${m}`;let h=()=>{};const v=new Promise(H=>{h=H}),_=e.callbacks,T=function(){h({})},w=this.apiClient,k={onopen:T,onmessage:H=>{V_(w,_.onmessage,H)},onerror:(r=_?.onerror)!==null&&r!==void 0?r:function(H){},onclose:(i=_?.onclose)!==null&&i!==void 0?i:function(H){}},x=this.webSocketFactory.create(y,H_(c),k);x.connect(),await v;const q={setup:{model:he(this.apiClient,e.model)}};return x.send(JSON.stringify(q)),new q_(x,this.apiClient)}}class q_{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=fv(e);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=dv(e);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const r={playbackControl:e};this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(Zt.PLAY)}pause(){this.sendPlaybackControl(Zt.PAUSE)}stop(){this.sendPlaybackControl(Zt.STOP)}resetContext(){this.sendPlaybackControl(Zt.RESET_CONTEXT)}close(){this.conn.close()}}function H_(t){const e={};return t.forEach((r,i)=>{e[i]=r}),e}function B_(t){const e=new Headers;for(const[r,i]of Object.entries(t))e.append(r,i);return e}const z_="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function J_(t,e,r){const i=new ig;let u;r.data instanceof Blob?u=await r.data.text():r.data instanceof ArrayBuffer?u=new TextDecoder().decode(r.data):u=r.data;const f=JSON.parse(u);if(t.isVertexAI()){const c=mv(f);Object.assign(i,c)}else Object.assign(i,f);e(i)}class $_{constructor(e,r,i){this.apiClient=e,this.auth=r,this.webSocketFactory=i,this.music=new G_(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,i,u,f,c,m;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&Oc(e.config.tools)&&Qc(_);const T=O_(_);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v);else{const ee=this.apiClient.getApiKey();let ie="BidiGenerateContent",ve="key";ee?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ie="BidiGenerateContentConstrained",ve="access_token"),v=`${y}/ws/google.ai.generativelanguage.${h}.GenerativeService.${ie}?${ve}=${ee}`}let w=()=>{};const k=new Promise(ee=>{w=ee}),x=e.callbacks,D=function(){var ee;(ee=x?.onopen)===null||ee===void 0||ee.call(x),w({})},B=this.apiClient,q={onopen:D,onmessage:ee=>{J_(B,x.onmessage,ee)},onerror:(r=x?.onerror)!==null&&r!==void 0?r:function(ee){},onclose:(i=x?.onclose)!==null&&i!==void 0?i:function(ee){}},H=this.webSocketFactory.create(v,K_(T),q);H.connect(),await k;let W=he(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&W.startsWith("publishers/")){const ee=this.apiClient.getProject(),ie=this.apiClient.getLocation();W=`projects/${ee}/locations/${ie}/`+W}let Z={};this.apiClient.isVertexAI()&&((u=e.config)===null||u===void 0?void 0:u.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[fi.AUDIO]}:e.config.responseModalities=[fi.AUDIO]),!((f=e.config)===null||f===void 0)&&f.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const b=(m=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&m!==void 0?m:[],j=[];for(const ee of b)if(this.isCallableTool(ee)){const ie=ee;j.push(await ie.tool())}else j.push(ee);j.length>0&&(e.config.tools=j);const se={model:W,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Z=av(this.apiClient,se):Z=uv(this.apiClient,se),delete Z.config,H.send(JSON.stringify(Z)),new Y_(H,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const W_={turnComplete:!0};class Y_{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let i=[];try{i=yn(r.turns),e.isVertexAI()||(i=i.map(u=>gi(u)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:i,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let i=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?i=r.functionResponses:i=[r.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const f of i){if(typeof f!="object"||f===null||!("name"in f)||!("response"in f))throw new Error(`Could not parse function response, type '${typeof f}'.`);if(!e.isVertexAI()&&!("id"in f))throw new Error(z_)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},W_),e);const r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:pv(e)}:r={realtimeInput:cv(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function K_(t){const e={};return t.forEach((r,i)=>{e[i]=r}),e}function O_(t){const e=new Headers;for(const[r,i]of Object.entries(t))e.append(r,i);return e}const mc=10;function hc(t){var e,r,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let u=!1;for(const c of(r=t?.tools)!==null&&r!==void 0?r:[])if(eo(c)){u=!0;break}if(!u)return!0;const f=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return f&&(f<0||!Number.isInteger(f))||f==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0):!1}function eo(t){return"callTool"in t&&typeof t.callTool=="function"}function Q_(t){var e,r,i;return(i=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(u=>eo(u)))!==null&&i!==void 0?i:!1}function gc(t){var e;const r=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,u)=>{if(eo(i))return;const f=i;f.functionDeclarations&&f.functionDeclarations.length>0&&r.push(u)}),r}function yc(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class X_ extends Bn{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var i,u,f,c,m;const y=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!Q_(r)||hc(r.config))return await this.generateContentInternal(y);const h=gc(r);if(h.length>0){const x=h.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let v,_;const T=yn(y.contents),w=(f=(u=(i=y.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||u===void 0?void 0:u.maximumRemoteCalls)!==null&&f!==void 0?f:mc;let k=0;for(;k<w&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const x=v.candidates[0].content,D=[];for(const B of(m=(c=r.config)===null||c===void 0?void 0:c.tools)!==null&&m!==void 0?m:[])if(eo(B)){const H=await B.callTool(v.functionCalls);D.push(...H)}k++,_={role:"user",parts:D},y.contents=yn(y.contents),y.contents.push(x),y.contents.push(_),yc(y.config)&&(T.push(x),T.push(_))}return yc(y.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async r=>{var i,u,f,c,m;if(this.maybeMoveToResponseJsonSchem(r),hc(r.config)){const _=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(_)}const y=gc(r);if(y.length>0){const _=y.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(f=(u=(i=r?.config)===null||i===void 0?void 0:i.toolConfig)===null||u===void 0?void 0:u.functionCallingConfig)===null||f===void 0?void 0:f.streamFunctionCallArguments,v=(m=(c=r?.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||m===void 0?void 0:m.disable;if(h&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(i=>{var u;let f;const c=[];if(i?.generatedImages)for(const y of i.generatedImages)y&&y?.safetyAttributes&&((u=y?.safetyAttributes)===null||u===void 0?void 0:u.contentType)==="Positive Prompt"?f=y?.safetyAttributes:c.push(y);let m;return f?m={generatedImages:c,positivePromptSafetyAttributes:f,sdkHttpResponse:i.sdkHttpResponse}:m={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},m}),this.list=async r=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),r?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new It(Hn.PAGED_ITEM_MODELS,m=>this.listInternal(m),await this.listInternal(c),c)},this.editImage=async r=>{const i={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(i.referenceImages=r.referenceImages.map(u=>u.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async r=>{let i={numberOfImages:1,mode:"upscale"};r.config&&(i=Object.assign(Object.assign({},i),r.config));const u={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:i};return await this.upscaleImageInternal(u)},this.generateVideos=async r=>{var i,u,f,c,m,y;if((r.prompt||r.image||r.video)&&r.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=r.video)===null||i===void 0)&&i.uri&&(!((u=r.video)===null||u===void 0)&&u.videoBytes)?r.video={uri:r.video.uri,mimeType:r.video.mimeType}:!((c=(f=r.source)===null||f===void 0?void 0:f.video)===null||c===void 0)&&c.uri&&(!((y=(m=r.source)===null||m===void 0?void 0:m.video)===null||y===void 0)&&y.videoBytes)&&(r.source.video={uri:r.source.video.uri,mimeType:r.source.video.mimeType})),await this.generateVideosInternal(r)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,i,u;const f=(r=e.config)===null||r===void 0?void 0:r.tools;if(!f)return e;const c=await Promise.all(f.map(async y=>eo(y)?await y.tool():y)),m={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(m.config.tools=c,e.config&&e.config.tools&&Oc(e.config.tools)){const y=(u=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&u!==void 0?u:{};let h=Object.assign({},y);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Qc(h),m.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return m}async initAfcToolsMap(e){var r,i,u;const f=new Map;for(const c of(i=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&i!==void 0?i:[])if(eo(c)){const m=c,y=await m.tool();for(const h of(u=y.functionDeclarations)!==null&&u!==void 0?u:[]){if(!h.name)throw new Error("Function declaration name is required.");if(f.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);f.set(h.name,m)}}return f}async processAfcStream(e){var r,i,u;const f=(u=(i=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&u!==void 0?u:mc;let c=!1,m=0;const y=await this.initAfcToolsMap(e);return(function(h,v,_){var T,w;return jt(this,arguments,function*(){for(var k,x,D,B;m<f;){c&&(m++,c=!1);const Z=yield Ie(h.processParamsMaybeAddMcpUsage(_)),b=yield Ie(h.generateContentStreamInternal(Z)),j=[],se=[];try{for(var q=!0,H=(x=void 0,Ko(b)),W;W=yield Ie(H.next()),k=W.done,!k;q=!0){B=W.value,q=!1;const ee=B;if(yield yield Ie(ee),ee.candidates&&(!((T=ee.candidates[0])===null||T===void 0)&&T.content)){se.push(ee.candidates[0].content);for(const ie of(w=ee.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(m<f&&ie.functionCall){if(!ie.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ie.functionCall.name)){const ve=yield Ie(v.get(ie.functionCall.name).callTool([ie.functionCall]));j.push(...ve)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ie.functionCall.name}`)}}}}catch(ee){x={error:ee}}finally{try{!q&&!k&&(D=H.return)&&(yield Ie(D.call(H)))}finally{if(x)throw x.error}}if(j.length>0){c=!0;const ee=new Wo;ee.candidates=[{content:{role:"user",parts:j}}],yield yield Ie(ee);const ie=[];ie.push(...se),ie.push({role:"user",parts:j});const ve=yn(_.contents).concat(ie);_.contents=ve}else break}})})(this,y,e)}async generateContentInternal(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=ac(this.apiClient,e);return m=z("{model}:generateContent",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=fc(v),T=new Wo;return Object.assign(T,_),T})}else{const h=uc(this.apiClient,e);return m=z("{model}:generateContent",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=dc(v),T=new Wo;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=ac(this.apiClient,e);return m=z("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(_){return jt(this,arguments,function*(){var T,w,k,x;try{for(var D=!0,B=Ko(_),q;q=yield Ie(B.next()),T=q.done,!T;D=!0){x=q.value,D=!1;const H=x,W=fc(yield Ie(H.json()));W.sdkHttpResponse={headers:H.headers};const Z=new Wo;Object.assign(Z,W),yield yield Ie(Z)}}catch(H){w={error:H}}finally{try{!D&&!T&&(k=B.return)&&(yield Ie(k.call(B)))}finally{if(w)throw w.error}}})})}else{const h=uc(this.apiClient,e);return m=z("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}),c.then(function(_){return jt(this,arguments,function*(){var T,w,k,x;try{for(var D=!0,B=Ko(_),q;q=yield Ie(B.next()),T=q.done,!T;D=!0){x=q.value,D=!1;const H=x,W=dc(yield Ie(H.json()));W.sdkHttpResponse={headers:H.headers};const Z=new Wo;Object.assign(Z,W),yield yield Ie(Z)}}catch(H){w={error:H}}finally{try{!D&&!T&&(k=B.return)&&(yield Ie(k.call(B)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=$v(this.apiClient,e);return m=z("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Yv(v),T=new Wf;return Object.assign(T,_),T})}else{const h=Jv(this.apiClient,e);return m=z("{model}:batchEmbedContents",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Wv(v),T=new Wf;return Object.assign(T,_),T})}}async generateImagesInternal(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=oE(this.apiClient,e);return m=z("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=iE(v),T=new Yf;return Object.assign(T,_),T})}else{const h=tE(this.apiClient,e);return m=z("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=rE(v),T=new Yf;return Object.assign(T,_),T})}}async editImageInternal(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI()){const m=qv(this.apiClient,e);return f=z("{model}:predict",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),u.then(y=>{const h=Hv(y),v=new Oh;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI()){const m=o_(this.apiClient,e);return f=z("{model}:predict",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),u.then(y=>{const h=r_(y),v=new Qh;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI()){const m=GE(this.apiClient,e);return f=z("{model}:predict",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const h=qE(y),v=new Xh;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI()){const m=WE(this.apiClient,e);return f=z("{model}:predict",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const h=YE(y),v=new Zh;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=CE(this.apiClient,e);return m=z("{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Pl(v))}else{const h=TE(this.apiClient,e);return m=z("{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),c.then(v=>Al(v))}}async listInternal(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=ME(this.apiClient,e);return m=z("{models_url}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=DE(v),T=new Kf;return Object.assign(T,_),T})}else{const h=xE(this.apiClient,e);return m=z("{models_url}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=kE(v),T=new Kf;return Object.assign(T,_),T})}}async update(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=n_(this.apiClient,e);return m=z("{model}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Pl(v))}else{const h=e_(this.apiClient,e);return m=z("{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),c.then(v=>Al(v))}}async delete(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=Uv(this.apiClient,e);return m=z("{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Vv(v),T=new Of;return Object.assign(T,_),T})}else{const h=Lv(this.apiClient,e);return m=z("{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Fv(v),T=new Of;return Object.assign(T,_),T})}}async countTokens(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=Mv(this.apiClient,e);return m=z("{model}:countTokens",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Dv(v),T=new Qf;return Object.assign(T,_),T})}else{const h=xv(this.apiClient,e);return m=z("{model}:countTokens",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=kv(v),T=new Qf;return Object.assign(T,_),T})}}async computeTokens(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI()){const m=Sv(this.apiClient,e);return f=z("{model}:computeTokens",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),u.then(y=>{const h=Iv(y),v=new bh;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=fE(this.apiClient,e);return m=z("{model}:predictLongRunning",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>{const _=aE(v),T=new ci;return Object.assign(T,_),T})}else{const h=dE(this.apiClient,e);return m=z("{model}:predictLongRunning",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),c.then(v=>{const _=uE(v),T=new ci;return Object.assign(T,_),T})}}}class Z_ extends Bn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const r=e.operation,i=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const u=r.name.split("/operations/")[0];let f;i&&"httpOptions"in i&&(f=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:u,config:{httpOptions:f}});return r._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const u=await this.getVideosOperationInternal({operationName:r.name,config:i});return r._fromAPIResponse({apiResponse:u,_isVertexAI:!1})}}async get(e){const r=e.operation,i=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const u=r.name.split("/operations/")[0];let f;i&&"httpOptions"in i&&(f=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:u,config:{httpOptions:f}});return r._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const u=await this.getVideosOperationInternal({operationName:r.name,config:i});return r._fromAPIResponse({apiResponse:u,_isVertexAI:!1})}}async getVideosOperationInternal(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=zh(e);return m=z("{operationName}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c}else{const h=Bh(e);return m=z("{operationName}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI()){const m=Lh(e);return f=z("{resourceName}:fetchPredictOperation",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u}else throw new Error("This method is only supported by the Vertex AI.")}}function b_(t){const e={},r=l(t,["data"]);if(r!=null&&a(e,["data"],r),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function j_(t){const e={},r=l(t,["parts"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>uT(f))),a(e,["parts"],u)}const i=l(t,["role"]);return i!=null&&a(e,["role"],i),e}function eT(t,e,r){const i={},u=l(e,["expireTime"]);r!==void 0&&u!=null&&a(r,["expireTime"],u);const f=l(e,["newSessionExpireTime"]);r!==void 0&&f!=null&&a(r,["newSessionExpireTime"],f);const c=l(e,["uses"]);r!==void 0&&c!=null&&a(r,["uses"],c);const m=l(e,["liveConnectConstraints"]);r!==void 0&&m!=null&&a(r,["bidiGenerateContentSetup"],lT(t,m));const y=l(e,["lockAdditionalFields"]);return r!==void 0&&y!=null&&a(r,["fieldMask"],y),i}function nT(t,e){const r={},i=l(e,["config"]);return i!=null&&a(r,["config"],eT(t,i,r)),r}function tT(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function oT(t){const e={},r=l(t,["id"]);r!=null&&a(e,["id"],r);const i=l(t,["args"]);i!=null&&a(e,["args"],i);const u=l(t,["name"]);if(u!=null&&a(e,["name"],u),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rT(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=l(t,["enableWidget"]);return r!=null&&a(e,["enableWidget"],r),e}function iT(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=l(t,["timeRangeFilter"]);return r!=null&&a(e,["timeRangeFilter"],r),e}function sT(t,e){const r={},i=l(t,["generationConfig"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig"],i);const u=l(t,["responseModalities"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","responseModalities"],u);const f=l(t,["temperature"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","temperature"],f);const c=l(t,["topP"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","topP"],c);const m=l(t,["topK"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","topK"],m);const y=l(t,["maxOutputTokens"]);e!==void 0&&y!=null&&a(e,["setup","generationConfig","maxOutputTokens"],y);const h=l(t,["mediaResolution"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","mediaResolution"],h);const v=l(t,["seed"]);e!==void 0&&v!=null&&a(e,["setup","generationConfig","seed"],v);const _=l(t,["speechConfig"]);e!==void 0&&_!=null&&a(e,["setup","generationConfig","speechConfig"],Vl(_));const T=l(t,["thinkingConfig"]);e!==void 0&&T!=null&&a(e,["setup","generationConfig","thinkingConfig"],T);const w=l(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],w);const k=l(t,["systemInstruction"]);e!==void 0&&k!=null&&a(e,["setup","systemInstruction"],j_(Oe(k)));const x=l(t,["tools"]);if(e!==void 0&&x!=null){let b=to(x);Array.isArray(b)&&(b=b.map(j=>dT(no(j)))),a(e,["setup","tools"],b)}const D=l(t,["sessionResumption"]);e!==void 0&&D!=null&&a(e,["setup","sessionResumption"],aT(D));const B=l(t,["inputAudioTranscription"]);e!==void 0&&B!=null&&a(e,["setup","inputAudioTranscription"],B);const q=l(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&a(e,["setup","outputAudioTranscription"],q);const H=l(t,["realtimeInputConfig"]);e!==void 0&&H!=null&&a(e,["setup","realtimeInputConfig"],H);const W=l(t,["contextWindowCompression"]);e!==void 0&&W!=null&&a(e,["setup","contextWindowCompression"],W);const Z=l(t,["proactivity"]);return e!==void 0&&Z!=null&&a(e,["setup","proactivity"],Z),r}function lT(t,e){const r={},i=l(e,["model"]);i!=null&&a(r,["setup","model"],he(t,i));const u=l(e,["config"]);return u!=null&&a(r,["config"],sT(u,r)),r}function uT(t){const e={},r=l(t,["mediaResolution"]);r!=null&&a(e,["mediaResolution"],r);const i=l(t,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const u=l(t,["executableCode"]);u!=null&&a(e,["executableCode"],u);const f=l(t,["fileData"]);f!=null&&a(e,["fileData"],tT(f));const c=l(t,["functionCall"]);c!=null&&a(e,["functionCall"],oT(c));const m=l(t,["functionResponse"]);m!=null&&a(e,["functionResponse"],m);const y=l(t,["inlineData"]);y!=null&&a(e,["inlineData"],b_(y));const h=l(t,["text"]);h!=null&&a(e,["text"],h);const v=l(t,["thought"]);v!=null&&a(e,["thought"],v);const _=l(t,["thoughtSignature"]);_!=null&&a(e,["thoughtSignature"],_);const T=l(t,["videoMetadata"]);return T!=null&&a(e,["videoMetadata"],T),e}function aT(t){const e={},r=l(t,["handle"]);if(r!=null&&a(e,["handle"],r),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function dT(t){const e={},r=l(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),a(e,["functionDeclarations"],v)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const u=l(t,["computerUse"]);u!=null&&a(e,["computerUse"],u);const f=l(t,["fileSearch"]);f!=null&&a(e,["fileSearch"],f);const c=l(t,["codeExecution"]);if(c!=null&&a(e,["codeExecution"],c),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const m=l(t,["googleMaps"]);m!=null&&a(e,["googleMaps"],rT(m));const y=l(t,["googleSearch"]);y!=null&&a(e,["googleSearch"],iT(y));const h=l(t,["urlContext"]);return h!=null&&a(e,["urlContext"],h),e}function fT(t){const e=[];for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const u=Object.keys(i).map(f=>`${r}.${f}`);e.push(...u)}else e.push(r)}return e.join(",")}function cT(t,e){let r=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const f=i.setup;typeof f=="object"&&f!==null?(t.bidiGenerateContentSetup=f,r=f):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const u=t.fieldMask;if(r){const f=fT(r);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)f?t.fieldMask=f:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&u!==null&&Array.isArray(u)&&u.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let m=[];u.length>0&&(m=u.map(h=>c.includes(h)?`generationConfig.${h}`:h));const y=[];f&&y.push(f),m.length>0&&y.push(...m),y.length>0?t.fieldMask=y.join(","):delete t.fieldMask}else delete t.fieldMask}else u!==null&&Array.isArray(u)&&u.length>0?t.fieldMask=u.join(","):delete t.fieldMask;return t}class pT extends Bn{constructor(e){super(),this.apiClient=e}async create(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const m=nT(this.apiClient,e);f=z("auth_tokens",m._url),c=m._query,delete m.config,delete m._url,delete m._query;const y=cT(m,e.config);return u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),u.then(h=>h)}}}function mT(t,e){const r={},i=l(t,["force"]);return e!==void 0&&i!=null&&a(e,["_query","force"],i),r}function hT(t){const e={},r=l(t,["name"]);r!=null&&a(e,["_url","name"],r);const i=l(t,["config"]);return i!=null&&mT(i,e),e}function gT(t){const e={},r=l(t,["name"]);return r!=null&&a(e,["_url","name"],r),e}function yT(t,e){const r={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const u=l(t,["pageToken"]);return e!==void 0&&u!=null&&a(e,["_query","pageToken"],u),r}function vT(t){const e={},r=l(t,["parent"]);r!=null&&a(e,["_url","parent"],r);const i=l(t,["config"]);return i!=null&&yT(i,e),e}function ET(t){const e={},r=l(t,["sdkHttpResponse"]);r!=null&&a(e,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const u=l(t,["documents"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(c=>c)),a(e,["documents"],f)}return e}class _T extends Bn{constructor(e){super(),this.apiClient=e,this.list=async r=>new It(Hn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:r.parent,config:i.config}),await this.listInternal(r),r)}async get(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=gT(e);return f=z("{name}",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var r,i;let u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=hT(e);u=z("{name}",c._url),f=c._query,delete c._url,delete c._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=vT(e);return f=z("{parent}/documents",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const h=ET(y),v=new jh;return Object.assign(v,h),v})}}}class TT extends Bn{constructor(e,r=new _T(e)){super(),this.apiClient=e,this.documents=r,this.list=async(i={})=>new It(Hn.PAGED_ITEM_FILE_SEARCH_STORES,u=>this.listInternal(u),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=f_(e);return f=z("fileSearchStores",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async get(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=m_(e);return f=z("{name}",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var r,i;let u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=p_(e);u=z("{name}",c._url),f=c._query,delete c._url,delete c._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=__(e);return f=z("fileSearchStores",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const h=T_(y),v=new eg;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=C_(e);return f=z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const h=S_(y),v=new ng;return Object.assign(v,h),v})}}async importFile(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=y_(e);return f=z("{file_search_store_name}:importFile",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const h=g_(y),v=new kl;return Object.assign(v,h),v})}}}function CT(t,e){const r={},i=l(t,["name"]);return i!=null&&a(r,["_url","name"],i),r}function ST(t,e){const r={},i=l(t,["name"]);return i!=null&&a(r,["_url","name"],i),r}function IT(t,e){const r={},i=l(t,["sdkHttpResponse"]);return i!=null&&a(r,["sdkHttpResponse"],i),r}function wT(t,e){const r={},i=l(t,["sdkHttpResponse"]);return i!=null&&a(r,["sdkHttpResponse"],i),r}function AT(t,e,r){const i={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const u=l(t,["tunedModelDisplayName"]);if(e!==void 0&&u!=null&&a(e,["displayName"],u),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const f=l(t,["epochCount"]);e!==void 0&&f!=null&&a(e,["tuningTask","hyperparameters","epochCount"],f);const c=l(t,["learningRateMultiplier"]);if(c!=null&&a(i,["tuningTask","hyperparameters","learningRateMultiplier"],c),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const m=l(t,["batchSize"]);e!==void 0&&m!=null&&a(e,["tuningTask","hyperparameters","batchSize"],m);const y=l(t,["learningRate"]);if(e!==void 0&&y!=null&&a(e,["tuningTask","hyperparameters","learningRate"],y),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function PT(t,e,r){const i={};let u=l(r,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const w=l(t,["validationDataset"]);e!==void 0&&w!=null&&a(e,["supervisedTuningSpec"],vc(w))}else if(u==="PREFERENCE_TUNING"){const w=l(t,["validationDataset"]);e!==void 0&&w!=null&&a(e,["preferenceOptimizationSpec"],vc(w))}const f=l(t,["tunedModelDisplayName"]);e!==void 0&&f!=null&&a(e,["tunedModelDisplayName"],f);const c=l(t,["description"]);e!==void 0&&c!=null&&a(e,["description"],c);let m=l(r,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=l(t,["epochCount"]);e!==void 0&&w!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(m==="PREFERENCE_TUNING"){const w=l(t,["epochCount"]);e!==void 0&&w!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let y=l(r,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const w=l(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(y==="PREFERENCE_TUNING"){const w=l(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=l(r,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=l(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=l(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&a(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let v=l(r,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const w=l(t,["adapterSize"]);e!==void 0&&w!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(v==="PREFERENCE_TUNING"){const w=l(t,["adapterSize"]);e!==void 0&&w!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=l(t,["labels"]);e!==void 0&&_!=null&&a(e,["labels"],_);const T=l(t,["beta"]);return e!==void 0&&T!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function RT(t,e){const r={},i=l(t,["baseModel"]);i!=null&&a(r,["baseModel"],i);const u=l(t,["preTunedModel"]);u!=null&&a(r,["preTunedModel"],u);const f=l(t,["trainingDataset"]);f!=null&&qT(f);const c=l(t,["config"]);return c!=null&&AT(c,r),r}function NT(t,e){const r={},i=l(t,["baseModel"]);i!=null&&a(r,["baseModel"],i);const u=l(t,["preTunedModel"]);u!=null&&a(r,["preTunedModel"],u);const f=l(t,["trainingDataset"]);f!=null&&HT(f,r,e);const c=l(t,["config"]);return c!=null&&PT(c,r,e),r}function xT(t,e){const r={},i=l(t,["name"]);return i!=null&&a(r,["_url","name"],i),r}function MT(t,e){const r={},i=l(t,["name"]);return i!=null&&a(r,["_url","name"],i),r}function kT(t,e,r){const i={},u=l(t,["pageSize"]);e!==void 0&&u!=null&&a(e,["_query","pageSize"],u);const f=l(t,["pageToken"]);e!==void 0&&f!=null&&a(e,["_query","pageToken"],f);const c=l(t,["filter"]);return e!==void 0&&c!=null&&a(e,["_query","filter"],c),i}function DT(t,e,r){const i={},u=l(t,["pageSize"]);e!==void 0&&u!=null&&a(e,["_query","pageSize"],u);const f=l(t,["pageToken"]);e!==void 0&&f!=null&&a(e,["_query","pageToken"],f);const c=l(t,["filter"]);return e!==void 0&&c!=null&&a(e,["_query","filter"],c),i}function LT(t,e){const r={},i=l(t,["config"]);return i!=null&&kT(i,r),r}function UT(t,e){const r={},i=l(t,["config"]);return i!=null&&DT(i,r),r}function FT(t,e){const r={},i=l(t,["sdkHttpResponse"]);i!=null&&a(r,["sdkHttpResponse"],i);const u=l(t,["nextPageToken"]);u!=null&&a(r,["nextPageToken"],u);const f=l(t,["tunedModels"]);if(f!=null){let c=f;Array.isArray(c)&&(c=c.map(m=>Xc(m))),a(r,["tuningJobs"],c)}return r}function VT(t,e){const r={},i=l(t,["sdkHttpResponse"]);i!=null&&a(r,["sdkHttpResponse"],i);const u=l(t,["nextPageToken"]);u!=null&&a(r,["nextPageToken"],u);const f=l(t,["tuningJobs"]);if(f!=null){let c=f;Array.isArray(c)&&(c=c.map(m=>Nl(m))),a(r,["tuningJobs"],c)}return r}function GT(t,e){const r={},i=l(t,["name"]);i!=null&&a(r,["model"],i);const u=l(t,["name"]);return u!=null&&a(r,["endpoint"],u),r}function qT(t,e){const r={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=l(t,["examples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>f)),a(r,["examples","examples"],u)}return r}function HT(t,e,r){const i={};let u=l(r,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const c=l(t,["gcsUri"]);e!==void 0&&c!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(u==="PREFERENCE_TUNING"){const c=l(t,["gcsUri"]);e!==void 0&&c!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let f=l(r,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const c=l(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(f==="PREFERENCE_TUNING"){const c=l(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Xc(t,e){const r={},i=l(t,["sdkHttpResponse"]);i!=null&&a(r,["sdkHttpResponse"],i);const u=l(t,["name"]);u!=null&&a(r,["name"],u);const f=l(t,["state"]);f!=null&&a(r,["state"],xc(f));const c=l(t,["createTime"]);c!=null&&a(r,["createTime"],c);const m=l(t,["tuningTask","startTime"]);m!=null&&a(r,["startTime"],m);const y=l(t,["tuningTask","completeTime"]);y!=null&&a(r,["endTime"],y);const h=l(t,["updateTime"]);h!=null&&a(r,["updateTime"],h);const v=l(t,["description"]);v!=null&&a(r,["description"],v);const _=l(t,["baseModel"]);_!=null&&a(r,["baseModel"],_);const T=l(t,["_self"]);return T!=null&&a(r,["tunedModel"],GT(T)),r}function Nl(t,e){const r={},i=l(t,["sdkHttpResponse"]);i!=null&&a(r,["sdkHttpResponse"],i);const u=l(t,["name"]);u!=null&&a(r,["name"],u);const f=l(t,["state"]);f!=null&&a(r,["state"],xc(f));const c=l(t,["createTime"]);c!=null&&a(r,["createTime"],c);const m=l(t,["startTime"]);m!=null&&a(r,["startTime"],m);const y=l(t,["endTime"]);y!=null&&a(r,["endTime"],y);const h=l(t,["updateTime"]);h!=null&&a(r,["updateTime"],h);const v=l(t,["error"]);v!=null&&a(r,["error"],v);const _=l(t,["description"]);_!=null&&a(r,["description"],_);const T=l(t,["baseModel"]);T!=null&&a(r,["baseModel"],T);const w=l(t,["tunedModel"]);w!=null&&a(r,["tunedModel"],w);const k=l(t,["preTunedModel"]);k!=null&&a(r,["preTunedModel"],k);const x=l(t,["supervisedTuningSpec"]);x!=null&&a(r,["supervisedTuningSpec"],x);const D=l(t,["preferenceOptimizationSpec"]);D!=null&&a(r,["preferenceOptimizationSpec"],D);const B=l(t,["tuningDataStats"]);B!=null&&a(r,["tuningDataStats"],B);const q=l(t,["encryptionSpec"]);q!=null&&a(r,["encryptionSpec"],q);const H=l(t,["partnerModelTuningSpec"]);H!=null&&a(r,["partnerModelTuningSpec"],H);const W=l(t,["customBaseModel"]);W!=null&&a(r,["customBaseModel"],W);const Z=l(t,["experiment"]);Z!=null&&a(r,["experiment"],Z);const b=l(t,["labels"]);b!=null&&a(r,["labels"],b);const j=l(t,["outputUri"]);j!=null&&a(r,["outputUri"],j);const se=l(t,["pipelineJob"]);se!=null&&a(r,["pipelineJob"],se);const ee=l(t,["serviceAccount"]);ee!=null&&a(r,["serviceAccount"],ee);const ie=l(t,["tunedModelDisplayName"]);ie!=null&&a(r,["tunedModelDisplayName"],ie);const ve=l(t,["veoTuningSpec"]);return ve!=null&&a(r,["veoTuningSpec"],ve),r}function BT(t,e){const r={},i=l(t,["sdkHttpResponse"]);i!=null&&a(r,["sdkHttpResponse"],i);const u=l(t,["name"]);u!=null&&a(r,["name"],u);const f=l(t,["metadata"]);f!=null&&a(r,["metadata"],f);const c=l(t,["done"]);c!=null&&a(r,["done"],c);const m=l(t,["error"]);return m!=null&&a(r,["error"],m),r}function vc(t,e){const r={},i=l(t,["gcsUri"]);i!=null&&a(r,["validationDatasetUri"],i);const u=l(t,["vertexDatasetResource"]);return u!=null&&a(r,["validationDatasetUri"],u),r}class zT extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new It(Hn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(r),r),this.get=async r=>await this.getInternal(r),this.tune=async r=>{var i;if(this.apiClient.isVertexAI())if(r.baseModel.startsWith("projects/")){const u={tunedModelName:r.baseModel};!((i=r.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(u.checkpointId=r.config.preTunedModelCheckpointId);const f=Object.assign(Object.assign({},r),{preTunedModel:u});return f.baseModel=void 0,await this.tuneInternal(f)}else{const u=Object.assign({},r);return await this.tuneInternal(u)}else{const u=Object.assign({},r),f=await this.tuneMldevInternal(u);let c="";return f.metadata!==void 0&&f.metadata.tunedModel!==void 0?c=f.metadata.tunedModel:f.name!==void 0&&f.name.includes("/operations/")&&(c=f.name.split("/operations/")[0]),{name:c,state:Cl.JOB_STATE_QUEUED}}}}async getInternal(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=MT(e);return m=z("{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>Nl(v))}else{const h=xT(e);return m=z("{name}",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>Xc(v))}}async listInternal(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=UT(e);return m=z("tuningJobs",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=VT(v),T=new Xf;return Object.assign(T,_),T})}else{const h=LT(e);return m=z("tunedModels",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=FT(v),T=new Xf;return Object.assign(T,_),T})}}async cancel(e){var r,i,u,f;let c,m="",y={};if(this.apiClient.isVertexAI()){const h=ST(e);return m=z("{name}:cancel",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=wT(v),T=new Zf;return Object.assign(T,_),T})}else{const h=CT(e);return m=z("{name}:cancel",h._url),y=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:m,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=IT(v),T=new Zf;return Object.assign(T,_),T})}}async tuneInternal(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI()){const m=NT(e,e);return f=z("tuningJobs",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),u.then(y=>Nl(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,i;let u,f="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=RT(e);return f=z("tunedModels",m._url),c=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),u.then(y=>BT(y))}}}class JT{async download(e,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const $T=1024*1024*8,WT=3,YT=1e3,KT=2,mi="x-goog-upload-status";async function OT(t,e,r){var i;const u=await Zc(t,e,r),f=await u?.json();if(((i=u?.headers)===null||i===void 0?void 0:i[mi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function QT(t,e,r){var i;const u=await Zc(t,e,r),f=await u?.json();if(((i=u?.headers)===null||i===void 0?void 0:i[mi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=Ic(f),m=new Dl;return Object.assign(m,c),m}async function Zc(t,e,r){var i,u;let f=0,c=0,m=new Sl(new Response),y="upload";for(f=t.size;c<f;){const h=Math.min($T,f-c),v=t.slice(c,c+h);c+h>=f&&(y+=", finalize");let _=0,T=YT;for(;_<WT&&(m=await r.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(c),"Content-Length":String(h)}}}),!(!((i=m?.headers)===null||i===void 0)&&i[mi]));)_++,await ZT(T),T=T*KT;if(c+=h,((u=m?.headers)===null||u===void 0?void 0:u[mi])!=="active")break;if(f<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return m}async function XT(t){return{size:t.size,type:t.type}}function ZT(t){return new Promise(e=>setTimeout(e,t))}class bT{async upload(e,r,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await OT(e,r,i)}async uploadToFileSearchStore(e,r,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await QT(e,r,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await XT(e)}}class jT{create(e,r,i){return new e0(e,r,i)}}class e0{constructor(e,r,i){this.url=e,this.headers=r,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const Ec="x-goog-api-key";class n0{constructor(e){this.apiKey=e}async addAuthHeaders(e,r){if(e.get(Ec)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ec,this.apiKey)}}}const t0="gl-node/";class o0{constructor(e){var r;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=e.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=e.apiKey;const i=kh(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const u=new n0(this.apiKey);this.apiClient=new M_({auth:u,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:t0+"web",uploader:new bT,downloader:new JT}),this.models=new X_(this.apiClient),this.live=new $_(this.apiClient,u,new jT),this.batches=new ly(this.apiClient),this.chats=new zy(this.models,this.apiClient),this.caches=new qy(this.apiClient),this.files=new by(this.apiClient),this.operations=new Z_(this.apiClient),this.authTokens=new pT(this.apiClient),this.tunings=new zT(this.apiClient),this.fileSearchStores=new TT(this.apiClient)}}const yl={BASE_URL:"/green-doc/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_KEY:"AIzaSyCmnpVONCEgRwn-le8S2UXPw91Lx1gB8kg",VITE_QDRANT_API_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiJtIn0.SpspMgj7sf43nsBbaxaMfYectKaJ4arRMeVW-N69QRo",VITE_QDRANT_URL:"https://c51732eb-f3c0-4d0f-96eb-716ae92974f6.us-east4-0.gcp.cloud.qdrant.io:6333"};var vl={};const _c=(t,e)=>typeof process<"u"&&vl&&vl[t]?vl[t]:typeof import.meta<"u"&&yl&&yl[e]?yl[e]:null,ql=_c("API_KEY","VITE_API_KEY")||_c("REACT_APP_API_KEY","VITE_API_KEY");ql||console.warn("Gemini API Key is missing. Please check your .env file configuration.");const bc=new o0({apiKey:ql||"MISSING_KEY"}),jc=async(t,e=3)=>{if(!ql)throw new Error("Missing Gemini API Key in environment variables.");const r="text-embedding-004";for(let i=0;i<e;i++)try{return(await bc.models.embedContent({model:r,contents:{parts:[{text:t}]}})).embeddings?.[0]?.values||null}catch(u){if(i===e-1)throw u;await new Promise(f=>setTimeout(f,500))}return null},r0=async(t,e)=>{const r=new Array(t.length).fill(null),i=15;for(let f=0;f<t.length;f+=i){const m=t.slice(f,f+i).map((y,h)=>{const v=f+h;return jc(y).then(_=>{r[v]=_}).catch(()=>{r[v]=null})});await Promise.all(m),e(Math.round(Math.min(f+i,t.length)/t.length*100)),await new Promise(y=>setTimeout(y,50))}const u=r.filter(f=>f!==null);if(u.length===0&&t.length>0)throw new Error("API Limit");return u},i0=async t=>await jc(t,3)||[],s0=async(t,e,r)=>{const i="gemini-2.5-flash",u=`You are GreenDoc, a professional document assistant.
  Context: ${e.join(`

`)}
  Instructions:
  1. Answer based STRICTLY on the context.
  2. If unknown, say "I cannot find that info in the document."
  3. Be concise.`;return await bc.chats.create({model:i,config:{systemInstruction:u}}).sendMessageStream({message:t})};let di=null,Yo=null;const Hl=[],l0=async t=>(di=t,Yo=null,console.log("Qdrant Service Initialized (Hybrid Mode)"),!0),Bl=async(t,e,r)=>{if(!di)throw new Error("Qdrant not initialized");let i=[];if(Yo)i=[Yo];else{const f=di.url.replace(/\/$/,"");i.push(f),f.includes(":6333")?i.push(f.replace(":6333","")):i.push(f+":6333")}let u=null;for(const f of i){const c=`${f}${t}`;try{const m=await fetch(c,{method:e,headers:{"Content-Type":"application/json","api-key":di.apiKey},body:r?JSON.stringify(r):void 0});if(!m.ok){if(m.status===409)return{status:409};const y=await m.text();throw new Error(`API Error ${m.status}: ${y}`)}return Yo||(Yo=f),await m.json()}catch(m){if(m.message.includes("Failed to fetch")){u=m;continue}throw m}}throw u||new Error("Connection failed")},u0=async t=>{Hl.length=0;try{return await Bl(`/collections/${t}`,"PUT",{vectors:{size:768,distance:"Cosine"}}),!0}catch{return console.warn("Cloud collection check failed, using Local Memory fallback."),!0}},a0=async(t,e,r)=>{e.forEach((u,f)=>{Hl.push({vector:u,payload:r[f]})}),console.log(`Saved ${e.length} points to Local Memory (Fail-Safe).`);const i=e.map((u,f)=>({id:ut(),vector:u,payload:{...r[f],chunkIndex:f}}));try{await Bl(`/collections/${t}/points?wait=false`,"PUT",{points:i}),console.log("Successfully synced to Qdrant Cloud.")}catch{console.warn("Cloud upload failed. Using Local Memory for chat.")}},d0=(t,e)=>t.reduce((r,i,u)=>r+i*e[u],0),f0=async(t,e,r=5)=>{let i=[];try{i=(await Bl(`/collections/${t}/points/search`,"POST",{vector:e,limit:r,with_payload:!0})).result||[]}catch{console.warn("Cloud search failed, switching to Local Memory.")}return i.length>0?i:(console.log("Performing Local Memory Search..."),Hl.map(f=>({score:d0(e,f.vector),payload:f.payload})).sort((f,c)=>c.score-f.score).slice(0,r))},El={BASE_URL:"/green-doc/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_KEY:"AIzaSyCmnpVONCEgRwn-le8S2UXPw91Lx1gB8kg",VITE_QDRANT_API_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiJtIn0.SpspMgj7sf43nsBbaxaMfYectKaJ4arRMeVW-N69QRo",VITE_QDRANT_URL:"https://c51732eb-f3c0-4d0f-96eb-716ae92974f6.us-east4-0.gcp.cloud.qdrant.io:6333"};var _l={};const si=(t,e)=>typeof process<"u"&&_l&&_l[t]?_l[t]:typeof import.meta<"u"&&El&&El[e]?El[e]:"",Xt={url:si("QDRANT_URL","VITE_QDRANT_URL")||si("REACT_APP_QDRANT_URL","VITE_QDRANT_URL"),apiKey:si("QDRANT_API_KEY","VITE_QDRANT_API_KEY")||si("REACT_APP_QDRANT_API_KEY","VITE_QDRANT_API_KEY"),collectionName:"greendoc_collection"},c0=()=>{const[t,e]=Ve.useState(!0),[r,i]=Ve.useState([]),[u,f]=Ve.useState(null),[c,m]=Ve.useState([]),[y,h]=Ve.useState(!1),[v,_]=Ve.useState("doc");Ve.useEffect(()=>{if(!Xt.url||!Xt.apiKey){console.warn("Missing API Configuration. Please check your .env file."),m(x=>[...x,{id:ut(),role:"model",content:"System Error: Missing API Keys. Please configure your .env file.",timestamp:Date.now()}]);return}l0(Xt).catch(console.error)},[]);const T=(x,D)=>{i(B=>B.map(q=>q.id===x?{...q,...D}:q))},w=async x=>{const D=x[0];if(!D)return;_("doc");const B=URL.createObjectURL(D),q=ut(),H={id:q,name:D.name,size:D.size,status:"parsing",progress:0,fileUrl:B};i([H]),f(q);try{await u0(Xt.collectionName);const W=await Ph(D,(se,ee)=>{T(q,{progress:Math.round(se/ee*20)})}),Z=Rh(W);T(q,{status:"embedding",progress:30});const b=await r0(Z,se=>{T(q,{progress:30+se*.4})});T(q,{status:"uploading",progress:80});const j=Z.map(se=>({text:se,source:D.name}));await a0(Xt.collectionName,b,j),T(q,{status:"ready",progress:100}),m(se=>[...se,{id:ut(),role:"model",content:`I've analyzed **${D.name}**. What would you like to know?`,timestamp:Date.now()}]),_("chat")}catch(W){console.error(W),T(q,{status:"error",progress:0}),m(Z=>[...Z,{id:ut(),role:"model",content:`Error: ${W.message}`,timestamp:Date.now()}])}},k=async x=>{const D={id:ut(),role:"user",content:x,timestamp:Date.now()};m(B=>[...B,D]),h(!0);try{console.log("Generating embedding...");const B=await i0(x);console.log("Searching vector DB...");const q=await f0(Xt.collectionName,B);console.log("Search found:",q.length,"results");const H=q.map(j=>j.payload?.text).filter(Boolean);if(H.length===0)throw new Error("No relevant text found in document.");console.log("Generating answer with AI...");const W=await s0(x,H,[]),Z=ut();m(j=>[...j,{id:Z,role:"model",content:"",timestamp:Date.now()}]);let b="";for await(const j of W){const se=j.text;se&&(b+=se,m(ee=>ee.map(ie=>ie.id===Z?{...ie,content:b}:ie)))}}catch(B){console.error("Chat Error:",B.message),m(q=>[...q,{id:ut(),role:"model",content:`Error: ${B.message}. Please check your internet connection and try again.`,timestamp:Date.now()}])}finally{h(!1)}};return t?F.jsx(wh,{onComplete:()=>e(!1)}):F.jsxs("div",{className:"flex h-screen bg-white overflow-hidden font-sans relative",children:[F.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 w-full h-16 bg-white border-t border-gray-200 z-50 flex items-center justify-around pb-2",children:[F.jsxs("button",{onClick:()=>_("chat"),className:`flex flex-col items-center gap-1 ${v==="chat"?"text-emerald-600":"text-gray-400"}`,children:[F.jsx(vh,{size:20}),F.jsx("span",{className:"text-xs font-medium",children:"Chat"})]}),F.jsxs("button",{onClick:()=>_("doc"),className:`flex flex-col items-center gap-1 ${v==="doc"?"text-emerald-600":"text-gray-400"}`,children:[F.jsx(Cc,{size:20}),F.jsx("span",{className:"text-xs font-medium",children:"Document"})]})]}),F.jsx("div",{className:`
            w-full md:w-[45%] h-full flex flex-col border-r border-gray-200 transition-transform duration-300 absolute md:relative z-10 bg-white
            ${v==="chat"?"translate-x-0":"-translate-x-full md:translate-x-0"}
        `,children:F.jsx(Ih,{messages:c,isLoading:y,onSendMessage:k,isConfigured:!0})}),F.jsx("div",{className:`
            w-full md:w-[55%] h-full bg-slate-50 transition-transform duration-300 absolute md:relative right-0 z-10
            ${v==="doc"?"translate-x-0":"translate-x-full md:translate-x-0"}
        `,children:F.jsx(Sh,{files:r,activeFileId:u,onUpload:w,onDeleteFile:()=>i([]),onSelectFile:()=>{},isConfigured:!0})})]})},ep=document.getElementById("root");if(!ep)throw new Error("Could not find root element to mount to");const p0=lh.createRoot(ep);p0.render(F.jsx(eh.StrictMode,{children:F.jsx(c0,{})}));
